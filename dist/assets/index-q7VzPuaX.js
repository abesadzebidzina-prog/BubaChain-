(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();let Jr=class extends Error{name="BaseError";cause;constructor(e,r={}){super(e,r.cause?{cause:r.cause}:void 0),this.cause=r.cause}};class iu extends Jr{name="AddMiniApp.InvalidDomainManifest";constructor(){super("Invalid domain manifest")}}let su=class extends Jr{name="AddMiniApp.RejectedByUser";constructor(){super("Add miniapp rejected by user")}},ba=class extends Jr{name="SignIn.RejectedByUser";constructor(){super("Sign in rejected by user")}};class ou extends Jr{name="SignManifest.RejectedByUser";constructor(){super("Sign manifest rejected by user")}}class au extends Jr{name="SignManifest.InvalidDomain";constructor(){super("Invalid domain provided")}}class cu extends Jr{name="SignManifest.GenericError";constructor(e="Manifest signing failed"){super(e)}}var Ae;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),a={};for(const l of i)a[l]=s[l];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},t.find=(s,i)=>{for(const a of s)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Ae||(Ae={}));var vo;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(vo||(vo={}));const oe=Ae.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),or=t=>{switch(typeof t){case"undefined":return oe.undefined;case"string":return oe.string;case"number":return Number.isNaN(t)?oe.nan:oe.number;case"boolean":return oe.boolean;case"function":return oe.function;case"bigint":return oe.bigint;case"symbol":return oe.symbol;case"object":return Array.isArray(t)?oe.array:t===null?oe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?oe.promise:typeof Map<"u"&&t instanceof Map?oe.map:typeof Set<"u"&&t instanceof Set?oe.set:typeof Date<"u"&&t instanceof Date?oe.date:oe.object;default:return oe.unknown}},J=Ae.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Qt extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let l=n,p=0;for(;p<a.path.length;){const x=a.path[p];p===a.path.length-1?(l[x]=l[x]||{_errors:[]},l[x]._errors.push(r(a))):l[x]=l[x]||{_errors:[]},l=l[x],p++}}};return s(this),n}static assert(e){if(!(e instanceof Qt))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ae.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];r[i]=r[i]||[],r[i].push(e(s))}else n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Qt.create=t=>new Qt(t);const vs=(t,e)=>{let r;switch(t.code){case J.invalid_type:t.received===oe.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case J.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Ae.jsonStringifyReplacer)}`;break;case J.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ae.joinValues(t.keys,", ")}`;break;case J.invalid_union:r="Invalid input";break;case J.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ae.joinValues(t.options)}`;break;case J.invalid_enum_value:r=`Invalid enum value. Expected ${Ae.joinValues(t.options)}, received '${t.received}'`;break;case J.invalid_arguments:r="Invalid function arguments";break;case J.invalid_return_type:r="Invalid function return type";break;case J.invalid_date:r="Invalid date";break;case J.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Ae.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case J.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case J.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case J.custom:r="Invalid input";break;case J.invalid_intersection_types:r="Intersection results could not be merged";break;case J.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case J.not_finite:r="Number must be finite";break;default:r=e.defaultError,Ae.assertNever(t)}return{message:r}};let uu=vs;function fu(){return uu}const lu=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],a={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let l="";const p=n.filter(x=>!!x).slice().reverse();for(const x of p)l=x(a,{data:e,defaultError:l}).message;return{...s,path:i,message:l}};function te(t,e){const r=fu(),n=lu({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===vs?void 0:vs].filter(s=>!!s)});t.common.issues.push(n)}class Ct{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return de;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r){const i=await s.key,a=await s.value;n.push({key:i,value:a})}return Ct.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return de;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}}const de=Object.freeze({status:"aborted"}),nn=t=>({status:"dirty",value:t}),Lt=t=>({status:"valid",value:t}),bo=t=>t.status==="aborted",xo=t=>t.status==="dirty",qr=t=>t.status==="valid",Kn=t=>typeof Promise<"u"&&t instanceof Promise;var ae;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(ae||(ae={}));class fr{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const _o=(t,e)=>{if(qr(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Qt(t.common.issues);return this._error=r,this._error}}};function be(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,l)=>{const{message:p}=t;return a.code==="invalid_enum_value"?{message:p??l.defaultError}:typeof l.data>"u"?{message:p??n??l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:p??r??l.defaultError}},description:s}}class Ee{get description(){return this._def.description}_getType(e){return or(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:or(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ct,ctx:{common:e.parent.common,data:e.data,parsedType:or(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Kn(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){const n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:or(e)},s=this._parseSync({data:e,path:n.path,parent:n});return _o(n,s)}"~validate"(e){const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:or(e)};if(!this["~standard"].async)try{const n=this._parseSync({data:e,path:[],parent:r});return qr(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>qr(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:or(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(Kn(s)?s:Promise.resolve(s));return _o(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const a=e(s),l=()=>i.addIssue({code:J.custom,...n(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(p=>p?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new br({schema:this,typeName:pe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Xt.create(this,this._def)}nullable(){return xr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qt.create(this)}promise(){return Yn.create(this,this._def)}or(e){return Hn.create([this,e],this._def)}and(e){return Gn.create(this,e,this._def)}transform(e){return new br({...be(this._def),schema:this,typeName:pe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Xn({...be(this._def),innerType:this,defaultValue:r,typeName:pe.ZodDefault})}brand(){return new Aa({typeName:pe.ZodBranded,type:this,...be(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Qn({...be(this._def),innerType:this,catchValue:r,typeName:pe.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Ns.create(this,e)}readonly(){return ei.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const du=/^c[^\s-]{8,}$/i,hu=/^[0-9a-z]+$/,pu=/^[0-9A-HJKMNP-TV-Z]{26}$/i,mu=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,gu=/^[a-z0-9_-]{21}$/i,yu=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,wu=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,vu=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,bu="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Gi;const xu=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,_u=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Eu=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Au=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Su=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Bu=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,xa="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Iu=new RegExp(`^${xa}$`);function _a(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function ku(t){return new RegExp(`^${_a(t)}$`)}function Mu(t){let e=`${xa}T${_a(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function Ru(t,e){return!!((e==="v4"||!e)&&xu.test(t)||(e==="v6"||!e)&&Eu.test(t))}function Tu(t,e){if(!yu.test(t))return!1;try{const[r]=t.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||"typ"in s&&s?.typ!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function Ou(t,e){return!!((e==="v4"||!e)&&_u.test(t)||(e==="v6"||!e)&&Au.test(t))}class ar extends Ee{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==oe.string){const i=this._getOrReturnCtx(e);return te(i,{code:J.invalid_type,expected:oe.string,received:i.parsedType}),de}const n=new Ct;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),te(s,{code:J.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),te(s,{code:J.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,l=e.data.length<i.value;(a||l)&&(s=this._getOrReturnCtx(e,s),a?te(s,{code:J.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&te(s,{code:J.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")vu.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"email",code:J.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Gi||(Gi=new RegExp(bu,"u")),Gi.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"emoji",code:J.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")mu.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"uuid",code:J.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")gu.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"nanoid",code:J.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")du.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"cuid",code:J.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")hu.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"cuid2",code:J.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")pu.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"ulid",code:J.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),te(s,{validation:"url",code:J.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"regex",code:J.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),te(s,{code:J.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),te(s,{code:J.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),te(s,{code:J.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?Mu(i).test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{code:J.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?Iu.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{code:J.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?ku(i).test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{code:J.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?wu.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"duration",code:J.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?Ru(e.data,i.version)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"ip",code:J.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?Tu(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"jwt",code:J.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?Ou(e.data,i.version)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"cidr",code:J.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?Su.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"base64",code:J.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?Bu.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"base64url",code:J.invalid_string,message:i.message}),n.dirty()):Ae.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:J.invalid_string,...ae.errToObj(n)})}_addCheck(e){return new ar({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ae.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ae.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ae.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ae.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ae.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ae.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ae.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ae.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ae.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ae.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ae.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ae.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ae.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...ae.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...ae.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...ae.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ae.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...ae.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ae.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ae.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ae.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ae.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ae.errToObj(r)})}nonempty(e){return this.min(1,ae.errToObj(e))}trim(){return new ar({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ar({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ar({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}ar.create=t=>new ar({checks:[],typeName:pe.ZodString,coerce:t?.coerce??!1,...be(t)});function Cu(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=Number.parseInt(t.toFixed(s).replace(".","")),a=Number.parseInt(e.toFixed(s).replace(".",""));return i%a/10**s}class $r extends Ee{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==oe.number){const i=this._getOrReturnCtx(e);return te(i,{code:J.invalid_type,expected:oe.number,received:i.parsedType}),de}let n;const s=new Ct;for(const i of this._def.checks)i.kind==="int"?Ae.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),te(n,{code:J.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),te(n,{code:J.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),te(n,{code:J.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Cu(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),te(n,{code:J.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),te(n,{code:J.not_finite,message:i.message}),s.dirty()):Ae.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ae.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ae.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ae.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ae.toString(r))}setLimit(e,r,n,s){return new $r({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ae.toString(s)}]})}_addCheck(e){return new $r({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ae.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ae.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ae.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ae.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ae.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ae.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ae.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}$r.create=t=>new $r({checks:[],typeName:pe.ZodNumber,coerce:t?.coerce||!1,...be(t)});class sn extends Ee{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==oe.bigint)return this._getInvalidInput(e);let n;const s=new Ct;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),te(n,{code:J.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),te(n,{code:J.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),te(n,{code:J.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Ae.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return te(r,{code:J.invalid_type,expected:oe.bigint,received:r.parsedType}),de}gte(e,r){return this.setLimit("min",e,!0,ae.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ae.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ae.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ae.toString(r))}setLimit(e,r,n,s){return new sn({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ae.toString(s)}]})}_addCheck(e){return new sn({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ae.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ae.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}sn.create=t=>new sn({checks:[],typeName:pe.ZodBigInt,coerce:t?.coerce??!1,...be(t)});class bs extends Ee{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==oe.boolean){const n=this._getOrReturnCtx(e);return te(n,{code:J.invalid_type,expected:oe.boolean,received:n.parsedType}),de}return Lt(e.data)}}bs.create=t=>new bs({typeName:pe.ZodBoolean,coerce:t?.coerce||!1,...be(t)});class Wn extends Ee{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==oe.date){const i=this._getOrReturnCtx(e);return te(i,{code:J.invalid_type,expected:oe.date,received:i.parsedType}),de}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return te(i,{code:J.invalid_date}),de}const n=new Ct;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),te(s,{code:J.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),te(s,{code:J.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Ae.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Wn({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ae.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ae.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}Wn.create=t=>new Wn({checks:[],coerce:t?.coerce||!1,typeName:pe.ZodDate,...be(t)});class Eo extends Ee{_parse(e){if(this._getType(e)!==oe.symbol){const n=this._getOrReturnCtx(e);return te(n,{code:J.invalid_type,expected:oe.symbol,received:n.parsedType}),de}return Lt(e.data)}}Eo.create=t=>new Eo({typeName:pe.ZodSymbol,...be(t)});class xs extends Ee{_parse(e){if(this._getType(e)!==oe.undefined){const n=this._getOrReturnCtx(e);return te(n,{code:J.invalid_type,expected:oe.undefined,received:n.parsedType}),de}return Lt(e.data)}}xs.create=t=>new xs({typeName:pe.ZodUndefined,...be(t)});class _s extends Ee{_parse(e){if(this._getType(e)!==oe.null){const n=this._getOrReturnCtx(e);return te(n,{code:J.invalid_type,expected:oe.null,received:n.parsedType}),de}return Lt(e.data)}}_s.create=t=>new _s({typeName:pe.ZodNull,...be(t)});class Ao extends Ee{constructor(){super(...arguments),this._any=!0}_parse(e){return Lt(e.data)}}Ao.create=t=>new Ao({typeName:pe.ZodAny,...be(t)});class So extends Ee{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Lt(e.data)}}So.create=t=>new So({typeName:pe.ZodUnknown,...be(t)});class lr extends Ee{_parse(e){const r=this._getOrReturnCtx(e);return te(r,{code:J.invalid_type,expected:oe.never,received:r.parsedType}),de}}lr.create=t=>new lr({typeName:pe.ZodNever,...be(t)});class Bo extends Ee{_parse(e){if(this._getType(e)!==oe.undefined){const n=this._getOrReturnCtx(e);return te(n,{code:J.invalid_type,expected:oe.void,received:n.parsedType}),de}return Lt(e.data)}}Bo.create=t=>new Bo({typeName:pe.ZodVoid,...be(t)});class qt extends Ee{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==oe.array)return te(r,{code:J.invalid_type,expected:oe.array,received:r.parsedType}),de;if(s.exactLength!==null){const a=r.data.length>s.exactLength.value,l=r.data.length<s.exactLength.value;(a||l)&&(te(r,{code:a?J.too_big:J.too_small,minimum:l?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(te(r,{code:J.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(te(r,{code:J.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,l)=>s.type._parseAsync(new fr(r,a,r.path,l)))).then(a=>Ct.mergeArray(n,a));const i=[...r.data].map((a,l)=>s.type._parseSync(new fr(r,a,r.path,l)));return Ct.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new qt({...this._def,minLength:{value:e,message:ae.toString(r)}})}max(e,r){return new qt({...this._def,maxLength:{value:e,message:ae.toString(r)}})}length(e,r){return new qt({...this._def,exactLength:{value:e,message:ae.toString(r)}})}nonempty(e){return this.min(1,e)}}qt.create=(t,e)=>new qt({type:t,minLength:null,maxLength:null,exactLength:null,typeName:pe.ZodArray,...be(e)});function Lr(t){if(t instanceof ct){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Xt.create(Lr(n))}return new ct({...t._def,shape:()=>e})}else return t instanceof qt?new qt({...t._def,type:Lr(t.element)}):t instanceof Xt?Xt.create(Lr(t.unwrap())):t instanceof xr?xr.create(Lr(t.unwrap())):t instanceof wr?wr.create(t.items.map(e=>Lr(e))):t}class ct extends Ee{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=Ae.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==oe.object){const x=this._getOrReturnCtx(e);return te(x,{code:J.invalid_type,expected:oe.object,received:x.parsedType}),de}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof lr&&this._def.unknownKeys==="strip"))for(const x in s.data)a.includes(x)||l.push(x);const p=[];for(const x of a){const S=i[x],T=s.data[x];p.push({key:{status:"valid",value:x},value:S._parse(new fr(s,T,s.path,x)),alwaysSet:x in s.data})}if(this._def.catchall instanceof lr){const x=this._def.unknownKeys;if(x==="passthrough")for(const S of l)p.push({key:{status:"valid",value:S},value:{status:"valid",value:s.data[S]}});else if(x==="strict")l.length>0&&(te(s,{code:J.unrecognized_keys,keys:l}),n.dirty());else if(x!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const x=this._def.catchall;for(const S of l){const T=s.data[S];p.push({key:{status:"valid",value:S},value:x._parse(new fr(s,T,s.path,S)),alwaysSet:S in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const x=[];for(const S of p){const T=await S.key,k=await S.value;x.push({key:T,value:k,alwaysSet:S.alwaysSet})}return x}).then(x=>Ct.mergeObjectSync(n,x)):Ct.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(e){return ae.errToObj,new ct({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{const s=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:ae.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new ct({...this._def,unknownKeys:"strip"})}passthrough(){return new ct({...this._def,unknownKeys:"passthrough"})}extend(e){return new ct({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ct({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:pe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new ct({...this._def,catchall:e})}pick(e){const r={};for(const n of Ae.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new ct({...this._def,shape:()=>r})}omit(e){const r={};for(const n of Ae.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new ct({...this._def,shape:()=>r})}deepPartial(){return Lr(this)}partial(e){const r={};for(const n of Ae.objectKeys(this.shape)){const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}return new ct({...this._def,shape:()=>r})}required(e){const r={};for(const n of Ae.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Xt;)i=i._def.innerType;r[n]=i}return new ct({...this._def,shape:()=>r})}keyof(){return Ea(Ae.objectKeys(this.shape))}}ct.create=(t,e)=>new ct({shape:()=>t,unknownKeys:"strip",catchall:lr.create(),typeName:pe.ZodObject,...be(e)});ct.strictCreate=(t,e)=>new ct({shape:()=>t,unknownKeys:"strict",catchall:lr.create(),typeName:pe.ZodObject,...be(e)});ct.lazycreate=(t,e)=>new ct({shape:t,unknownKeys:"strip",catchall:lr.create(),typeName:pe.ZodObject,...be(e)});class Hn extends Ee{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const a=i.map(l=>new Qt(l.ctx.common.issues));return te(r,{code:J.invalid_union,unionErrors:a}),de}if(r.common.async)return Promise.all(n.map(async i=>{const a={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const p of n){const x={...r,common:{...r.common,issues:[]},parent:null},S=p._parseSync({data:r.data,path:r.path,parent:x});if(S.status==="valid")return S;S.status==="dirty"&&!i&&(i={result:S,ctx:x}),x.common.issues.length&&a.push(x.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=a.map(p=>new Qt(p));return te(r,{code:J.invalid_union,unionErrors:l}),de}}get options(){return this._def.options}}Hn.create=(t,e)=>new Hn({options:t,typeName:pe.ZodUnion,...be(e)});const Wt=t=>t instanceof As?Wt(t.schema):t instanceof br?Wt(t.innerType()):t instanceof Jn?[t.value]:t instanceof vr?t.options:t instanceof Ss?Ae.objectValues(t.enum):t instanceof Xn?Wt(t._def.innerType):t instanceof xs?[void 0]:t instanceof _s?[null]:t instanceof Xt?[void 0,...Wt(t.unwrap())]:t instanceof xr?[null,...Wt(t.unwrap())]:t instanceof Aa||t instanceof ei?Wt(t.unwrap()):t instanceof Qn?Wt(t._def.innerType):[];class Ls extends Ee{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.object)return te(r,{code:J.invalid_type,expected:oe.object,received:r.parsedType}),de;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(te(r,{code:J.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),de)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const a=Wt(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of a){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,i)}}return new Ls({typeName:pe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...be(n)})}}function Es(t,e){const r=or(t),n=or(e);if(t===e)return{valid:!0,data:t};if(r===oe.object&&n===oe.object){const s=Ae.objectKeys(e),i=Ae.objectKeys(t).filter(l=>s.indexOf(l)!==-1),a={...t,...e};for(const l of i){const p=Es(t[l],e[l]);if(!p.valid)return{valid:!1};a[l]=p.data}return{valid:!0,data:a}}else if(r===oe.array&&n===oe.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const a=t[i],l=e[i],p=Es(a,l);if(!p.valid)return{valid:!1};s.push(p.data)}return{valid:!0,data:s}}else return r===oe.date&&n===oe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Gn extends Ee{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,a)=>{if(bo(i)||bo(a))return de;const l=Es(i.value,a.value);return l.valid?((xo(i)||xo(a))&&r.dirty(),{status:r.value,value:l.data}):(te(n,{code:J.invalid_intersection_types}),de)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Gn.create=(t,e,r)=>new Gn({left:t,right:e,typeName:pe.ZodIntersection,...be(r)});class wr extends Ee{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.array)return te(n,{code:J.invalid_type,expected:oe.array,received:n.parsedType}),de;if(n.data.length<this._def.items.length)return te(n,{code:J.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),de;!this._def.rest&&n.data.length>this._def.items.length&&(te(n,{code:J.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((a,l)=>{const p=this._def.items[l]||this._def.rest;return p?p._parse(new fr(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>Ct.mergeArray(r,a)):Ct.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new wr({...this._def,rest:e})}}wr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new wr({items:t,typeName:pe.ZodTuple,rest:null,...be(e)})};class Io extends Ee{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.map)return te(n,{code:J.invalid_type,expected:oe.map,received:n.parsedType}),de;const s=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([l,p],x)=>({key:s._parse(new fr(n,l,n.path,[x,"key"])),value:i._parse(new fr(n,p,n.path,[x,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const p of a){const x=await p.key,S=await p.value;if(x.status==="aborted"||S.status==="aborted")return de;(x.status==="dirty"||S.status==="dirty")&&r.dirty(),l.set(x.value,S.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const p of a){const x=p.key,S=p.value;if(x.status==="aborted"||S.status==="aborted")return de;(x.status==="dirty"||S.status==="dirty")&&r.dirty(),l.set(x.value,S.value)}return{status:r.value,value:l}}}}Io.create=(t,e,r)=>new Io({valueType:e,keyType:t,typeName:pe.ZodMap,...be(r)});class on extends Ee{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.set)return te(n,{code:J.invalid_type,expected:oe.set,received:n.parsedType}),de;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(te(n,{code:J.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(te(n,{code:J.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function a(p){const x=new Set;for(const S of p){if(S.status==="aborted")return de;S.status==="dirty"&&r.dirty(),x.add(S.value)}return{status:r.value,value:x}}const l=[...n.data.values()].map((p,x)=>i._parse(new fr(n,p,n.path,x)));return n.common.async?Promise.all(l).then(p=>a(p)):a(l)}min(e,r){return new on({...this._def,minSize:{value:e,message:ae.toString(r)}})}max(e,r){return new on({...this._def,maxSize:{value:e,message:ae.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}on.create=(t,e)=>new on({valueType:t,minSize:null,maxSize:null,typeName:pe.ZodSet,...be(e)});class As extends Ee{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}As.create=(t,e)=>new As({getter:t,typeName:pe.ZodLazy,...be(e)});class Jn extends Ee{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return te(r,{received:r.data,code:J.invalid_literal,expected:this._def.value}),de}return{status:"valid",value:e.data}}get value(){return this._def.value}}Jn.create=(t,e)=>new Jn({value:t,typeName:pe.ZodLiteral,...be(e)});function Ea(t,e){return new vr({values:t,typeName:pe.ZodEnum,...be(e)})}class vr extends Ee{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return te(r,{expected:Ae.joinValues(n),received:r.parsedType,code:J.invalid_type}),de}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return te(r,{received:r.data,code:J.invalid_enum_value,options:n}),de}return Lt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return vr.create(e,{...this._def,...r})}exclude(e,r=this._def){return vr.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}vr.create=Ea;class Ss extends Ee{_parse(e){const r=Ae.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==oe.string&&n.parsedType!==oe.number){const s=Ae.objectValues(r);return te(n,{expected:Ae.joinValues(s),received:n.parsedType,code:J.invalid_type}),de}if(this._cache||(this._cache=new Set(Ae.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=Ae.objectValues(r);return te(n,{received:n.data,code:J.invalid_enum_value,options:s}),de}return Lt(e.data)}get enum(){return this._def.values}}Ss.create=(t,e)=>new Ss({values:t,typeName:pe.ZodNativeEnum,...be(e)});class Yn extends Ee{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.promise&&r.common.async===!1)return te(r,{code:J.invalid_type,expected:oe.promise,received:r.parsedType}),de;const n=r.parsedType===oe.promise?r.data:Promise.resolve(r.data);return Lt(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Yn.create=(t,e)=>new Yn({type:t,typeName:pe.ZodPromise,...be(e)});class br extends Ee{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===pe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:a=>{te(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(n.data,i);if(n.common.async)return Promise.resolve(a).then(async l=>{if(r.value==="aborted")return de;const p=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return p.status==="aborted"?de:p.status==="dirty"||r.value==="dirty"?nn(p.value):p});{if(r.value==="aborted")return de;const l=this._def.schema._parseSync({data:a,path:n.path,parent:n});return l.status==="aborted"?de:l.status==="dirty"||r.value==="dirty"?nn(l.value):l}}if(s.type==="refinement"){const a=l=>{const p=s.refinement(l,i);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?de:(l.status==="dirty"&&r.dirty(),a(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?de:(l.status==="dirty"&&r.dirty(),a(l.value).then(()=>({status:r.value,value:l.value}))))}if(s.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!qr(a))return de;const l=s.transform(a.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>qr(a)?Promise.resolve(s.transform(a.value,i)).then(l=>({status:r.value,value:l})):de);Ae.assertNever(s)}}br.create=(t,e,r)=>new br({schema:t,typeName:pe.ZodEffects,effect:e,...be(r)});br.createWithPreprocess=(t,e,r)=>new br({schema:e,effect:{type:"preprocess",transform:t},typeName:pe.ZodEffects,...be(r)});class Xt extends Ee{_parse(e){return this._getType(e)===oe.undefined?Lt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Xt.create=(t,e)=>new Xt({innerType:t,typeName:pe.ZodOptional,...be(e)});class xr extends Ee{_parse(e){return this._getType(e)===oe.null?Lt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}xr.create=(t,e)=>new xr({innerType:t,typeName:pe.ZodNullable,...be(e)});class Xn extends Ee{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===oe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Xn.create=(t,e)=>new Xn({innerType:t,typeName:pe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...be(e)});class Qn extends Ee{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Kn(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Qt(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Qt(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Qn.create=(t,e)=>new Qn({innerType:t,typeName:pe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...be(e)});class ko extends Ee{_parse(e){if(this._getType(e)!==oe.nan){const n=this._getOrReturnCtx(e);return te(n,{code:J.invalid_type,expected:oe.nan,received:n.parsedType}),de}return{status:"valid",value:e.data}}}ko.create=t=>new ko({typeName:pe.ZodNaN,...be(t)});class Aa extends Ee{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Ns extends Ee{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?de:i.status==="dirty"?(r.dirty(),nn(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?de:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new Ns({in:e,out:r,typeName:pe.ZodPipeline})}}class ei extends Ee{_parse(e){const r=this._def.innerType._parse(e),n=s=>(qr(s)&&(s.value=Object.freeze(s.value)),s);return Kn(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}}ei.create=(t,e)=>new ei({innerType:t,typeName:pe.ZodReadonly,...be(e)});var pe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(pe||(pe={}));const $e=ar.create,Sa=$r.create,Uu=bs.create;lr.create;const gr=qt.create,mt=ct.create,ti=Hn.create,Ba=Ls.create;Gn.create;wr.create;const _t=Jn.create,Fs=vr.create;Yn.create;Xt.create;xr.create;const Lu=/[@#$%^&*+=/\\|~]/,Nu=/(!{2,}|\?{2,}|-{2,})/,Fu=/[\u{1F300}-\u{1F9FF}]|[\u{2702}-\u{27B0}]|[\u{2600}-\u{26FF}]|[\u{2B00}-\u{2BFF}]/u,Yr=({max:t,noSpaces:e}={})=>(e?$e().max(t??Number.POSITIVE_INFINITY).regex(/^\S*$/,"Spaces are not allowed"):$e().max(t??Number.POSITIVE_INFINITY)).refine(n=>!Fu.test(n),{message:"Emojis and symbols are not allowed"}).refine(n=>!Lu.test(n),{message:"Special characters (@, #, $, %, ^, &, *, +, =, /, \\, |, ~, , ) are not allowed"}).refine(n=>!Nu.test(n),{message:"Repeated punctuations (!!, ??, --) are not allowed"}),Et=$e().url().startsWith("https://",{message:"Must be an https url"}).max(1024).refine(t=>!t.includes(" "),{message:"URL must not contain spaces"}).refine(t=>{try{const e=new URL(t).hostname;return!(e==="localhost"||e.endsWith(".localhost")||/^(\d{1,3}\.){3}\d{1,3}$/.test(e)||e.startsWith("[")&&e.endsWith("]"))}catch{return!1}},{message:"URL must not use IP addresses or localhost"}),Ps=$e().max(32),Ia=$e().max(32),Pu=/^[-a-z0-9]{3,8}:[-_a-zA-Z0-9]{1,32}\/(?:[-a-z0-9]{3,8}:[-.%a-zA-Z0-9]{1,128}(?:\/[-.%a-zA-Z0-9]{1,78})?|native)$/,Du=$e().regex(Pu,{message:"Invalid CAIP-19 asset ID"}),Ds=$e().regex(/^#([0-9A-F]{3}|[0-9A-F]{6})$/i,{message:"Invalid hex color code. It should be in the format #RRGGBB or #RGB."}),ju=/^(?!.*\.\.)([a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,zu=$e().max(1024).regex(ju,{message:"Must be a valid domain name (e.g., example.com, sub.example.com)"}).refine(t=>!t.includes("://"),{message:"Domain must not include protocol (http://, https://, etc.)"}).refine(t=>!t.includes("/"),{message:"Domain must not include path separators"}).refine(t=>!t.includes("@"),{message:"Domain must not include @ symbol"}).refine(t=>!t.includes(":"),{message:"Domain must not include port numbers"}),qu=ti([_t("1:1"),_t("3:2")]),$u=mt({header:$e(),payload:$e(),signature:$e()});mt({fid:Sa(),type:_t("app_key"),key:$e().startsWith("0x")});const Zu=mt({type:_t("launch_frame"),name:Ps,url:Et.optional(),splashImageUrl:Et.optional(),splashBackgroundColor:Ds.optional()}),Vu=mt({type:_t("launch_miniapp"),name:Ps,url:Et.optional(),splashImageUrl:Et.optional(),splashBackgroundColor:Ds.optional()}),Ku=mt({type:_t("view_token"),token:Du}),Wu=Ba("type",[Vu,Ku,Zu]),Hu=mt({title:Ia,action:Wu});mt({version:ti([$e(),Sa()]).transform(t=>String(t)).pipe(ti([_t("next"),_t("1")])),imageUrl:Et,aspectRatio:qu.optional(),button:Hu});const ka=mt({url:$e(),token:$e()});mt({notificationId:$e().max(128),title:$e().max(32),body:$e().max(128),targetUrl:Et,tokens:$e().array().max(100)});mt({result:mt({successfulTokens:gr($e()),invalidTokens:gr($e()),rateLimitedTokens:gr($e())})});const Gu=mt({event:_t("miniapp_added"),notificationDetails:ka.optional()}),Ju=mt({event:_t("miniapp_removed")}),Yu=mt({event:_t("notifications_enabled"),notificationDetails:ka.required()}),Xu=mt({event:_t("notifications_disabled")});Ba("event",[Gu,Ju,Yu,Xu]);const Qu=["wallet.getEthereumProvider","wallet.getSolanaProvider","actions.ready","actions.openUrl","actions.close","actions.setPrimaryButton","actions.addMiniApp","actions.signIn","actions.viewCast","actions.viewProfile","actions.composeCast","actions.viewToken","actions.sendToken","actions.swapToken","actions.openMiniApp","actions.requestCameraAndMicrophoneAccess","experimental.signManifest","haptics.impactOccurred","haptics.notificationOccurred","haptics.selectionChanged","back"],ef=["games","social","finance","utility","productivity","health-fitness","news-media","music","shopping","education","developer-tools","entertainment","art-creativity"],tf=Fs(ef),rf=ti([_t("0.0.0"),_t("0.0.1"),_t("1"),_t("next")]),nf=Yr({max:30}),sf=Yr({max:170}),of=gr(Et).max(3),af=gr(Yr({max:20,noSpaces:!0})).max(5),cf=Yr({max:30}),uf=Yr({max:30}),ff=Yr({max:100}),lf=Uu(),df=["eip155:1","eip155:8453","eip155:42161","eip155:421614","eip155:84532","eip155:666666666","eip155:100","eip155:10","eip155:11155420","eip155:137","eip155:11155111","eip155:7777777","eip155:130","eip155:10143","eip155:42220","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp"];function Ma(t){const e=new Set(t);return Array.from(e)}const hf=gr(Fs(df)).transform(Ma),pf=gr(Fs(Qu)).transform(Ma),Mo=mt({version:rf,name:Ps,iconUrl:Et,homeUrl:Et,imageUrl:Et.optional(),buttonTitle:Ia.optional(),splashImageUrl:Et.optional(),splashBackgroundColor:Ds.optional(),webhookUrl:Et.optional(),subtitle:nf.optional(),description:sf.optional(),screenshotUrls:of.optional(),primaryCategory:tf.optional(),tags:af.optional(),heroImageUrl:Et.optional(),tagline:cf.optional(),ogTitle:uf.optional(),ogDescription:ff.optional(),ogImageUrl:Et.optional(),noindex:lf.optional(),requiredChains:hf.optional(),requiredCapabilities:pf.optional(),castShareUrl:Et.optional(),canonicalDomain:zu.optional()}).refine(t=>{if(t.castShareUrl===void 0)return!0;try{const e=new URL(t.homeUrl).hostname,r=new URL(t.castShareUrl).hostname;return e===r}catch{return!1}},{message:"castShareUrl must have the same domain as homeUrl",path:["castShareUrl"]});mt({accountAssociation:$u,miniapp:Mo.optional(),frame:Mo.optional()}).refine(t=>t.frame&&t.miniapp?JSON.stringify(t.frame)===JSON.stringify(t.miniapp):!0,{message:'If both "frame" and "miniapp" are provided, they must be identical',path:["frame","miniapp"]}).transform(t=>({...t,frame:t.frame??t.miniapp}));function js(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function zs(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){var s=!1;try{s=this instanceof n}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Ji={},tn={},Ro;function mf(){if(Ro)return tn;Ro=1,tn.byteLength=l,tn.toByteArray=x,tn.fromByteArray=k;for(var t=[],e=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=n.length;s<i;++s)t[s]=n[s],e[n.charCodeAt(s)]=s;e[45]=62,e[95]=63;function a(B){var C=B.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var R=B.indexOf("=");R===-1&&(R=C);var N=R===C?0:4-R%4;return[R,N]}function l(B){var C=a(B),R=C[0],N=C[1];return(R+N)*3/4-N}function p(B,C,R){return(C+R)*3/4-R}function x(B){var C,R=a(B),N=R[0],j=R[1],H=new r(p(B,N,j)),q=0,ee=j>0?N-4:N,Y;for(Y=0;Y<ee;Y+=4)C=e[B.charCodeAt(Y)]<<18|e[B.charCodeAt(Y+1)]<<12|e[B.charCodeAt(Y+2)]<<6|e[B.charCodeAt(Y+3)],H[q++]=C>>16&255,H[q++]=C>>8&255,H[q++]=C&255;return j===2&&(C=e[B.charCodeAt(Y)]<<2|e[B.charCodeAt(Y+1)]>>4,H[q++]=C&255),j===1&&(C=e[B.charCodeAt(Y)]<<10|e[B.charCodeAt(Y+1)]<<4|e[B.charCodeAt(Y+2)]>>2,H[q++]=C>>8&255,H[q++]=C&255),H}function S(B){return t[B>>18&63]+t[B>>12&63]+t[B>>6&63]+t[B&63]}function T(B,C,R){for(var N,j=[],H=C;H<R;H+=3)N=(B[H]<<16&16711680)+(B[H+1]<<8&65280)+(B[H+2]&255),j.push(S(N));return j.join("")}function k(B){for(var C,R=B.length,N=R%3,j=[],H=16383,q=0,ee=R-N;q<ee;q+=H)j.push(T(B,q,q+H>ee?ee:q+H));return N===1?(C=B[R-1],j.push(t[C>>2]+t[C<<4&63]+"==")):N===2&&(C=(B[R-2]<<8)+B[R-1],j.push(t[C>>10]+t[C>>4&63]+t[C<<2&63]+"=")),j.join("")}return tn}var Rn={};var To;function gf(){return To||(To=1,Rn.read=function(t,e,r,n,s){var i,a,l=s*8-n-1,p=(1<<l)-1,x=p>>1,S=-7,T=r?s-1:0,k=r?-1:1,B=t[e+T];for(T+=k,i=B&(1<<-S)-1,B>>=-S,S+=l;S>0;i=i*256+t[e+T],T+=k,S-=8);for(a=i&(1<<-S)-1,i>>=-S,S+=n;S>0;a=a*256+t[e+T],T+=k,S-=8);if(i===0)i=1-x;else{if(i===p)return a?NaN:(B?-1:1)*(1/0);a=a+Math.pow(2,n),i=i-x}return(B?-1:1)*a*Math.pow(2,i-n)},Rn.write=function(t,e,r,n,s,i){var a,l,p,x=i*8-s-1,S=(1<<x)-1,T=S>>1,k=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=n?0:i-1,C=n?1:-1,R=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,a=S):(a=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-a))<1&&(a--,p*=2),a+T>=1?e+=k/p:e+=k*Math.pow(2,1-T),e*p>=2&&(a++,p/=2),a+T>=S?(l=0,a=S):a+T>=1?(l=(e*p-1)*Math.pow(2,s),a=a+T):(l=e*Math.pow(2,T-1)*Math.pow(2,s),a=0));s>=8;t[r+B]=l&255,B+=C,l/=256,s-=8);for(a=a<<s|l,x+=s;x>0;t[r+B]=a&255,B+=C,a/=256,x-=8);t[r+B-C]|=R*128}),Rn}var Oo;function qs(){return Oo||(Oo=1,(function(t){const e=mf(),r=gf(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=H,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,l.TYPED_ARRAY_SUPPORT=i(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const y=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(y,f),y.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function a(y){if(y>s)throw new RangeError('The value "'+y+'" is invalid for option "size"');const f=new Uint8Array(y);return Object.setPrototypeOf(f,l.prototype),f}function l(y,f,h){if(typeof y=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return T(y)}return p(y,f,h)}l.poolSize=8192;function p(y,f,h){if(typeof y=="string")return k(y,f);if(ArrayBuffer.isView(y))return C(y);if(y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y);if(Mt(y,ArrayBuffer)||y&&Mt(y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Mt(y,SharedArrayBuffer)||y&&Mt(y.buffer,SharedArrayBuffer)))return R(y,f,h);if(typeof y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const _=y.valueOf&&y.valueOf();if(_!=null&&_!==y)return l.from(_,f,h);const L=N(y);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof y[Symbol.toPrimitive]=="function")return l.from(y[Symbol.toPrimitive]("string"),f,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y)}l.from=function(y,f,h){return p(y,f,h)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function x(y){if(typeof y!="number")throw new TypeError('"size" argument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is invalid for option "size"')}function S(y,f,h){return x(y),y<=0?a(y):f!==void 0?typeof h=="string"?a(y).fill(f,h):a(y).fill(f):a(y)}l.alloc=function(y,f,h){return S(y,f,h)};function T(y){return x(y),a(y<0?0:j(y)|0)}l.allocUnsafe=function(y){return T(y)},l.allocUnsafeSlow=function(y){return T(y)};function k(y,f){if((typeof f!="string"||f==="")&&(f="utf8"),!l.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const h=q(y,f)|0;let _=a(h);const L=_.write(y,f);return L!==h&&(_=_.slice(0,L)),_}function B(y){const f=y.length<0?0:j(y.length)|0,h=a(f);for(let _=0;_<f;_+=1)h[_]=y[_]&255;return h}function C(y){if(Mt(y,Uint8Array)){const f=new Uint8Array(y);return R(f.buffer,f.byteOffset,f.byteLength)}return B(y)}function R(y,f,h){if(f<0||y.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(y.byteLength<f+(h||0))throw new RangeError('"length" is outside of buffer bounds');let _;return f===void 0&&h===void 0?_=new Uint8Array(y):h===void 0?_=new Uint8Array(y,f):_=new Uint8Array(y,f,h),Object.setPrototypeOf(_,l.prototype),_}function N(y){if(l.isBuffer(y)){const f=j(y.length)|0,h=a(f);return h.length===0||y.copy(h,0,0,f),h}if(y.length!==void 0)return typeof y.length!="number"||Ue(y.length)?a(0):B(y);if(y.type==="Buffer"&&Array.isArray(y.data))return B(y.data)}function j(y){if(y>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return y|0}function H(y){return+y!=y&&(y=0),l.alloc(+y)}l.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==l.prototype},l.compare=function(f,h){if(Mt(f,Uint8Array)&&(f=l.from(f,f.offset,f.byteLength)),Mt(h,Uint8Array)&&(h=l.from(h,h.offset,h.byteLength)),!l.isBuffer(f)||!l.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===h)return 0;let _=f.length,L=h.length;for(let D=0,K=Math.min(_,L);D<K;++D)if(f[D]!==h[D]){_=f[D],L=h[D];break}return _<L?-1:L<_?1:0},l.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(f,h){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return l.alloc(0);let _;if(h===void 0)for(h=0,_=0;_<f.length;++_)h+=f[_].length;const L=l.allocUnsafe(h);let D=0;for(_=0;_<f.length;++_){let K=f[_];if(Mt(K,Uint8Array))D+K.length>L.length?(l.isBuffer(K)||(K=l.from(K)),K.copy(L,D)):Uint8Array.prototype.set.call(L,K,D);else if(l.isBuffer(K))K.copy(L,D);else throw new TypeError('"list" argument must be an Array of Buffers');D+=K.length}return L};function q(y,f){if(l.isBuffer(y))return y.length;if(ArrayBuffer.isView(y)||Mt(y,ArrayBuffer))return y.byteLength;if(typeof y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof y);const h=y.length,_=arguments.length>2&&arguments[2]===!0;if(!_&&h===0)return 0;let L=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return Ce(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return Le(y).length;default:if(L)return _?-1:Ce(y).length;f=(""+f).toLowerCase(),L=!0}}l.byteLength=q;function ee(y,f,h){let _=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,f>>>=0,h<=f))return"";for(y||(y="utf8");;)switch(y){case"hex":return I(this,f,h);case"utf8":case"utf-8":return o(this,f,h);case"ascii":return b(this,f,h);case"latin1":case"binary":return E(this,f,h);case"base64":return g(this,f,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,f,h);default:if(_)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),_=!0}}l.prototype._isBuffer=!0;function Y(y,f,h){const _=y[f];y[f]=y[h],y[h]=_}l.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<f;h+=2)Y(this,h,h+1);return this},l.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<f;h+=4)Y(this,h,h+3),Y(this,h+1,h+2);return this},l.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<f;h+=8)Y(this,h,h+7),Y(this,h+1,h+6),Y(this,h+2,h+5),Y(this,h+3,h+4);return this},l.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?o(this,0,f):ee.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(f){if(!l.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:l.compare(this,f)===0},l.prototype.inspect=function(){let f="";const h=t.INSPECT_MAX_BYTES;return f=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(f+=" ... "),"<Buffer "+f+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(f,h,_,L,D){if(Mt(f,Uint8Array)&&(f=l.from(f,f.offset,f.byteLength)),!l.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(h===void 0&&(h=0),_===void 0&&(_=f?f.length:0),L===void 0&&(L=0),D===void 0&&(D=this.length),h<0||_>f.length||L<0||D>this.length)throw new RangeError("out of range index");if(L>=D&&h>=_)return 0;if(L>=D)return-1;if(h>=_)return 1;if(h>>>=0,_>>>=0,L>>>=0,D>>>=0,this===f)return 0;let K=D-L,we=_-h;const me=Math.min(K,we),he=this.slice(L,D),Oe=f.slice(h,_);for(let fe=0;fe<me;++fe)if(he[fe]!==Oe[fe]){K=he[fe],we=Oe[fe];break}return K<we?-1:we<K?1:0};function se(y,f,h,_,L){if(y.length===0)return-1;if(typeof h=="string"?(_=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,Ue(h)&&(h=L?0:y.length-1),h<0&&(h=y.length+h),h>=y.length){if(L)return-1;h=y.length-1}else if(h<0)if(L)h=0;else return-1;if(typeof f=="string"&&(f=l.from(f,_)),l.isBuffer(f))return f.length===0?-1:le(y,f,h,_,L);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(y,f,h):Uint8Array.prototype.lastIndexOf.call(y,f,h):le(y,[f],h,_,L);throw new TypeError("val must be string, number or Buffer")}function le(y,f,h,_,L){let D=1,K=y.length,we=f.length;if(_!==void 0&&(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le")){if(y.length<2||f.length<2)return-1;D=2,K/=2,we/=2,h/=2}function me(Oe,fe){return D===1?Oe[fe]:Oe.readUInt16BE(fe*D)}let he;if(L){let Oe=-1;for(he=h;he<K;he++)if(me(y,he)===me(f,Oe===-1?0:he-Oe)){if(Oe===-1&&(Oe=he),he-Oe+1===we)return Oe*D}else Oe!==-1&&(he-=he-Oe),Oe=-1}else for(h+we>K&&(h=K-we),he=h;he>=0;he--){let Oe=!0;for(let fe=0;fe<we;fe++)if(me(y,he+fe)!==me(f,fe)){Oe=!1;break}if(Oe)return he}return-1}l.prototype.includes=function(f,h,_){return this.indexOf(f,h,_)!==-1},l.prototype.indexOf=function(f,h,_){return se(this,f,h,_,!0)},l.prototype.lastIndexOf=function(f,h,_){return se(this,f,h,_,!1)};function ce(y,f,h,_){h=Number(h)||0;const L=y.length-h;_?(_=Number(_),_>L&&(_=L)):_=L;const D=f.length;_>D/2&&(_=D/2);let K;for(K=0;K<_;++K){const we=parseInt(f.substr(K*2,2),16);if(Ue(we))return K;y[h+K]=we}return K}function U(y,f,h,_){return Te(Ce(f,y.length-h),y,h,_)}function F(y,f,h,_){return Te(Pe(f),y,h,_)}function z(y,f,h,_){return Te(Le(f),y,h,_)}function V(y,f,h,_){return Te(Mn(f,y.length-h),y,h,_)}l.prototype.write=function(f,h,_,L){if(h===void 0)L="utf8",_=this.length,h=0;else if(_===void 0&&typeof h=="string")L=h,_=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(_)?(_=_>>>0,L===void 0&&(L="utf8")):(L=_,_=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const D=this.length-h;if((_===void 0||_>D)&&(_=D),f.length>0&&(_<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let K=!1;for(;;)switch(L){case"hex":return ce(this,f,h,_);case"utf8":case"utf-8":return U(this,f,h,_);case"ascii":case"latin1":case"binary":return F(this,f,h,_);case"base64":return z(this,f,h,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,f,h,_);default:if(K)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),K=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function g(y,f,h){return f===0&&h===y.length?e.fromByteArray(y):e.fromByteArray(y.slice(f,h))}function o(y,f,h){h=Math.min(y.length,h);const _=[];let L=f;for(;L<h;){const D=y[L];let K=null,we=D>239?4:D>223?3:D>191?2:1;if(L+we<=h){let me,he,Oe,fe;switch(we){case 1:D<128&&(K=D);break;case 2:me=y[L+1],(me&192)===128&&(fe=(D&31)<<6|me&63,fe>127&&(K=fe));break;case 3:me=y[L+1],he=y[L+2],(me&192)===128&&(he&192)===128&&(fe=(D&15)<<12|(me&63)<<6|he&63,fe>2047&&(fe<55296||fe>57343)&&(K=fe));break;case 4:me=y[L+1],he=y[L+2],Oe=y[L+3],(me&192)===128&&(he&192)===128&&(Oe&192)===128&&(fe=(D&15)<<18|(me&63)<<12|(he&63)<<6|Oe&63,fe>65535&&fe<1114112&&(K=fe))}}K===null?(K=65533,we=1):K>65535&&(K-=65536,_.push(K>>>10&1023|55296),K=56320|K&1023),_.push(K),L+=we}return m(_)}const d=4096;function m(y){const f=y.length;if(f<=d)return String.fromCharCode.apply(String,y);let h="",_=0;for(;_<f;)h+=String.fromCharCode.apply(String,y.slice(_,_+=d));return h}function b(y,f,h){let _="";h=Math.min(y.length,h);for(let L=f;L<h;++L)_+=String.fromCharCode(y[L]&127);return _}function E(y,f,h){let _="";h=Math.min(y.length,h);for(let L=f;L<h;++L)_+=String.fromCharCode(y[L]);return _}function I(y,f,h){const _=y.length;(!f||f<0)&&(f=0),(!h||h<0||h>_)&&(h=_);let L="";for(let D=f;D<h;++D)L+=De[y[D]];return L}function O(y,f,h){const _=y.slice(f,h);let L="";for(let D=0;D<_.length-1;D+=2)L+=String.fromCharCode(_[D]+_[D+1]*256);return L}l.prototype.slice=function(f,h){const _=this.length;f=~~f,h=h===void 0?_:~~h,f<0?(f+=_,f<0&&(f=0)):f>_&&(f=_),h<0?(h+=_,h<0&&(h=0)):h>_&&(h=_),h<f&&(h=f);const L=this.subarray(f,h);return Object.setPrototypeOf(L,l.prototype),L};function v(y,f,h){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+f>h)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(f,h,_){f=f>>>0,h=h>>>0,_||v(f,h,this.length);let L=this[f],D=1,K=0;for(;++K<h&&(D*=256);)L+=this[f+K]*D;return L},l.prototype.readUintBE=l.prototype.readUIntBE=function(f,h,_){f=f>>>0,h=h>>>0,_||v(f,h,this.length);let L=this[f+--h],D=1;for(;h>0&&(D*=256);)L+=this[f+--h]*D;return L},l.prototype.readUint8=l.prototype.readUInt8=function(f,h){return f=f>>>0,h||v(f,1,this.length),this[f]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(f,h){return f=f>>>0,h||v(f,2,this.length),this[f]|this[f+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(f,h){return f=f>>>0,h||v(f,2,this.length),this[f]<<8|this[f+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(f,h){return f=f>>>0,h||v(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(f,h){return f=f>>>0,h||v(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},l.prototype.readBigUInt64LE=Nt(function(f){f=f>>>0,Ut(f,"offset");const h=this[f],_=this[f+7];(h===void 0||_===void 0)&&Me(f,this.length-8);const L=h+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,D=this[++f]+this[++f]*2**8+this[++f]*2**16+_*2**24;return BigInt(L)+(BigInt(D)<<BigInt(32))}),l.prototype.readBigUInt64BE=Nt(function(f){f=f>>>0,Ut(f,"offset");const h=this[f],_=this[f+7];(h===void 0||_===void 0)&&Me(f,this.length-8);const L=h*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],D=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+_;return(BigInt(L)<<BigInt(32))+BigInt(D)}),l.prototype.readIntLE=function(f,h,_){f=f>>>0,h=h>>>0,_||v(f,h,this.length);let L=this[f],D=1,K=0;for(;++K<h&&(D*=256);)L+=this[f+K]*D;return D*=128,L>=D&&(L-=Math.pow(2,8*h)),L},l.prototype.readIntBE=function(f,h,_){f=f>>>0,h=h>>>0,_||v(f,h,this.length);let L=h,D=1,K=this[f+--L];for(;L>0&&(D*=256);)K+=this[f+--L]*D;return D*=128,K>=D&&(K-=Math.pow(2,8*h)),K},l.prototype.readInt8=function(f,h){return f=f>>>0,h||v(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},l.prototype.readInt16LE=function(f,h){f=f>>>0,h||v(f,2,this.length);const _=this[f]|this[f+1]<<8;return _&32768?_|4294901760:_},l.prototype.readInt16BE=function(f,h){f=f>>>0,h||v(f,2,this.length);const _=this[f+1]|this[f]<<8;return _&32768?_|4294901760:_},l.prototype.readInt32LE=function(f,h){return f=f>>>0,h||v(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},l.prototype.readInt32BE=function(f,h){return f=f>>>0,h||v(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},l.prototype.readBigInt64LE=Nt(function(f){f=f>>>0,Ut(f,"offset");const h=this[f],_=this[f+7];(h===void 0||_===void 0)&&Me(f,this.length-8);const L=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(_<<24);return(BigInt(L)<<BigInt(32))+BigInt(h+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),l.prototype.readBigInt64BE=Nt(function(f){f=f>>>0,Ut(f,"offset");const h=this[f],_=this[f+7];(h===void 0||_===void 0)&&Me(f,this.length-8);const L=(h<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(L)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+_)}),l.prototype.readFloatLE=function(f,h){return f=f>>>0,h||v(f,4,this.length),r.read(this,f,!0,23,4)},l.prototype.readFloatBE=function(f,h){return f=f>>>0,h||v(f,4,this.length),r.read(this,f,!1,23,4)},l.prototype.readDoubleLE=function(f,h){return f=f>>>0,h||v(f,8,this.length),r.read(this,f,!0,52,8)},l.prototype.readDoubleBE=function(f,h){return f=f>>>0,h||v(f,8,this.length),r.read(this,f,!1,52,8)};function c(y,f,h,_,L,D){if(!l.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>L||f<D)throw new RangeError('"value" argument is out of bounds');if(h+_>y.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(f,h,_,L){if(f=+f,h=h>>>0,_=_>>>0,!L){const we=Math.pow(2,8*_)-1;c(this,f,h,_,we,0)}let D=1,K=0;for(this[h]=f&255;++K<_&&(D*=256);)this[h+K]=f/D&255;return h+_},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(f,h,_,L){if(f=+f,h=h>>>0,_=_>>>0,!L){const we=Math.pow(2,8*_)-1;c(this,f,h,_,we,0)}let D=_-1,K=1;for(this[h+D]=f&255;--D>=0&&(K*=256);)this[h+D]=f/K&255;return h+_},l.prototype.writeUint8=l.prototype.writeUInt8=function(f,h,_){return f=+f,h=h>>>0,_||c(this,f,h,1,255,0),this[h]=f&255,h+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(f,h,_){return f=+f,h=h>>>0,_||c(this,f,h,2,65535,0),this[h]=f&255,this[h+1]=f>>>8,h+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(f,h,_){return f=+f,h=h>>>0,_||c(this,f,h,2,65535,0),this[h]=f>>>8,this[h+1]=f&255,h+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(f,h,_){return f=+f,h=h>>>0,_||c(this,f,h,4,4294967295,0),this[h+3]=f>>>24,this[h+2]=f>>>16,this[h+1]=f>>>8,this[h]=f&255,h+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(f,h,_){return f=+f,h=h>>>0,_||c(this,f,h,4,4294967295,0),this[h]=f>>>24,this[h+1]=f>>>16,this[h+2]=f>>>8,this[h+3]=f&255,h+4};function u(y,f,h,_,L){ke(f,_,L,y,h,7);let D=Number(f&BigInt(4294967295));y[h++]=D,D=D>>8,y[h++]=D,D=D>>8,y[h++]=D,D=D>>8,y[h++]=D;let K=Number(f>>BigInt(32)&BigInt(4294967295));return y[h++]=K,K=K>>8,y[h++]=K,K=K>>8,y[h++]=K,K=K>>8,y[h++]=K,h}function w(y,f,h,_,L){ke(f,_,L,y,h,7);let D=Number(f&BigInt(4294967295));y[h+7]=D,D=D>>8,y[h+6]=D,D=D>>8,y[h+5]=D,D=D>>8,y[h+4]=D;let K=Number(f>>BigInt(32)&BigInt(4294967295));return y[h+3]=K,K=K>>8,y[h+2]=K,K=K>>8,y[h+1]=K,K=K>>8,y[h]=K,h+8}l.prototype.writeBigUInt64LE=Nt(function(f,h=0){return u(this,f,h,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Nt(function(f,h=0){return w(this,f,h,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(f,h,_,L){if(f=+f,h=h>>>0,!L){const me=Math.pow(2,8*_-1);c(this,f,h,_,me-1,-me)}let D=0,K=1,we=0;for(this[h]=f&255;++D<_&&(K*=256);)f<0&&we===0&&this[h+D-1]!==0&&(we=1),this[h+D]=(f/K>>0)-we&255;return h+_},l.prototype.writeIntBE=function(f,h,_,L){if(f=+f,h=h>>>0,!L){const me=Math.pow(2,8*_-1);c(this,f,h,_,me-1,-me)}let D=_-1,K=1,we=0;for(this[h+D]=f&255;--D>=0&&(K*=256);)f<0&&we===0&&this[h+D+1]!==0&&(we=1),this[h+D]=(f/K>>0)-we&255;return h+_},l.prototype.writeInt8=function(f,h,_){return f=+f,h=h>>>0,_||c(this,f,h,1,127,-128),f<0&&(f=255+f+1),this[h]=f&255,h+1},l.prototype.writeInt16LE=function(f,h,_){return f=+f,h=h>>>0,_||c(this,f,h,2,32767,-32768),this[h]=f&255,this[h+1]=f>>>8,h+2},l.prototype.writeInt16BE=function(f,h,_){return f=+f,h=h>>>0,_||c(this,f,h,2,32767,-32768),this[h]=f>>>8,this[h+1]=f&255,h+2},l.prototype.writeInt32LE=function(f,h,_){return f=+f,h=h>>>0,_||c(this,f,h,4,2147483647,-2147483648),this[h]=f&255,this[h+1]=f>>>8,this[h+2]=f>>>16,this[h+3]=f>>>24,h+4},l.prototype.writeInt32BE=function(f,h,_){return f=+f,h=h>>>0,_||c(this,f,h,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[h]=f>>>24,this[h+1]=f>>>16,this[h+2]=f>>>8,this[h+3]=f&255,h+4},l.prototype.writeBigInt64LE=Nt(function(f,h=0){return u(this,f,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Nt(function(f,h=0){return w(this,f,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function A(y,f,h,_,L,D){if(h+_>y.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function P(y,f,h,_,L){return f=+f,h=h>>>0,L||A(y,f,h,4),r.write(y,f,h,_,23,4),h+4}l.prototype.writeFloatLE=function(f,h,_){return P(this,f,h,!0,_)},l.prototype.writeFloatBE=function(f,h,_){return P(this,f,h,!1,_)};function W(y,f,h,_,L){return f=+f,h=h>>>0,L||A(y,f,h,8),r.write(y,f,h,_,52,8),h+8}l.prototype.writeDoubleLE=function(f,h,_){return W(this,f,h,!0,_)},l.prototype.writeDoubleBE=function(f,h,_){return W(this,f,h,!1,_)},l.prototype.copy=function(f,h,_,L){if(!l.isBuffer(f))throw new TypeError("argument should be a Buffer");if(_||(_=0),!L&&L!==0&&(L=this.length),h>=f.length&&(h=f.length),h||(h=0),L>0&&L<_&&(L=_),L===_||f.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(_<0||_>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),f.length-h<L-_&&(L=f.length-h+_);const D=L-_;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,_,L):Uint8Array.prototype.set.call(f,this.subarray(_,L),h),D},l.prototype.fill=function(f,h,_,L){if(typeof f=="string"){if(typeof h=="string"?(L=h,h=0,_=this.length):typeof _=="string"&&(L=_,_=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!l.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(f.length===1){const K=f.charCodeAt(0);(L==="utf8"&&K<128||L==="latin1")&&(f=K)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(h<0||this.length<h||this.length<_)throw new RangeError("Out of range index");if(_<=h)return this;h=h>>>0,_=_===void 0?this.length:_>>>0,f||(f=0);let D;if(typeof f=="number")for(D=h;D<_;++D)this[D]=f;else{const K=l.isBuffer(f)?f:l.from(f,L),we=K.length;if(we===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(D=0;D<_-h;++D)this[D+h]=K[D%we]}return this};const Q={};function re(y,f,h){Q[y]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${y}]`,this.stack,delete this.name}get code(){return y}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${y}]: ${this.message}`}}}re("ERR_BUFFER_OUT_OF_BOUNDS",function(y){return y?`${y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),re("ERR_INVALID_ARG_TYPE",function(y,f){return`The "${y}" argument must be of type number. Received type ${typeof f}`},TypeError),re("ERR_OUT_OF_RANGE",function(y,f,h){let _=`The value of "${y}" is out of range.`,L=h;return Number.isInteger(h)&&Math.abs(h)>2**32?L=Se(String(h)):typeof h=="bigint"&&(L=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(L=Se(L)),L+="n"),_+=` It must be ${f}. Received ${L}`,_},RangeError);function Se(y){let f="",h=y.length;const _=y[0]==="-"?1:0;for(;h>=_+4;h-=3)f=`_${y.slice(h-3,h)}${f}`;return`${y.slice(0,h)}${f}`}function Be(y,f,h){Ut(f,"offset"),(y[f]===void 0||y[f+h]===void 0)&&Me(f,y.length-(h+1))}function ke(y,f,h,_,L,D){if(y>h||y<f){const K=typeof f=="bigint"?"n":"";let we;throw f===0||f===BigInt(0)?we=`>= 0${K} and < 2${K} ** ${(D+1)*8}${K}`:we=`>= -(2${K} ** ${(D+1)*8-1}${K}) and < 2 ** ${(D+1)*8-1}${K}`,new Q.ERR_OUT_OF_RANGE("value",we,y)}Be(_,L,D)}function Ut(y,f){if(typeof y!="number")throw new Q.ERR_INVALID_ARG_TYPE(f,"number",y)}function Me(y,f,h){throw Math.floor(y)!==y?(Ut(y,h),new Q.ERR_OUT_OF_RANGE("offset","an integer",y)):f<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,y)}const Fe=/[^+/0-9A-Za-z-_]/g;function kn(y){if(y=y.split("=")[0],y=y.trim().replace(Fe,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}function Ce(y,f){f=f||1/0;let h;const _=y.length;let L=null;const D=[];for(let K=0;K<_;++K){if(h=y.charCodeAt(K),h>55295&&h<57344){if(!L){if(h>56319){(f-=3)>-1&&D.push(239,191,189);continue}else if(K+1===_){(f-=3)>-1&&D.push(239,191,189);continue}L=h;continue}if(h<56320){(f-=3)>-1&&D.push(239,191,189),L=h;continue}h=(L-55296<<10|h-56320)+65536}else L&&(f-=3)>-1&&D.push(239,191,189);if(L=null,h<128){if((f-=1)<0)break;D.push(h)}else if(h<2048){if((f-=2)<0)break;D.push(h>>6|192,h&63|128)}else if(h<65536){if((f-=3)<0)break;D.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((f-=4)<0)break;D.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return D}function Pe(y){const f=[];for(let h=0;h<y.length;++h)f.push(y.charCodeAt(h)&255);return f}function Mn(y,f){let h,_,L;const D=[];for(let K=0;K<y.length&&!((f-=2)<0);++K)h=y.charCodeAt(K),_=h>>8,L=h%256,D.push(L),D.push(_);return D}function Le(y){return e.toByteArray(kn(y))}function Te(y,f,h,_){let L;for(L=0;L<_&&!(L+h>=f.length||L>=y.length);++L)f[L+h]=y[L];return L}function Mt(y,f){return y instanceof f||y!=null&&y.constructor!=null&&y.constructor.name!=null&&y.constructor.name===f.name}function Ue(y){return y!==y}const De=(function(){const y="0123456789abcdef",f=new Array(256);for(let h=0;h<16;++h){const _=h*16;for(let L=0;L<16;++L)f[_+L]=y[h]+y[L]}return f})();function Nt(y){return typeof BigInt>"u"?je:y}function je(){throw new Error("BigInt not supported")}})(Ji)),Ji}var xe=qs();const Rr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function xn(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Bs(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Er(t,...e){if(!xn(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Ra(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Bs(t.outputLen),Bs(t.blockLen)}function ri(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function yf(t,e){Er(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Zr(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Yi(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function jt(t,e){return t<<32-e|t>>>e}const Ta=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",wf=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function yr(t){if(Er(t),Ta)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=wf[t[r]];return e}const Vt={_0:48,_9:57,A:65,F:70,a:97,f:102};function Co(t){if(t>=Vt._0&&t<=Vt._9)return t-Vt._0;if(t>=Vt.A&&t<=Vt.F)return t-(Vt.A-10);if(t>=Vt.a&&t<=Vt.f)return t-(Vt.a-10)}function ni(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Ta)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const a=Co(t.charCodeAt(i)),l=Co(t.charCodeAt(i+1));if(a===void 0||l===void 0){const p=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+i)}n[s]=a*16+l}return n}function vf(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function $s(t){return typeof t=="string"&&(t=vf(t)),Er(t),t}function zt(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];Er(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}class Oa{}function Ca(t){const e=n=>t().update($s(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Zs(t=32){if(Rr&&typeof Rr.getRandomValues=="function")return Rr.getRandomValues(new Uint8Array(t));if(Rr&&typeof Rr.randomBytes=="function")return Uint8Array.from(Rr.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function bf(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),a=Number(r>>s&i),l=Number(r&i),p=n?4:0,x=n?0:4;t.setUint32(e+p,a,n),t.setUint32(e+x,l,n)}function xf(t,e,r){return t&e^~t&r}function _f(t,e,r){return t&e^t&r^e&r}class Ua extends Oa{constructor(e,r,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Yi(this.buffer)}update(e){ri(this),e=$s(e),Er(e);const{view:r,buffer:n,blockLen:s}=this,i=e.length;for(let a=0;a<i;){const l=Math.min(s-this.pos,i-a);if(l===s){const p=Yi(e);for(;s<=i-a;a+=s)this.process(p,a);continue}n.set(e.subarray(a,a+l),this.pos),this.pos+=l,a+=l,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ri(this),yf(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:a}=this;r[a++]=128,Zr(this.buffer.subarray(a)),this.padOffset>s-a&&(this.process(n,0),a=0);for(let T=a;T<s;T++)r[T]=0;bf(n,s-8,BigInt(this.length*8),i),this.process(n,0);const l=Yi(e),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const x=p/4,S=this.get();if(x>S.length)throw new Error("_sha2: outputLen bigger than state");for(let T=0;T<x;T++)l.setUint32(4*T,S[T],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:a,pos:l}=this;return e.destroyed=a,e.finished=i,e.length=s,e.pos=l,s%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const er=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),gt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Tn=BigInt(2**32-1),Uo=BigInt(32);function Ef(t,e=!1){return e?{h:Number(t&Tn),l:Number(t>>Uo&Tn)}:{h:Number(t>>Uo&Tn)|0,l:Number(t&Tn)|0}}function Af(t,e=!1){const r=t.length;let n=new Uint32Array(r),s=new Uint32Array(r);for(let i=0;i<r;i++){const{h:a,l}=Ef(t[i],e);[n[i],s[i]]=[a,l]}return[n,s]}const Lo=(t,e,r)=>t>>>r,No=(t,e,r)=>t<<32-r|e>>>r,Tr=(t,e,r)=>t>>>r|e<<32-r,Or=(t,e,r)=>t<<32-r|e>>>r,On=(t,e,r)=>t<<64-r|e>>>r-32,Cn=(t,e,r)=>t>>>r-32|e<<64-r;function Kt(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const Sf=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Bf=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,If=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),kf=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,Mf=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),Rf=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,Tf=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tr=new Uint32Array(64);class Of extends Ua{constructor(e=32){super(64,e,8,!1),this.A=er[0]|0,this.B=er[1]|0,this.C=er[2]|0,this.D=er[3]|0,this.E=er[4]|0,this.F=er[5]|0,this.G=er[6]|0,this.H=er[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:a,G:l,H:p}=this;return[e,r,n,s,i,a,l,p]}set(e,r,n,s,i,a,l,p){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=l|0,this.H=p|0}process(e,r){for(let T=0;T<16;T++,r+=4)tr[T]=e.getUint32(r,!1);for(let T=16;T<64;T++){const k=tr[T-15],B=tr[T-2],C=jt(k,7)^jt(k,18)^k>>>3,R=jt(B,17)^jt(B,19)^B>>>10;tr[T]=R+tr[T-7]+C+tr[T-16]|0}let{A:n,B:s,C:i,D:a,E:l,F:p,G:x,H:S}=this;for(let T=0;T<64;T++){const k=jt(l,6)^jt(l,11)^jt(l,25),B=S+k+xf(l,p,x)+Tf[T]+tr[T]|0,R=(jt(n,2)^jt(n,13)^jt(n,22))+_f(n,s,i)|0;S=x,x=p,p=l,l=a+B|0,a=i,i=s,s=n,n=B+R|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,l=l+this.E|0,p=p+this.F|0,x=x+this.G|0,S=S+this.H|0,this.set(n,s,i,a,l,p,x,S)}roundClean(){Zr(tr)}destroy(){this.set(0,0,0,0,0,0,0,0),Zr(this.buffer)}}const La=Af(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Cf=La[0],Uf=La[1],rr=new Uint32Array(80),nr=new Uint32Array(80);class Lf extends Ua{constructor(e=64){super(128,e,16,!1),this.Ah=gt[0]|0,this.Al=gt[1]|0,this.Bh=gt[2]|0,this.Bl=gt[3]|0,this.Ch=gt[4]|0,this.Cl=gt[5]|0,this.Dh=gt[6]|0,this.Dl=gt[7]|0,this.Eh=gt[8]|0,this.El=gt[9]|0,this.Fh=gt[10]|0,this.Fl=gt[11]|0,this.Gh=gt[12]|0,this.Gl=gt[13]|0,this.Hh=gt[14]|0,this.Hl=gt[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:a,Dh:l,Dl:p,Eh:x,El:S,Fh:T,Fl:k,Gh:B,Gl:C,Hh:R,Hl:N}=this;return[e,r,n,s,i,a,l,p,x,S,T,k,B,C,R,N]}set(e,r,n,s,i,a,l,p,x,S,T,k,B,C,R,N){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=l|0,this.Dl=p|0,this.Eh=x|0,this.El=S|0,this.Fh=T|0,this.Fl=k|0,this.Gh=B|0,this.Gl=C|0,this.Hh=R|0,this.Hl=N|0}process(e,r){for(let q=0;q<16;q++,r+=4)rr[q]=e.getUint32(r),nr[q]=e.getUint32(r+=4);for(let q=16;q<80;q++){const ee=rr[q-15]|0,Y=nr[q-15]|0,se=Tr(ee,Y,1)^Tr(ee,Y,8)^Lo(ee,Y,7),le=Or(ee,Y,1)^Or(ee,Y,8)^No(ee,Y,7),ce=rr[q-2]|0,U=nr[q-2]|0,F=Tr(ce,U,19)^On(ce,U,61)^Lo(ce,U,6),z=Or(ce,U,19)^Cn(ce,U,61)^No(ce,U,6),V=If(le,z,nr[q-7],nr[q-16]),g=kf(V,se,F,rr[q-7],rr[q-16]);rr[q]=g|0,nr[q]=V|0}let{Ah:n,Al:s,Bh:i,Bl:a,Ch:l,Cl:p,Dh:x,Dl:S,Eh:T,El:k,Fh:B,Fl:C,Gh:R,Gl:N,Hh:j,Hl:H}=this;for(let q=0;q<80;q++){const ee=Tr(T,k,14)^Tr(T,k,18)^On(T,k,41),Y=Or(T,k,14)^Or(T,k,18)^Cn(T,k,41),se=T&B^~T&R,le=k&C^~k&N,ce=Mf(H,Y,le,Uf[q],nr[q]),U=Rf(ce,j,ee,se,Cf[q],rr[q]),F=ce|0,z=Tr(n,s,28)^On(n,s,34)^On(n,s,39),V=Or(n,s,28)^Cn(n,s,34)^Cn(n,s,39),g=n&i^n&l^i&l,o=s&a^s&p^a&p;j=R|0,H=N|0,R=B|0,N=C|0,B=T|0,C=k|0,{h:T,l:k}=Kt(x|0,S|0,U|0,F|0),x=l|0,S=p|0,l=i|0,p=a|0,i=n|0,a=s|0;const d=Sf(F,V,o);n=Bf(d,U,z,g),s=d|0}({h:n,l:s}=Kt(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:a}=Kt(this.Bh|0,this.Bl|0,i|0,a|0),{h:l,l:p}=Kt(this.Ch|0,this.Cl|0,l|0,p|0),{h:x,l:S}=Kt(this.Dh|0,this.Dl|0,x|0,S|0),{h:T,l:k}=Kt(this.Eh|0,this.El|0,T|0,k|0),{h:B,l:C}=Kt(this.Fh|0,this.Fl|0,B|0,C|0),{h:R,l:N}=Kt(this.Gh|0,this.Gl|0,R|0,N|0),{h:j,l:H}=Kt(this.Hh|0,this.Hl|0,j|0,H|0),this.set(n,s,i,a,l,p,x,S,T,k,B,C,R,N,j,H)}roundClean(){Zr(rr,nr)}destroy(){Zr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Na=Ca(()=>new Of),Nf=Ca(()=>new Lf);const Vs=BigInt(0),Is=BigInt(1);function _r(t,e=""){if(typeof t!="boolean"){const r=e&&`"${e}"`;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function Ft(t,e,r=""){const n=xn(t),s=t?.length,i=e!==void 0;if(!n||i&&s!==e){const a=r&&`"${r}" `,l=i?` of length ${e}`:"",p=n?`length=${s}`:`type=${typeof t}`;throw new Error(a+"expected Uint8Array"+l+", got "+p)}return t}function Un(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Fa(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Vs:BigInt("0x"+t)}function xi(t){return Fa(yr(t))}function an(t){return Er(t),Fa(yr(Uint8Array.from(t).reverse()))}function Ks(t,e){return ni(t.toString(16).padStart(e*2,"0"))}function Pa(t,e){return Ks(t,e).reverse()}function qe(t,e,r){let n;if(typeof e=="string")try{n=ni(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(xn(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function Fo(t){return Uint8Array.from(t)}const Xi=t=>typeof t=="bigint"&&Vs<=t;function Ff(t,e,r){return Xi(t)&&Xi(e)&&Xi(r)&&e<=t&&t<r}function ks(t,e,r,n){if(!Ff(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function Da(t){let e;for(e=0;t>Vs;t>>=Is,e+=1);return e}const _n=t=>(Is<<BigInt(t))-Is;function Pf(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=B=>new Uint8Array(B),s=B=>Uint8Array.of(B);let i=n(t),a=n(t),l=0;const p=()=>{i.fill(1),a.fill(0),l=0},x=(...B)=>r(a,i,...B),S=(B=n(0))=>{a=x(s(0),B),i=x(),B.length!==0&&(a=x(s(1),B),i=x())},T=()=>{if(l++>=1e3)throw new Error("drbg: tried 1000 values");let B=0;const C=[];for(;B<e;){i=x();const R=i.slice();C.push(R),B+=i.length}return zt(...C)};return(B,C)=>{p(),S(B);let R;for(;!(R=C(T()));)S();return p(),R}}function En(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(s,i,a){const l=t[s];if(a&&l===void 0)return;const p=typeof l;if(p!==i||l===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${p}`)}Object.entries(e).forEach(([s,i])=>n(s,i,!1)),Object.entries(r).forEach(([s,i])=>n(s,i,!0))}function ii(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}const It=BigInt(0),pt=BigInt(1),hr=BigInt(2),ja=BigInt(3),za=BigInt(4),qa=BigInt(5),Df=BigInt(7),$a=BigInt(8),jf=BigInt(9),Za=BigInt(16);function ut(t,e){const r=t%e;return r>=It?r:e+r}function ze(t,e,r){let n=t;for(;e-- >It;)n*=n,n%=r;return n}function Po(t,e){if(t===It)throw new Error("invert: expected non-zero number");if(e<=It)throw new Error("invert: expected positive modulus, got "+e);let r=ut(t,e),n=e,s=It,i=pt;for(;r!==It;){const l=n/r,p=n%r,x=s-i*l;n=r,r=p,s=i,i=x}if(n!==pt)throw new Error("invert: does not exist");return ut(s,e)}function Ws(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function Va(t,e){const r=(t.ORDER+pt)/za,n=t.pow(e,r);return Ws(t,n,e),n}function zf(t,e){const r=(t.ORDER-qa)/$a,n=t.mul(e,hr),s=t.pow(n,r),i=t.mul(e,s),a=t.mul(t.mul(i,hr),s),l=t.mul(i,t.sub(a,t.ONE));return Ws(t,l,e),l}function qf(t){const e=Ar(t),r=Ka(t),n=r(e,e.neg(e.ONE)),s=r(e,n),i=r(e,e.neg(n)),a=(t+Df)/Za;return(l,p)=>{let x=l.pow(p,a),S=l.mul(x,n);const T=l.mul(x,s),k=l.mul(x,i),B=l.eql(l.sqr(S),p),C=l.eql(l.sqr(T),p);x=l.cmov(x,S,B),S=l.cmov(k,T,C);const R=l.eql(l.sqr(S),p),N=l.cmov(x,S,R);return Ws(l,N,p),N}}function Ka(t){if(t<ja)throw new Error("sqrt is not defined for small field");let e=t-pt,r=0;for(;e%hr===It;)e/=hr,r++;let n=hr;const s=Ar(t);for(;Do(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return Va;let i=s.pow(n,e);const a=(e+pt)/hr;return function(p,x){if(p.is0(x))return x;if(Do(p,x)!==1)throw new Error("Cannot find square root");let S=r,T=p.mul(p.ONE,i),k=p.pow(x,e),B=p.pow(x,a);for(;!p.eql(k,p.ONE);){if(p.is0(k))return p.ZERO;let C=1,R=p.sqr(k);for(;!p.eql(R,p.ONE);)if(C++,R=p.sqr(R),C===S)throw new Error("Cannot find square root");const N=pt<<BigInt(S-C-1),j=p.pow(T,N);S=C,T=p.sqr(j),k=p.mul(k,T),B=p.mul(B,j)}return B}}function $f(t){return t%za===ja?Va:t%$a===qa?zf:t%Za===jf?qf(t):Ka(t)}const Zf=(t,e)=>(ut(t,e)&pt)===pt,Vf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Kf(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=Vf.reduce((n,s)=>(n[s]="function",n),e);return En(t,r),t}function Wf(t,e,r){if(r<It)throw new Error("invalid exponent, negatives unsupported");if(r===It)return t.ONE;if(r===pt)return e;let n=t.ONE,s=e;for(;r>It;)r&pt&&(n=t.mul(n,s)),s=t.sqr(s),r>>=pt;return n}function Wa(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),s=e.reduce((a,l,p)=>t.is0(l)?a:(n[p]=a,t.mul(a,l)),t.ONE),i=t.inv(s);return e.reduceRight((a,l,p)=>t.is0(l)?a:(n[p]=t.mul(a,n[p]),t.mul(a,l)),i),n}function Do(t,e){const r=(t.ORDER-pt)/hr,n=t.pow(e,r),s=t.eql(n,t.ONE),i=t.eql(n,t.ZERO),a=t.eql(n,t.neg(t.ONE));if(!s&&!i&&!a)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Ha(t,e){e!==void 0&&Bs(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Ar(t,e,r=!1,n={}){if(t<=It)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,a=!1,l;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const k=e;k.BITS&&(s=k.BITS),k.sqrt&&(i=k.sqrt),typeof k.isLE=="boolean"&&(r=k.isLE),typeof k.modFromBytes=="boolean"&&(a=k.modFromBytes),l=k.allowedLengths}else typeof e=="number"&&(s=e),n.sqrt&&(i=n.sqrt);const{nBitLength:p,nByteLength:x}=Ha(t,s);if(x>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let S;const T=Object.freeze({ORDER:t,isLE:r,BITS:p,BYTES:x,MASK:_n(p),ZERO:It,ONE:pt,allowedLengths:l,create:k=>ut(k,t),isValid:k=>{if(typeof k!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof k);return It<=k&&k<t},is0:k=>k===It,isValidNot0:k=>!T.is0(k)&&T.isValid(k),isOdd:k=>(k&pt)===pt,neg:k=>ut(-k,t),eql:(k,B)=>k===B,sqr:k=>ut(k*k,t),add:(k,B)=>ut(k+B,t),sub:(k,B)=>ut(k-B,t),mul:(k,B)=>ut(k*B,t),pow:(k,B)=>Wf(T,k,B),div:(k,B)=>ut(k*Po(B,t),t),sqrN:k=>k*k,addN:(k,B)=>k+B,subN:(k,B)=>k-B,mulN:(k,B)=>k*B,inv:k=>Po(k,t),sqrt:i||(k=>(S||(S=$f(t)),S(T,k))),toBytes:k=>r?Pa(k,x):Ks(k,x),fromBytes:(k,B=!0)=>{if(l){if(!l.includes(k.length)||k.length>x)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+k.length);const R=new Uint8Array(x);R.set(k,r?0:R.length-k.length),k=R}if(k.length!==x)throw new Error("Field.fromBytes: expected "+x+" bytes, got "+k.length);let C=r?an(k):xi(k);if(a&&(C=ut(C,t)),!B&&!T.isValid(C))throw new Error("invalid field element: outside of range 0..ORDER");return C},invertBatch:k=>Wa(T,k),cmov:(k,B,C)=>C?B:k});return Object.freeze(T)}function Ga(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Ja(t){const e=Ga(t);return e+Math.ceil(e/2)}function Hf(t,e,r=!1){const n=t.length,s=Ga(e),i=Ja(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const a=r?an(t):xi(t),l=ut(a,e-pt)+pt;return r?Pa(l,s):Ks(l,s)}const Vr=BigInt(0),pr=BigInt(1);function si(t,e){const r=e.negate();return t?r:e}function mr(t,e){const r=Wa(t.Fp,e.map(n=>n.Z));return e.map((n,s)=>t.fromAffine(n.toAffine(r[s])))}function Ya(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Qi(t,e){Ya(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),s=2**t,i=_n(t),a=BigInt(t);return{windows:r,windowSize:n,mask:i,maxNumber:s,shiftBy:a}}function jo(t,e,r){const{windowSize:n,mask:s,maxNumber:i,shiftBy:a}=r;let l=Number(t&s),p=t>>a;l>n&&(l-=i,p+=pr);const x=e*n,S=x+Math.abs(l)-1,T=l===0,k=l<0,B=e%2!==0;return{nextN:p,offset:S,isZero:T,isNeg:k,isNegF:B,offsetF:x}}function Gf(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function Jf(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const es=new WeakMap,Xa=new WeakMap;function ts(t){return Xa.get(t)||1}function zo(t){if(t!==Vr)throw new Error("invalid wNAF")}class Qa{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let s=e;for(;r>Vr;)r&pr&&(n=n.add(s)),s=s.double(),r>>=pr;return n}precomputeWindow(e,r){const{windows:n,windowSize:s}=Qi(r,this.bits),i=[];let a=e,l=a;for(let p=0;p<n;p++){l=a,i.push(l);for(let x=1;x<s;x++)l=l.add(a),i.push(l);a=l.double()}return i}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const a=Qi(e,this.bits);for(let l=0;l<a.windows;l++){const{nextN:p,offset:x,isZero:S,isNeg:T,isNegF:k,offsetF:B}=jo(n,l,a);n=p,S?i=i.add(si(k,r[B])):s=s.add(si(T,r[x]))}return zo(n),{p:s,f:i}}wNAFUnsafe(e,r,n,s=this.ZERO){const i=Qi(e,this.bits);for(let a=0;a<i.windows&&n!==Vr;a++){const{nextN:l,offset:p,isZero:x,isNeg:S}=jo(n,a,i);if(n=l,!x){const T=r[p];s=s.add(S?T.negate():T)}}return zo(n),s}getPrecomputes(e,r,n){let s=es.get(r);return s||(s=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(s=n(s)),es.set(r,s))),s}cached(e,r,n){const s=ts(e);return this.wNAF(s,this.getPrecomputes(s,e,n),r)}unsafe(e,r,n,s){const i=ts(e);return i===1?this._unsafeLadder(e,r,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,n),r,s)}createCache(e,r){Ya(r,this.bits),Xa.set(e,r),es.delete(e)}hasCache(e){return ts(e)!==1}}function Yf(t,e,r,n){let s=e,i=t.ZERO,a=t.ZERO;for(;r>Vr||n>Vr;)r&pr&&(i=i.add(s)),n&pr&&(a=a.add(s)),s=s.double(),r>>=pr,n>>=pr;return{p1:i,p2:a}}function ec(t,e,r,n){Gf(r,t),Jf(n,e);const s=r.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const a=t.ZERO,l=Da(BigInt(s));let p=1;l>12?p=l-3:l>4?p=l-2:l>0&&(p=2);const x=_n(p),S=new Array(Number(x)+1).fill(a),T=Math.floor((e.BITS-1)/p)*p;let k=a;for(let B=T;B>=0;B-=p){S.fill(a);for(let R=0;R<i;R++){const N=n[R],j=Number(N>>BigInt(B)&x);S[j]=S[j].add(r[R])}let C=a;for(let R=S.length-1,N=a;R>0;R--)N=N.add(S[R]),C=C.add(N);if(k=k.add(C),B!==0)for(let R=0;R<p;R++)k=k.double()}return k}function qo(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Kf(e),e}else return Ar(t,{isLE:r})}function tc(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const p of["p","n","h"]){const x=e[p];if(!(typeof x=="bigint"&&x>Vr))throw new Error(`CURVE.${p} must be positive bigint`)}const s=qo(e.p,r.Fp,n),i=qo(e.n,r.Fn,n),l=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const p of l)if(!s.isValid(e[p]))throw new Error(`CURVE.${p} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}const ir=BigInt(0),dt=BigInt(1),rs=BigInt(2),Xf=BigInt(8);function Qf(t,e,r,n){const s=t.sqr(r),i=t.sqr(n),a=t.add(t.mul(e.a,s),i),l=t.add(t.ONE,t.mul(e.d,t.mul(s,i)));return t.eql(a,l)}function el(t,e={}){const r=tc("edwards",t,e,e.FpFnLE),{Fp:n,Fn:s}=r;let i=r.CURVE;const{h:a}=i;En(e,{},{uvRatio:"function"});const l=rs<<BigInt(s.BYTES*8)-dt,p=N=>n.create(N),x=e.uvRatio||((N,j)=>{try{return{isValid:!0,value:n.sqrt(n.div(N,j))}}catch{return{isValid:!1,value:ir}}});if(!Qf(n,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function S(N,j,H=!1){const q=H?dt:ir;return ks("coordinate "+N,j,q,l),j}function T(N){if(!(N instanceof C))throw new Error("ExtendedPoint expected")}const k=ii((N,j)=>{const{X:H,Y:q,Z:ee}=N,Y=N.is0();j==null&&(j=Y?Xf:n.inv(ee));const se=p(H*j),le=p(q*j),ce=n.mul(ee,j);if(Y)return{x:ir,y:dt};if(ce!==dt)throw new Error("invZ was invalid");return{x:se,y:le}}),B=ii(N=>{const{a:j,d:H}=i;if(N.is0())throw new Error("bad point: ZERO");const{X:q,Y:ee,Z:Y,T:se}=N,le=p(q*q),ce=p(ee*ee),U=p(Y*Y),F=p(U*U),z=p(le*j),V=p(U*p(z+ce)),g=p(F+p(H*p(le*ce)));if(V!==g)throw new Error("bad point: equation left != right (1)");const o=p(q*ee),d=p(Y*se);if(o!==d)throw new Error("bad point: equation left != right (2)");return!0});class C{constructor(j,H,q,ee){this.X=S("x",j),this.Y=S("y",H),this.Z=S("z",q,!0),this.T=S("t",ee),Object.freeze(this)}static CURVE(){return i}static fromAffine(j){if(j instanceof C)throw new Error("extended point not allowed");const{x:H,y:q}=j||{};return S("x",H),S("y",q),new C(H,q,dt,p(H*q))}static fromBytes(j,H=!1){const q=n.BYTES,{a:ee,d:Y}=i;j=Fo(Ft(j,q,"point")),_r(H,"zip215");const se=Fo(j),le=j[q-1];se[q-1]=le&-129;const ce=an(se),U=H?l:n.ORDER;ks("point.y",ce,ir,U);const F=p(ce*ce),z=p(F-dt),V=p(Y*F-ee);let{isValid:g,value:o}=x(z,V);if(!g)throw new Error("bad point: invalid y coordinate");const d=(o&dt)===dt,m=(le&128)!==0;if(!H&&o===ir&&m)throw new Error("bad point: x=0 and x_0=1");return m!==d&&(o=p(-o)),C.fromAffine({x:o,y:ce})}static fromHex(j,H=!1){return C.fromBytes(qe("point",j),H)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(j=8,H=!0){return R.createCache(this,j),H||this.multiply(rs),this}assertValidity(){B(this)}equals(j){T(j);const{X:H,Y:q,Z:ee}=this,{X:Y,Y:se,Z:le}=j,ce=p(H*le),U=p(Y*ee),F=p(q*le),z=p(se*ee);return ce===U&&F===z}is0(){return this.equals(C.ZERO)}negate(){return new C(p(-this.X),this.Y,this.Z,p(-this.T))}double(){const{a:j}=i,{X:H,Y:q,Z:ee}=this,Y=p(H*H),se=p(q*q),le=p(rs*p(ee*ee)),ce=p(j*Y),U=H+q,F=p(p(U*U)-Y-se),z=ce+se,V=z-le,g=ce-se,o=p(F*V),d=p(z*g),m=p(F*g),b=p(V*z);return new C(o,d,b,m)}add(j){T(j);const{a:H,d:q}=i,{X:ee,Y,Z:se,T:le}=this,{X:ce,Y:U,Z:F,T:z}=j,V=p(ee*ce),g=p(Y*U),o=p(le*q*z),d=p(se*F),m=p((ee+Y)*(ce+U)-V-g),b=d-o,E=d+o,I=p(g-H*V),O=p(m*b),v=p(E*I),c=p(m*I),u=p(b*E);return new C(O,v,u,c)}subtract(j){return this.add(j.negate())}multiply(j){if(!s.isValidNot0(j))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:H,f:q}=R.cached(this,j,ee=>mr(C,ee));return mr(C,[H,q])[0]}multiplyUnsafe(j,H=C.ZERO){if(!s.isValid(j))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return j===ir?C.ZERO:this.is0()||j===dt?this:R.unsafe(this,j,q=>mr(C,q),H)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}isTorsionFree(){return R.unsafe(this,i.n).is0()}toAffine(j){return k(this,j)}clearCofactor(){return a===dt?this:this.multiplyUnsafe(a)}toBytes(){const{x:j,y:H}=this.toAffine(),q=n.toBytes(H);return q[q.length-1]|=j&dt?128:0,q}toHex(){return yr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(j){return mr(C,j)}static msm(j,H){return ec(C,s,j,H)}_setWindowSize(j){this.precompute(j)}toRawBytes(){return this.toBytes()}}C.BASE=new C(i.Gx,i.Gy,dt,p(i.Gx*i.Gy)),C.ZERO=new C(ir,dt,dt,ir),C.Fp=n,C.Fn=s;const R=new Qa(C,s.BITS);return C.BASE.precompute(8),C}function tl(t,e,r={}){if(typeof e!="function")throw new Error('"hash" function param is required');En(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=r,{BASE:s,Fp:i,Fn:a}=t,l=r.randomBytes||Zs,p=r.adjustScalarBytes||(U=>U),x=r.domain||((U,F,z)=>{if(_r(z,"phflag"),F.length||z)throw new Error("Contexts/pre-hash are not supported");return U});function S(U){return a.create(an(U))}function T(U){const F=q.secretKey;U=qe("private key",U,F);const z=qe("hashed private key",e(U),2*F),V=p(z.slice(0,F)),g=z.slice(F,2*F),o=S(V);return{head:V,prefix:g,scalar:o}}function k(U){const{head:F,prefix:z,scalar:V}=T(U),g=s.multiply(V),o=g.toBytes();return{head:F,prefix:z,scalar:V,point:g,pointBytes:o}}function B(U){return k(U).pointBytes}function C(U=Uint8Array.of(),...F){const z=zt(...F);return S(e(x(z,qe("context",U),!!n)))}function R(U,F,z={}){U=qe("message",U),n&&(U=n(U));const{prefix:V,scalar:g,pointBytes:o}=k(F),d=C(z.context,V,U),m=s.multiply(d).toBytes(),b=C(z.context,m,o,U),E=a.create(d+b*g);if(!a.isValid(E))throw new Error("sign failed: invalid s");const I=zt(m,a.toBytes(E));return Ft(I,q.signature,"result")}const N={zip215:!0};function j(U,F,z,V=N){const{context:g,zip215:o}=V,d=q.signature;U=qe("signature",U,d),F=qe("message",F),z=qe("publicKey",z,q.publicKey),o!==void 0&&_r(o,"zip215"),n&&(F=n(F));const m=d/2,b=U.subarray(0,m),E=an(U.subarray(m,d));let I,O,v;try{I=t.fromBytes(z,o),O=t.fromBytes(b,o),v=s.multiplyUnsafe(E)}catch{return!1}if(!o&&I.isSmallOrder())return!1;const c=C(g,O.toBytes(),I.toBytes(),F);return O.add(I.multiplyUnsafe(c)).subtract(v).clearCofactor().is0()}const H=i.BYTES,q={secretKey:H,publicKey:H,signature:2*H,seed:H};function ee(U=l(q.seed)){return Ft(U,q.seed,"seed")}function Y(U){const F=ce.randomSecretKey(U);return{secretKey:F,publicKey:B(F)}}function se(U){return xn(U)&&U.length===a.BYTES}function le(U,F){try{return!!t.fromBytes(U,F)}catch{return!1}}const ce={getExtendedPublicKey:k,randomSecretKey:ee,isValidSecretKey:se,isValidPublicKey:le,toMontgomery(U){const{y:F}=t.fromBytes(U),z=q.publicKey,V=z===32;if(!V&&z!==57)throw new Error("only defined for 25519 and 448");const g=V?i.div(dt+F,dt-F):i.div(F-dt,F+dt);return i.toBytes(g)},toMontgomerySecret(U){const F=q.secretKey;Ft(U,F);const z=e(U.subarray(0,F));return p(z).subarray(0,F)},randomPrivateKey:ee,precompute(U=8,F=t.BASE){return F.precompute(U,!1)}};return Object.freeze({keygen:Y,getPublicKey:B,sign:R,verify:j,utils:ce,Point:t,lengths:q})}function rl(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=Ar(e.n,t.nBitLength,!0),s={Fp:r,Fn:n,uvRatio:t.uvRatio},i={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:s,hash:t.hash,eddsaOpts:i}}function nl(t,e){const r=e.Point;return Object.assign({},e,{ExtendedPoint:r,CURVE:t,nBitLength:r.Fn.BITS,nByteLength:r.Fn.BYTES})}function il(t){const{CURVE:e,curveOpts:r,hash:n,eddsaOpts:s}=rl(t),i=el(e,r),a=tl(i,n,s);return nl(t,a)}const sl=BigInt(1),$o=BigInt(2);BigInt(3);const ol=BigInt(5),al=BigInt(8),Hs=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),rc={p:Hs,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:al,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function cl(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=Hs,l=t*t%i*t%i,p=ze(l,$o,i)*l%i,x=ze(p,sl,i)*t%i,S=ze(x,ol,i)*x%i,T=ze(S,e,i)*S%i,k=ze(T,r,i)*T%i,B=ze(k,n,i)*k%i,C=ze(B,s,i)*B%i,R=ze(C,s,i)*B%i,N=ze(R,e,i)*S%i;return{pow_p_5_8:ze(N,$o,i)*t%i,b2:l}}function ul(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Zo=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function fl(t,e){const r=Hs,n=ut(e*e*e,r),s=ut(n*n*e,r),i=cl(t*s).pow_p_5_8;let a=ut(t*n*i,r);const l=ut(e*a*a,r),p=a,x=ut(a*Zo,r),S=l===t,T=l===ut(-t,r),k=l===ut(-t*Zo,r);return S&&(a=p),(T||k)&&(a=x),Zf(a,r)&&(a=ut(-a,r)),{isValid:S||T,value:a}}const ll=Ar(rc.p,{isLE:!0}),dl={...rc,Fp:ll,hash:Nf,adjustScalarBytes:ul,uvRatio:fl},An=il(dl);var qn={exports:{}};const hl={},pl=Object.freeze(Object.defineProperty({__proto__:null,default:hl},Symbol.toStringTag,{value:"Module"})),ml=zs(pl);var gl=qn.exports,Vo;function nc(){return Vo||(Vo=1,(function(t){(function(e,r){function n(g,o){if(!g)throw new Error(o||"Assertion failed")}function s(g,o){g.super_=o;var d=function(){};d.prototype=o.prototype,g.prototype=new d,g.prototype.constructor=g}function i(g,o,d){if(i.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,g!==null&&((o==="le"||o==="be")&&(d=o,o=10),this._init(g||0,o||10,d||"be"))}typeof e=="object"?e.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=ml.Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,d){return o.cmp(d)>0?o:d},i.min=function(o,d){return o.cmp(d)<0?o:d},i.prototype._init=function(o,d,m){if(typeof o=="number")return this._initNumber(o,d,m);if(typeof o=="object")return this._initArray(o,d,m);d==="hex"&&(d=16),n(d===(d|0)&&d>=2&&d<=36),o=o.toString().replace(/\s+/g,"");var b=0;o[0]==="-"&&(b++,this.negative=1),b<o.length&&(d===16?this._parseHex(o,b,m):(this._parseBase(o,d,b),m==="le"&&this._initArray(this.toArray(),d,m)))},i.prototype._initNumber=function(o,d,m){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(n(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),d,m)},i.prototype._initArray=function(o,d,m){if(n(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var E,I,O=0;if(m==="be")for(b=o.length-1,E=0;b>=0;b-=3)I=o[b]|o[b-1]<<8|o[b-2]<<16,this.words[E]|=I<<O&67108863,this.words[E+1]=I>>>26-O&67108863,O+=24,O>=26&&(O-=26,E++);else if(m==="le")for(b=0,E=0;b<o.length;b+=3)I=o[b]|o[b+1]<<8|o[b+2]<<16,this.words[E]|=I<<O&67108863,this.words[E+1]=I>>>26-O&67108863,O+=24,O>=26&&(O-=26,E++);return this._strip()};function l(g,o){var d=g.charCodeAt(o);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;n(!1,"Invalid character in "+g)}function p(g,o,d){var m=l(g,d);return d-1>=o&&(m|=l(g,d-1)<<4),m}i.prototype._parseHex=function(o,d,m){this.length=Math.ceil((o.length-d)/6),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var E=0,I=0,O;if(m==="be")for(b=o.length-1;b>=d;b-=2)O=p(o,d,b)<<E,this.words[I]|=O&67108863,E>=18?(E-=18,I+=1,this.words[I]|=O>>>26):E+=8;else{var v=o.length-d;for(b=v%2===0?d+1:d;b<o.length;b+=2)O=p(o,d,b)<<E,this.words[I]|=O&67108863,E>=18?(E-=18,I+=1,this.words[I]|=O>>>26):E+=8}this._strip()};function x(g,o,d,m){for(var b=0,E=0,I=Math.min(g.length,d),O=o;O<I;O++){var v=g.charCodeAt(O)-48;b*=m,v>=49?E=v-49+10:v>=17?E=v-17+10:E=v,n(v>=0&&E<m,"Invalid character"),b+=E}return b}i.prototype._parseBase=function(o,d,m){this.words=[0],this.length=1;for(var b=0,E=1;E<=67108863;E*=d)b++;b--,E=E/d|0;for(var I=o.length-m,O=I%b,v=Math.min(I,I-O)+m,c=0,u=m;u<v;u+=b)c=x(o,u,u+b,d),this.imuln(E),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(O!==0){var w=1;for(c=x(o,u,o.length,d),u=0;u<O;u++)w*=d;this.imuln(w),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var d=0;d<this.length;d++)o.words[d]=this.words[d];o.length=this.length,o.negative=this.negative,o.red=this.red};function S(g,o){g.words=o.words,g.length=o.length,g.negative=o.negative,g.red=o.red}if(i.prototype._move=function(o){S(o,this)},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=T}catch{i.prototype.inspect=T}else i.prototype.inspect=T;function T(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var k=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],B=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,d){o=o||10,d=d|0||1;var m;if(o===16||o==="hex"){m="";for(var b=0,E=0,I=0;I<this.length;I++){var O=this.words[I],v=((O<<b|E)&16777215).toString(16);E=O>>>24-b&16777215,b+=2,b>=26&&(b-=26,I--),E!==0||I!==this.length-1?m=k[6-v.length]+v+m:m=v+m}for(E!==0&&(m=E.toString(16)+m);m.length%d!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(o===(o|0)&&o>=2&&o<=36){var c=B[o],u=C[o];m="";var w=this.clone();for(w.negative=0;!w.isZero();){var A=w.modrn(u).toString(o);w=w.idivn(u),w.isZero()?m=A+m:m=k[c-A.length]+A+m}for(this.isZero()&&(m="0"+m);m.length%d!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16,2)},a&&(i.prototype.toBuffer=function(o,d){return this.toArrayLike(a,o,d)}),i.prototype.toArray=function(o,d){return this.toArrayLike(Array,o,d)};var R=function(o,d){return o.allocUnsafe?o.allocUnsafe(d):new o(d)};i.prototype.toArrayLike=function(o,d,m){this._strip();var b=this.byteLength(),E=m||Math.max(1,b);n(b<=E,"byte array longer than desired length"),n(E>0,"Requested array length <= 0");var I=R(o,E),O=d==="le"?"LE":"BE";return this["_toArrayLike"+O](I,b),I},i.prototype._toArrayLikeLE=function(o,d){for(var m=0,b=0,E=0,I=0;E<this.length;E++){var O=this.words[E]<<I|b;o[m++]=O&255,m<o.length&&(o[m++]=O>>8&255),m<o.length&&(o[m++]=O>>16&255),I===6?(m<o.length&&(o[m++]=O>>24&255),b=0,I=0):(b=O>>>24,I+=2)}if(m<o.length)for(o[m++]=b;m<o.length;)o[m++]=0},i.prototype._toArrayLikeBE=function(o,d){for(var m=o.length-1,b=0,E=0,I=0;E<this.length;E++){var O=this.words[E]<<I|b;o[m--]=O&255,m>=0&&(o[m--]=O>>8&255),m>=0&&(o[m--]=O>>16&255),I===6?(m>=0&&(o[m--]=O>>24&255),b=0,I=0):(b=O>>>24,I+=2)}if(m>=0)for(o[m--]=b;m>=0;)o[m--]=0},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var d=o,m=0;return d>=4096&&(m+=13,d>>>=13),d>=64&&(m+=7,d>>>=7),d>=8&&(m+=4,d>>>=4),d>=2&&(m+=2,d>>>=2),m+d},i.prototype._zeroBits=function(o){if(o===0)return 26;var d=o,m=0;return(d&8191)===0&&(m+=13,d>>>=13),(d&127)===0&&(m+=7,d>>>=7),(d&15)===0&&(m+=4,d>>>=4),(d&3)===0&&(m+=2,d>>>=2),(d&1)===0&&m++,m},i.prototype.bitLength=function(){var o=this.words[this.length-1],d=this._countBits(o);return(this.length-1)*26+d};function N(g){for(var o=new Array(g.bitLength()),d=0;d<o.length;d++){var m=d/26|0,b=d%26;o[d]=g.words[m]>>>b&1}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,d=0;d<this.length;d++){var m=this._zeroBits(this.words[d]);if(o+=m,m!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var d=0;d<o.length;d++)this.words[d]=this.words[d]|o.words[d];return this._strip()},i.prototype.ior=function(o){return n((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var d;this.length>o.length?d=o:d=this;for(var m=0;m<d.length;m++)this.words[m]=this.words[m]&o.words[m];return this.length=d.length,this._strip()},i.prototype.iand=function(o){return n((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var d,m;this.length>o.length?(d=this,m=o):(d=o,m=this);for(var b=0;b<m.length;b++)this.words[b]=d.words[b]^m.words[b];if(this!==d)for(;b<d.length;b++)this.words[b]=d.words[b];return this.length=d.length,this._strip()},i.prototype.ixor=function(o){return n((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){n(typeof o=="number"&&o>=0);var d=Math.ceil(o/26)|0,m=o%26;this._expand(d),m>0&&d--;for(var b=0;b<d;b++)this.words[b]=~this.words[b]&67108863;return m>0&&(this.words[b]=~this.words[b]&67108863>>26-m),this._strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,d){n(typeof o=="number"&&o>=0);var m=o/26|0,b=o%26;return this._expand(m+1),d?this.words[m]=this.words[m]|1<<b:this.words[m]=this.words[m]&~(1<<b),this._strip()},i.prototype.iadd=function(o){var d;if(this.negative!==0&&o.negative===0)return this.negative=0,d=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,d=this.isub(o),o.negative=1,d._normSign();var m,b;this.length>o.length?(m=this,b=o):(m=o,b=this);for(var E=0,I=0;I<b.length;I++)d=(m.words[I]|0)+(b.words[I]|0)+E,this.words[I]=d&67108863,E=d>>>26;for(;E!==0&&I<m.length;I++)d=(m.words[I]|0)+E,this.words[I]=d&67108863,E=d>>>26;if(this.length=m.length,E!==0)this.words[this.length]=E,this.length++;else if(m!==this)for(;I<m.length;I++)this.words[I]=m.words[I];return this},i.prototype.add=function(o){var d;return o.negative!==0&&this.negative===0?(o.negative=0,d=this.sub(o),o.negative^=1,d):o.negative===0&&this.negative!==0?(this.negative=0,d=o.sub(this),this.negative=1,d):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var d=this.iadd(o);return o.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var m=this.cmp(o);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var b,E;m>0?(b=this,E=o):(b=o,E=this);for(var I=0,O=0;O<E.length;O++)d=(b.words[O]|0)-(E.words[O]|0)+I,I=d>>26,this.words[O]=d&67108863;for(;I!==0&&O<b.length;O++)d=(b.words[O]|0)+I,I=d>>26,this.words[O]=d&67108863;if(I===0&&O<b.length&&b!==this)for(;O<b.length;O++)this.words[O]=b.words[O];return this.length=Math.max(this.length,O),b!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function j(g,o,d){d.negative=o.negative^g.negative;var m=g.length+o.length|0;d.length=m,m=m-1|0;var b=g.words[0]|0,E=o.words[0]|0,I=b*E,O=I&67108863,v=I/67108864|0;d.words[0]=O;for(var c=1;c<m;c++){for(var u=v>>>26,w=v&67108863,A=Math.min(c,o.length-1),P=Math.max(0,c-g.length+1);P<=A;P++){var W=c-P|0;b=g.words[W]|0,E=o.words[P]|0,I=b*E+w,u+=I/67108864|0,w=I&67108863}d.words[c]=w|0,v=u|0}return v!==0?d.words[c]=v|0:d.length--,d._strip()}var H=function(o,d,m){var b=o.words,E=d.words,I=m.words,O=0,v,c,u,w=b[0]|0,A=w&8191,P=w>>>13,W=b[1]|0,Q=W&8191,re=W>>>13,Se=b[2]|0,Be=Se&8191,ke=Se>>>13,Ut=b[3]|0,Me=Ut&8191,Fe=Ut>>>13,kn=b[4]|0,Ce=kn&8191,Pe=kn>>>13,Mn=b[5]|0,Le=Mn&8191,Te=Mn>>>13,Mt=b[6]|0,Ue=Mt&8191,De=Mt>>>13,Nt=b[7]|0,je=Nt&8191,y=Nt>>>13,f=b[8]|0,h=f&8191,_=f>>>13,L=b[9]|0,D=L&8191,K=L>>>13,we=E[0]|0,me=we&8191,he=we>>>13,Oe=E[1]|0,fe=Oe&8191,Ve=Oe>>>13,fo=E[2]|0,Ke=fo&8191,We=fo>>>13,lo=E[3]|0,He=lo&8191,Ge=lo>>>13,ho=E[4]|0,Je=ho&8191,Ye=ho>>>13,po=E[5]|0,Xe=po&8191,Qe=po>>>13,mo=E[6]|0,et=mo&8191,tt=mo>>>13,go=E[7]|0,rt=go&8191,nt=go>>>13,yo=E[8]|0,it=yo&8191,st=yo>>>13,wo=E[9]|0,ot=wo&8191,at=wo>>>13;m.negative=o.negative^d.negative,m.length=19,v=Math.imul(A,me),c=Math.imul(A,he),c=c+Math.imul(P,me)|0,u=Math.imul(P,he);var Ri=(O+v|0)+((c&8191)<<13)|0;O=(u+(c>>>13)|0)+(Ri>>>26)|0,Ri&=67108863,v=Math.imul(Q,me),c=Math.imul(Q,he),c=c+Math.imul(re,me)|0,u=Math.imul(re,he),v=v+Math.imul(A,fe)|0,c=c+Math.imul(A,Ve)|0,c=c+Math.imul(P,fe)|0,u=u+Math.imul(P,Ve)|0;var Ti=(O+v|0)+((c&8191)<<13)|0;O=(u+(c>>>13)|0)+(Ti>>>26)|0,Ti&=67108863,v=Math.imul(Be,me),c=Math.imul(Be,he),c=c+Math.imul(ke,me)|0,u=Math.imul(ke,he),v=v+Math.imul(Q,fe)|0,c=c+Math.imul(Q,Ve)|0,c=c+Math.imul(re,fe)|0,u=u+Math.imul(re,Ve)|0,v=v+Math.imul(A,Ke)|0,c=c+Math.imul(A,We)|0,c=c+Math.imul(P,Ke)|0,u=u+Math.imul(P,We)|0;var Oi=(O+v|0)+((c&8191)<<13)|0;O=(u+(c>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,v=Math.imul(Me,me),c=Math.imul(Me,he),c=c+Math.imul(Fe,me)|0,u=Math.imul(Fe,he),v=v+Math.imul(Be,fe)|0,c=c+Math.imul(Be,Ve)|0,c=c+Math.imul(ke,fe)|0,u=u+Math.imul(ke,Ve)|0,v=v+Math.imul(Q,Ke)|0,c=c+Math.imul(Q,We)|0,c=c+Math.imul(re,Ke)|0,u=u+Math.imul(re,We)|0,v=v+Math.imul(A,He)|0,c=c+Math.imul(A,Ge)|0,c=c+Math.imul(P,He)|0,u=u+Math.imul(P,Ge)|0;var Ci=(O+v|0)+((c&8191)<<13)|0;O=(u+(c>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,v=Math.imul(Ce,me),c=Math.imul(Ce,he),c=c+Math.imul(Pe,me)|0,u=Math.imul(Pe,he),v=v+Math.imul(Me,fe)|0,c=c+Math.imul(Me,Ve)|0,c=c+Math.imul(Fe,fe)|0,u=u+Math.imul(Fe,Ve)|0,v=v+Math.imul(Be,Ke)|0,c=c+Math.imul(Be,We)|0,c=c+Math.imul(ke,Ke)|0,u=u+Math.imul(ke,We)|0,v=v+Math.imul(Q,He)|0,c=c+Math.imul(Q,Ge)|0,c=c+Math.imul(re,He)|0,u=u+Math.imul(re,Ge)|0,v=v+Math.imul(A,Je)|0,c=c+Math.imul(A,Ye)|0,c=c+Math.imul(P,Je)|0,u=u+Math.imul(P,Ye)|0;var Ui=(O+v|0)+((c&8191)<<13)|0;O=(u+(c>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,v=Math.imul(Le,me),c=Math.imul(Le,he),c=c+Math.imul(Te,me)|0,u=Math.imul(Te,he),v=v+Math.imul(Ce,fe)|0,c=c+Math.imul(Ce,Ve)|0,c=c+Math.imul(Pe,fe)|0,u=u+Math.imul(Pe,Ve)|0,v=v+Math.imul(Me,Ke)|0,c=c+Math.imul(Me,We)|0,c=c+Math.imul(Fe,Ke)|0,u=u+Math.imul(Fe,We)|0,v=v+Math.imul(Be,He)|0,c=c+Math.imul(Be,Ge)|0,c=c+Math.imul(ke,He)|0,u=u+Math.imul(ke,Ge)|0,v=v+Math.imul(Q,Je)|0,c=c+Math.imul(Q,Ye)|0,c=c+Math.imul(re,Je)|0,u=u+Math.imul(re,Ye)|0,v=v+Math.imul(A,Xe)|0,c=c+Math.imul(A,Qe)|0,c=c+Math.imul(P,Xe)|0,u=u+Math.imul(P,Qe)|0;var Li=(O+v|0)+((c&8191)<<13)|0;O=(u+(c>>>13)|0)+(Li>>>26)|0,Li&=67108863,v=Math.imul(Ue,me),c=Math.imul(Ue,he),c=c+Math.imul(De,me)|0,u=Math.imul(De,he),v=v+Math.imul(Le,fe)|0,c=c+Math.imul(Le,Ve)|0,c=c+Math.imul(Te,fe)|0,u=u+Math.imul(Te,Ve)|0,v=v+Math.imul(Ce,Ke)|0,c=c+Math.imul(Ce,We)|0,c=c+Math.imul(Pe,Ke)|0,u=u+Math.imul(Pe,We)|0,v=v+Math.imul(Me,He)|0,c=c+Math.imul(Me,Ge)|0,c=c+Math.imul(Fe,He)|0,u=u+Math.imul(Fe,Ge)|0,v=v+Math.imul(Be,Je)|0,c=c+Math.imul(Be,Ye)|0,c=c+Math.imul(ke,Je)|0,u=u+Math.imul(ke,Ye)|0,v=v+Math.imul(Q,Xe)|0,c=c+Math.imul(Q,Qe)|0,c=c+Math.imul(re,Xe)|0,u=u+Math.imul(re,Qe)|0,v=v+Math.imul(A,et)|0,c=c+Math.imul(A,tt)|0,c=c+Math.imul(P,et)|0,u=u+Math.imul(P,tt)|0;var Ni=(O+v|0)+((c&8191)<<13)|0;O=(u+(c>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,v=Math.imul(je,me),c=Math.imul(je,he),c=c+Math.imul(y,me)|0,u=Math.imul(y,he),v=v+Math.imul(Ue,fe)|0,c=c+Math.imul(Ue,Ve)|0,c=c+Math.imul(De,fe)|0,u=u+Math.imul(De,Ve)|0,v=v+Math.imul(Le,Ke)|0,c=c+Math.imul(Le,We)|0,c=c+Math.imul(Te,Ke)|0,u=u+Math.imul(Te,We)|0,v=v+Math.imul(Ce,He)|0,c=c+Math.imul(Ce,Ge)|0,c=c+Math.imul(Pe,He)|0,u=u+Math.imul(Pe,Ge)|0,v=v+Math.imul(Me,Je)|0,c=c+Math.imul(Me,Ye)|0,c=c+Math.imul(Fe,Je)|0,u=u+Math.imul(Fe,Ye)|0,v=v+Math.imul(Be,Xe)|0,c=c+Math.imul(Be,Qe)|0,c=c+Math.imul(ke,Xe)|0,u=u+Math.imul(ke,Qe)|0,v=v+Math.imul(Q,et)|0,c=c+Math.imul(Q,tt)|0,c=c+Math.imul(re,et)|0,u=u+Math.imul(re,tt)|0,v=v+Math.imul(A,rt)|0,c=c+Math.imul(A,nt)|0,c=c+Math.imul(P,rt)|0,u=u+Math.imul(P,nt)|0;var Fi=(O+v|0)+((c&8191)<<13)|0;O=(u+(c>>>13)|0)+(Fi>>>26)|0,Fi&=67108863,v=Math.imul(h,me),c=Math.imul(h,he),c=c+Math.imul(_,me)|0,u=Math.imul(_,he),v=v+Math.imul(je,fe)|0,c=c+Math.imul(je,Ve)|0,c=c+Math.imul(y,fe)|0,u=u+Math.imul(y,Ve)|0,v=v+Math.imul(Ue,Ke)|0,c=c+Math.imul(Ue,We)|0,c=c+Math.imul(De,Ke)|0,u=u+Math.imul(De,We)|0,v=v+Math.imul(Le,He)|0,c=c+Math.imul(Le,Ge)|0,c=c+Math.imul(Te,He)|0,u=u+Math.imul(Te,Ge)|0,v=v+Math.imul(Ce,Je)|0,c=c+Math.imul(Ce,Ye)|0,c=c+Math.imul(Pe,Je)|0,u=u+Math.imul(Pe,Ye)|0,v=v+Math.imul(Me,Xe)|0,c=c+Math.imul(Me,Qe)|0,c=c+Math.imul(Fe,Xe)|0,u=u+Math.imul(Fe,Qe)|0,v=v+Math.imul(Be,et)|0,c=c+Math.imul(Be,tt)|0,c=c+Math.imul(ke,et)|0,u=u+Math.imul(ke,tt)|0,v=v+Math.imul(Q,rt)|0,c=c+Math.imul(Q,nt)|0,c=c+Math.imul(re,rt)|0,u=u+Math.imul(re,nt)|0,v=v+Math.imul(A,it)|0,c=c+Math.imul(A,st)|0,c=c+Math.imul(P,it)|0,u=u+Math.imul(P,st)|0;var Pi=(O+v|0)+((c&8191)<<13)|0;O=(u+(c>>>13)|0)+(Pi>>>26)|0,Pi&=67108863,v=Math.imul(D,me),c=Math.imul(D,he),c=c+Math.imul(K,me)|0,u=Math.imul(K,he),v=v+Math.imul(h,fe)|0,c=c+Math.imul(h,Ve)|0,c=c+Math.imul(_,fe)|0,u=u+Math.imul(_,Ve)|0,v=v+Math.imul(je,Ke)|0,c=c+Math.imul(je,We)|0,c=c+Math.imul(y,Ke)|0,u=u+Math.imul(y,We)|0,v=v+Math.imul(Ue,He)|0,c=c+Math.imul(Ue,Ge)|0,c=c+Math.imul(De,He)|0,u=u+Math.imul(De,Ge)|0,v=v+Math.imul(Le,Je)|0,c=c+Math.imul(Le,Ye)|0,c=c+Math.imul(Te,Je)|0,u=u+Math.imul(Te,Ye)|0,v=v+Math.imul(Ce,Xe)|0,c=c+Math.imul(Ce,Qe)|0,c=c+Math.imul(Pe,Xe)|0,u=u+Math.imul(Pe,Qe)|0,v=v+Math.imul(Me,et)|0,c=c+Math.imul(Me,tt)|0,c=c+Math.imul(Fe,et)|0,u=u+Math.imul(Fe,tt)|0,v=v+Math.imul(Be,rt)|0,c=c+Math.imul(Be,nt)|0,c=c+Math.imul(ke,rt)|0,u=u+Math.imul(ke,nt)|0,v=v+Math.imul(Q,it)|0,c=c+Math.imul(Q,st)|0,c=c+Math.imul(re,it)|0,u=u+Math.imul(re,st)|0,v=v+Math.imul(A,ot)|0,c=c+Math.imul(A,at)|0,c=c+Math.imul(P,ot)|0,u=u+Math.imul(P,at)|0;var Di=(O+v|0)+((c&8191)<<13)|0;O=(u+(c>>>13)|0)+(Di>>>26)|0,Di&=67108863,v=Math.imul(D,fe),c=Math.imul(D,Ve),c=c+Math.imul(K,fe)|0,u=Math.imul(K,Ve),v=v+Math.imul(h,Ke)|0,c=c+Math.imul(h,We)|0,c=c+Math.imul(_,Ke)|0,u=u+Math.imul(_,We)|0,v=v+Math.imul(je,He)|0,c=c+Math.imul(je,Ge)|0,c=c+Math.imul(y,He)|0,u=u+Math.imul(y,Ge)|0,v=v+Math.imul(Ue,Je)|0,c=c+Math.imul(Ue,Ye)|0,c=c+Math.imul(De,Je)|0,u=u+Math.imul(De,Ye)|0,v=v+Math.imul(Le,Xe)|0,c=c+Math.imul(Le,Qe)|0,c=c+Math.imul(Te,Xe)|0,u=u+Math.imul(Te,Qe)|0,v=v+Math.imul(Ce,et)|0,c=c+Math.imul(Ce,tt)|0,c=c+Math.imul(Pe,et)|0,u=u+Math.imul(Pe,tt)|0,v=v+Math.imul(Me,rt)|0,c=c+Math.imul(Me,nt)|0,c=c+Math.imul(Fe,rt)|0,u=u+Math.imul(Fe,nt)|0,v=v+Math.imul(Be,it)|0,c=c+Math.imul(Be,st)|0,c=c+Math.imul(ke,it)|0,u=u+Math.imul(ke,st)|0,v=v+Math.imul(Q,ot)|0,c=c+Math.imul(Q,at)|0,c=c+Math.imul(re,ot)|0,u=u+Math.imul(re,at)|0;var ji=(O+v|0)+((c&8191)<<13)|0;O=(u+(c>>>13)|0)+(ji>>>26)|0,ji&=67108863,v=Math.imul(D,Ke),c=Math.imul(D,We),c=c+Math.imul(K,Ke)|0,u=Math.imul(K,We),v=v+Math.imul(h,He)|0,c=c+Math.imul(h,Ge)|0,c=c+Math.imul(_,He)|0,u=u+Math.imul(_,Ge)|0,v=v+Math.imul(je,Je)|0,c=c+Math.imul(je,Ye)|0,c=c+Math.imul(y,Je)|0,u=u+Math.imul(y,Ye)|0,v=v+Math.imul(Ue,Xe)|0,c=c+Math.imul(Ue,Qe)|0,c=c+Math.imul(De,Xe)|0,u=u+Math.imul(De,Qe)|0,v=v+Math.imul(Le,et)|0,c=c+Math.imul(Le,tt)|0,c=c+Math.imul(Te,et)|0,u=u+Math.imul(Te,tt)|0,v=v+Math.imul(Ce,rt)|0,c=c+Math.imul(Ce,nt)|0,c=c+Math.imul(Pe,rt)|0,u=u+Math.imul(Pe,nt)|0,v=v+Math.imul(Me,it)|0,c=c+Math.imul(Me,st)|0,c=c+Math.imul(Fe,it)|0,u=u+Math.imul(Fe,st)|0,v=v+Math.imul(Be,ot)|0,c=c+Math.imul(Be,at)|0,c=c+Math.imul(ke,ot)|0,u=u+Math.imul(ke,at)|0;var zi=(O+v|0)+((c&8191)<<13)|0;O=(u+(c>>>13)|0)+(zi>>>26)|0,zi&=67108863,v=Math.imul(D,He),c=Math.imul(D,Ge),c=c+Math.imul(K,He)|0,u=Math.imul(K,Ge),v=v+Math.imul(h,Je)|0,c=c+Math.imul(h,Ye)|0,c=c+Math.imul(_,Je)|0,u=u+Math.imul(_,Ye)|0,v=v+Math.imul(je,Xe)|0,c=c+Math.imul(je,Qe)|0,c=c+Math.imul(y,Xe)|0,u=u+Math.imul(y,Qe)|0,v=v+Math.imul(Ue,et)|0,c=c+Math.imul(Ue,tt)|0,c=c+Math.imul(De,et)|0,u=u+Math.imul(De,tt)|0,v=v+Math.imul(Le,rt)|0,c=c+Math.imul(Le,nt)|0,c=c+Math.imul(Te,rt)|0,u=u+Math.imul(Te,nt)|0,v=v+Math.imul(Ce,it)|0,c=c+Math.imul(Ce,st)|0,c=c+Math.imul(Pe,it)|0,u=u+Math.imul(Pe,st)|0,v=v+Math.imul(Me,ot)|0,c=c+Math.imul(Me,at)|0,c=c+Math.imul(Fe,ot)|0,u=u+Math.imul(Fe,at)|0;var qi=(O+v|0)+((c&8191)<<13)|0;O=(u+(c>>>13)|0)+(qi>>>26)|0,qi&=67108863,v=Math.imul(D,Je),c=Math.imul(D,Ye),c=c+Math.imul(K,Je)|0,u=Math.imul(K,Ye),v=v+Math.imul(h,Xe)|0,c=c+Math.imul(h,Qe)|0,c=c+Math.imul(_,Xe)|0,u=u+Math.imul(_,Qe)|0,v=v+Math.imul(je,et)|0,c=c+Math.imul(je,tt)|0,c=c+Math.imul(y,et)|0,u=u+Math.imul(y,tt)|0,v=v+Math.imul(Ue,rt)|0,c=c+Math.imul(Ue,nt)|0,c=c+Math.imul(De,rt)|0,u=u+Math.imul(De,nt)|0,v=v+Math.imul(Le,it)|0,c=c+Math.imul(Le,st)|0,c=c+Math.imul(Te,it)|0,u=u+Math.imul(Te,st)|0,v=v+Math.imul(Ce,ot)|0,c=c+Math.imul(Ce,at)|0,c=c+Math.imul(Pe,ot)|0,u=u+Math.imul(Pe,at)|0;var $i=(O+v|0)+((c&8191)<<13)|0;O=(u+(c>>>13)|0)+($i>>>26)|0,$i&=67108863,v=Math.imul(D,Xe),c=Math.imul(D,Qe),c=c+Math.imul(K,Xe)|0,u=Math.imul(K,Qe),v=v+Math.imul(h,et)|0,c=c+Math.imul(h,tt)|0,c=c+Math.imul(_,et)|0,u=u+Math.imul(_,tt)|0,v=v+Math.imul(je,rt)|0,c=c+Math.imul(je,nt)|0,c=c+Math.imul(y,rt)|0,u=u+Math.imul(y,nt)|0,v=v+Math.imul(Ue,it)|0,c=c+Math.imul(Ue,st)|0,c=c+Math.imul(De,it)|0,u=u+Math.imul(De,st)|0,v=v+Math.imul(Le,ot)|0,c=c+Math.imul(Le,at)|0,c=c+Math.imul(Te,ot)|0,u=u+Math.imul(Te,at)|0;var Zi=(O+v|0)+((c&8191)<<13)|0;O=(u+(c>>>13)|0)+(Zi>>>26)|0,Zi&=67108863,v=Math.imul(D,et),c=Math.imul(D,tt),c=c+Math.imul(K,et)|0,u=Math.imul(K,tt),v=v+Math.imul(h,rt)|0,c=c+Math.imul(h,nt)|0,c=c+Math.imul(_,rt)|0,u=u+Math.imul(_,nt)|0,v=v+Math.imul(je,it)|0,c=c+Math.imul(je,st)|0,c=c+Math.imul(y,it)|0,u=u+Math.imul(y,st)|0,v=v+Math.imul(Ue,ot)|0,c=c+Math.imul(Ue,at)|0,c=c+Math.imul(De,ot)|0,u=u+Math.imul(De,at)|0;var Vi=(O+v|0)+((c&8191)<<13)|0;O=(u+(c>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,v=Math.imul(D,rt),c=Math.imul(D,nt),c=c+Math.imul(K,rt)|0,u=Math.imul(K,nt),v=v+Math.imul(h,it)|0,c=c+Math.imul(h,st)|0,c=c+Math.imul(_,it)|0,u=u+Math.imul(_,st)|0,v=v+Math.imul(je,ot)|0,c=c+Math.imul(je,at)|0,c=c+Math.imul(y,ot)|0,u=u+Math.imul(y,at)|0;var Ki=(O+v|0)+((c&8191)<<13)|0;O=(u+(c>>>13)|0)+(Ki>>>26)|0,Ki&=67108863,v=Math.imul(D,it),c=Math.imul(D,st),c=c+Math.imul(K,it)|0,u=Math.imul(K,st),v=v+Math.imul(h,ot)|0,c=c+Math.imul(h,at)|0,c=c+Math.imul(_,ot)|0,u=u+Math.imul(_,at)|0;var Wi=(O+v|0)+((c&8191)<<13)|0;O=(u+(c>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,v=Math.imul(D,ot),c=Math.imul(D,at),c=c+Math.imul(K,ot)|0,u=Math.imul(K,at);var Hi=(O+v|0)+((c&8191)<<13)|0;return O=(u+(c>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,I[0]=Ri,I[1]=Ti,I[2]=Oi,I[3]=Ci,I[4]=Ui,I[5]=Li,I[6]=Ni,I[7]=Fi,I[8]=Pi,I[9]=Di,I[10]=ji,I[11]=zi,I[12]=qi,I[13]=$i,I[14]=Zi,I[15]=Vi,I[16]=Ki,I[17]=Wi,I[18]=Hi,O!==0&&(I[19]=O,m.length++),m};Math.imul||(H=j);function q(g,o,d){d.negative=o.negative^g.negative,d.length=g.length+o.length;for(var m=0,b=0,E=0;E<d.length-1;E++){var I=b;b=0;for(var O=m&67108863,v=Math.min(E,o.length-1),c=Math.max(0,E-g.length+1);c<=v;c++){var u=E-c,w=g.words[u]|0,A=o.words[c]|0,P=w*A,W=P&67108863;I=I+(P/67108864|0)|0,W=W+O|0,O=W&67108863,I=I+(W>>>26)|0,b+=I>>>26,I&=67108863}d.words[E]=O,m=I,I=b}return m!==0?d.words[E]=m:d.length--,d._strip()}function ee(g,o,d){return q(g,o,d)}i.prototype.mulTo=function(o,d){var m,b=this.length+o.length;return this.length===10&&o.length===10?m=H(this,o,d):b<63?m=j(this,o,d):b<1024?m=q(this,o,d):m=ee(this,o,d),m},i.prototype.mul=function(o){var d=new i(null);return d.words=new Array(this.length+o.length),this.mulTo(o,d)},i.prototype.mulf=function(o){var d=new i(null);return d.words=new Array(this.length+o.length),ee(this,o,d)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){var d=o<0;d&&(o=-o),n(typeof o=="number"),n(o<67108864);for(var m=0,b=0;b<this.length;b++){var E=(this.words[b]|0)*o,I=(E&67108863)+(m&67108863);m>>=26,m+=E/67108864|0,m+=I>>>26,this.words[b]=I&67108863}return m!==0&&(this.words[b]=m,this.length++),this.length=o===0?1:this.length,d?this.ineg():this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var d=N(o);if(d.length===0)return new i(1);for(var m=this,b=0;b<d.length&&d[b]===0;b++,m=m.sqr());if(++b<d.length)for(var E=m.sqr();b<d.length;b++,E=E.sqr())d[b]!==0&&(m=m.mul(E));return m},i.prototype.iushln=function(o){n(typeof o=="number"&&o>=0);var d=o%26,m=(o-d)/26,b=67108863>>>26-d<<26-d,E;if(d!==0){var I=0;for(E=0;E<this.length;E++){var O=this.words[E]&b,v=(this.words[E]|0)-O<<d;this.words[E]=v|I,I=O>>>26-d}I&&(this.words[E]=I,this.length++)}if(m!==0){for(E=this.length-1;E>=0;E--)this.words[E+m]=this.words[E];for(E=0;E<m;E++)this.words[E]=0;this.length+=m}return this._strip()},i.prototype.ishln=function(o){return n(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,d,m){n(typeof o=="number"&&o>=0);var b;d?b=(d-d%26)/26:b=0;var E=o%26,I=Math.min((o-E)/26,this.length),O=67108863^67108863>>>E<<E,v=m;if(b-=I,b=Math.max(0,b),v){for(var c=0;c<I;c++)v.words[c]=this.words[c];v.length=I}if(I!==0)if(this.length>I)for(this.length-=I,c=0;c<this.length;c++)this.words[c]=this.words[c+I];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(u!==0||c>=b);c--){var w=this.words[c]|0;this.words[c]=u<<26-E|w>>>E,u=w&O}return v&&u!==0&&(v.words[v.length++]=u),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(o,d,m){return n(this.negative===0),this.iushrn(o,d,m)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){n(typeof o=="number"&&o>=0);var d=o%26,m=(o-d)/26,b=1<<d;if(this.length<=m)return!1;var E=this.words[m];return!!(E&b)},i.prototype.imaskn=function(o){n(typeof o=="number"&&o>=0);var d=o%26,m=(o-d)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(d!==0&&m++,this.length=Math.min(m,this.length),d!==0){var b=67108863^67108863>>>d<<d;this.words[this.length-1]&=b}return this._strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return n(typeof o=="number"),n(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<=o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},i.prototype.isubn=function(o){if(n(typeof o=="number"),n(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,d,m){var b=o.length+m,E;this._expand(b);var I,O=0;for(E=0;E<o.length;E++){I=(this.words[E+m]|0)+O;var v=(o.words[E]|0)*d;I-=v&67108863,O=(I>>26)-(v/67108864|0),this.words[E+m]=I&67108863}for(;E<this.length-m;E++)I=(this.words[E+m]|0)+O,O=I>>26,this.words[E+m]=I&67108863;if(O===0)return this._strip();for(n(O===-1),O=0,E=0;E<this.length;E++)I=-(this.words[E]|0)+O,O=I>>26,this.words[E]=I&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(o,d){var m=this.length-o.length,b=this.clone(),E=o,I=E.words[E.length-1]|0,O=this._countBits(I);m=26-O,m!==0&&(E=E.ushln(m),b.iushln(m),I=E.words[E.length-1]|0);var v=b.length-E.length,c;if(d!=="mod"){c=new i(null),c.length=v+1,c.words=new Array(c.length);for(var u=0;u<c.length;u++)c.words[u]=0}var w=b.clone()._ishlnsubmul(E,1,v);w.negative===0&&(b=w,c&&(c.words[v]=1));for(var A=v-1;A>=0;A--){var P=(b.words[E.length+A]|0)*67108864+(b.words[E.length+A-1]|0);for(P=Math.min(P/I|0,67108863),b._ishlnsubmul(E,P,A);b.negative!==0;)P--,b.negative=0,b._ishlnsubmul(E,1,A),b.isZero()||(b.negative^=1);c&&(c.words[A]=P)}return c&&c._strip(),b._strip(),d!=="div"&&m!==0&&b.iushrn(m),{div:c||null,mod:b}},i.prototype.divmod=function(o,d,m){if(n(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var b,E,I;return this.negative!==0&&o.negative===0?(I=this.neg().divmod(o,d),d!=="mod"&&(b=I.div.neg()),d!=="div"&&(E=I.mod.neg(),m&&E.negative!==0&&E.iadd(o)),{div:b,mod:E}):this.negative===0&&o.negative!==0?(I=this.divmod(o.neg(),d),d!=="mod"&&(b=I.div.neg()),{div:b,mod:I.mod}):(this.negative&o.negative)!==0?(I=this.neg().divmod(o.neg(),d),d!=="div"&&(E=I.mod.neg(),m&&E.negative!==0&&E.isub(o)),{div:I.div,mod:E}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?d==="div"?{div:this.divn(o.words[0]),mod:null}:d==="mod"?{div:null,mod:new i(this.modrn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modrn(o.words[0]))}:this._wordDiv(o,d)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var d=this.divmod(o);if(d.mod.isZero())return d.div;var m=d.div.negative!==0?d.mod.isub(o):d.mod,b=o.ushrn(1),E=o.andln(1),I=m.cmp(b);return I<0||E===1&&I===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},i.prototype.modrn=function(o){var d=o<0;d&&(o=-o),n(o<=67108863);for(var m=(1<<26)%o,b=0,E=this.length-1;E>=0;E--)b=(m*b+(this.words[E]|0))%o;return d?-b:b},i.prototype.modn=function(o){return this.modrn(o)},i.prototype.idivn=function(o){var d=o<0;d&&(o=-o),n(o<=67108863);for(var m=0,b=this.length-1;b>=0;b--){var E=(this.words[b]|0)+m*67108864;this.words[b]=E/o|0,m=E%o}return this._strip(),d?this.ineg():this},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){n(o.negative===0),n(!o.isZero());var d=this,m=o.clone();d.negative!==0?d=d.umod(o):d=d.clone();for(var b=new i(1),E=new i(0),I=new i(0),O=new i(1),v=0;d.isEven()&&m.isEven();)d.iushrn(1),m.iushrn(1),++v;for(var c=m.clone(),u=d.clone();!d.isZero();){for(var w=0,A=1;(d.words[0]&A)===0&&w<26;++w,A<<=1);if(w>0)for(d.iushrn(w);w-- >0;)(b.isOdd()||E.isOdd())&&(b.iadd(c),E.isub(u)),b.iushrn(1),E.iushrn(1);for(var P=0,W=1;(m.words[0]&W)===0&&P<26;++P,W<<=1);if(P>0)for(m.iushrn(P);P-- >0;)(I.isOdd()||O.isOdd())&&(I.iadd(c),O.isub(u)),I.iushrn(1),O.iushrn(1);d.cmp(m)>=0?(d.isub(m),b.isub(I),E.isub(O)):(m.isub(d),I.isub(b),O.isub(E))}return{a:I,b:O,gcd:m.iushln(v)}},i.prototype._invmp=function(o){n(o.negative===0),n(!o.isZero());var d=this,m=o.clone();d.negative!==0?d=d.umod(o):d=d.clone();for(var b=new i(1),E=new i(0),I=m.clone();d.cmpn(1)>0&&m.cmpn(1)>0;){for(var O=0,v=1;(d.words[0]&v)===0&&O<26;++O,v<<=1);if(O>0)for(d.iushrn(O);O-- >0;)b.isOdd()&&b.iadd(I),b.iushrn(1);for(var c=0,u=1;(m.words[0]&u)===0&&c<26;++c,u<<=1);if(c>0)for(m.iushrn(c);c-- >0;)E.isOdd()&&E.iadd(I),E.iushrn(1);d.cmp(m)>=0?(d.isub(m),b.isub(E)):(m.isub(d),E.isub(b))}var w;return d.cmpn(1)===0?w=b:w=E,w.cmpn(0)<0&&w.iadd(o),w},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var d=this.clone(),m=o.clone();d.negative=0,m.negative=0;for(var b=0;d.isEven()&&m.isEven();b++)d.iushrn(1),m.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;m.isEven();)m.iushrn(1);var E=d.cmp(m);if(E<0){var I=d;d=m,m=I}else if(E===0||m.cmpn(1)===0)break;d.isub(m)}while(!0);return m.iushln(b)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){n(typeof o=="number");var d=o%26,m=(o-d)/26,b=1<<d;if(this.length<=m)return this._expand(m+1),this.words[m]|=b,this;for(var E=b,I=m;E!==0&&I<this.length;I++){var O=this.words[I]|0;O+=E,E=O>>>26,O&=67108863,this.words[I]=O}return E!==0&&(this.words[I]=E,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var d=o<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var m;if(this.length>1)m=1;else{d&&(o=-o),n(o<=67108863,"Number is too big");var b=this.words[0]|0;m=b===o?0:b<o?-1:1}return this.negative!==0?-m|0:m},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var d=this.ucmp(o);return this.negative!==0?-d|0:d},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var d=0,m=this.length-1;m>=0;m--){var b=this.words[m]|0,E=o.words[m]|0;if(b!==E){b<E?d=-1:b>E&&(d=1);break}}return d},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new z(o)},i.prototype.toRed=function(o){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return n(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return n(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var Y={k256:null,p224:null,p192:null,p25519:null};function se(g,o){this.name=g,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}se.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},se.prototype.ireduce=function(o){var d=o,m;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),m=d.bitLength();while(m>this.n);var b=m<this.n?-1:d.ucmp(this.p);return b===0?(d.words[0]=0,d.length=1):b>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},se.prototype.split=function(o,d){o.iushrn(this.n,0,d)},se.prototype.imulK=function(o){return o.imul(this.k)};function le(){se.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(le,se),le.prototype.split=function(o,d){for(var m=4194303,b=Math.min(o.length,9),E=0;E<b;E++)d.words[E]=o.words[E];if(d.length=b,o.length<=9){o.words[0]=0,o.length=1;return}var I=o.words[9];for(d.words[d.length++]=I&m,E=10;E<o.length;E++){var O=o.words[E]|0;o.words[E-10]=(O&m)<<4|I>>>22,I=O}I>>>=22,o.words[E-10]=I,I===0&&o.length>10?o.length-=10:o.length-=9},le.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var d=0,m=0;m<o.length;m++){var b=o.words[m]|0;d+=b*977,o.words[m]=d&67108863,d=b*64+(d/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function ce(){se.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ce,se);function U(){se.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(U,se);function F(){se.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(F,se),F.prototype.imulK=function(o){for(var d=0,m=0;m<o.length;m++){var b=(o.words[m]|0)*19+d,E=b&67108863;b>>>=26,o.words[m]=E,d=b}return d!==0&&(o.words[o.length++]=d),o},i._prime=function(o){if(Y[o])return Y[o];var d;if(o==="k256")d=new le;else if(o==="p224")d=new ce;else if(o==="p192")d=new U;else if(o==="p25519")d=new F;else throw new Error("Unknown prime "+o);return Y[o]=d,d};function z(g){if(typeof g=="string"){var o=i._prime(g);this.m=o.p,this.prime=o}else n(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}z.prototype._verify1=function(o){n(o.negative===0,"red works only with positives"),n(o.red,"red works only with red numbers")},z.prototype._verify2=function(o,d){n((o.negative|d.negative)===0,"red works only with positives"),n(o.red&&o.red===d.red,"red works only with red numbers")},z.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):(S(o,o.umod(this.m)._forceRed(this)),o)},z.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},z.prototype.add=function(o,d){this._verify2(o,d);var m=o.add(d);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},z.prototype.iadd=function(o,d){this._verify2(o,d);var m=o.iadd(d);return m.cmp(this.m)>=0&&m.isub(this.m),m},z.prototype.sub=function(o,d){this._verify2(o,d);var m=o.sub(d);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},z.prototype.isub=function(o,d){this._verify2(o,d);var m=o.isub(d);return m.cmpn(0)<0&&m.iadd(this.m),m},z.prototype.shl=function(o,d){return this._verify1(o),this.imod(o.ushln(d))},z.prototype.imul=function(o,d){return this._verify2(o,d),this.imod(o.imul(d))},z.prototype.mul=function(o,d){return this._verify2(o,d),this.imod(o.mul(d))},z.prototype.isqr=function(o){return this.imul(o,o.clone())},z.prototype.sqr=function(o){return this.mul(o,o)},z.prototype.sqrt=function(o){if(o.isZero())return o.clone();var d=this.m.andln(3);if(n(d%2===1),d===3){var m=this.m.add(new i(1)).iushrn(2);return this.pow(o,m)}for(var b=this.m.subn(1),E=0;!b.isZero()&&b.andln(1)===0;)E++,b.iushrn(1);n(!b.isZero());var I=new i(1).toRed(this),O=I.redNeg(),v=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,v).cmp(O)!==0;)c.redIAdd(O);for(var u=this.pow(c,b),w=this.pow(o,b.addn(1).iushrn(1)),A=this.pow(o,b),P=E;A.cmp(I)!==0;){for(var W=A,Q=0;W.cmp(I)!==0;Q++)W=W.redSqr();n(Q<P);var re=this.pow(u,new i(1).iushln(P-Q-1));w=w.redMul(re),u=re.redSqr(),A=A.redMul(u),P=Q}return w},z.prototype.invm=function(o){var d=o._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},z.prototype.pow=function(o,d){if(d.isZero())return new i(1).toRed(this);if(d.cmpn(1)===0)return o.clone();var m=4,b=new Array(1<<m);b[0]=new i(1).toRed(this),b[1]=o;for(var E=2;E<b.length;E++)b[E]=this.mul(b[E-1],o);var I=b[0],O=0,v=0,c=d.bitLength()%26;for(c===0&&(c=26),E=d.length-1;E>=0;E--){for(var u=d.words[E],w=c-1;w>=0;w--){var A=u>>w&1;if(I!==b[0]&&(I=this.sqr(I)),A===0&&O===0){v=0;continue}O<<=1,O|=A,v++,!(v!==m&&(E!==0||w!==0))&&(I=this.mul(I,b[O]),v=0,O=0)}c=26}return I},z.prototype.convertTo=function(o){var d=o.umod(this.m);return d===o?d.clone():d},z.prototype.convertFrom=function(o){var d=o.clone();return d.red=null,d},i.mont=function(o){return new V(o)};function V(g){z.call(this,g),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(V,z),V.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},V.prototype.convertFrom=function(o){var d=this.imod(o.mul(this.rinv));return d.red=null,d},V.prototype.imul=function(o,d){if(o.isZero()||d.isZero())return o.words[0]=0,o.length=1,o;var m=o.imul(d),b=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=m.isub(b).iushrn(this.shift),I=E;return E.cmp(this.m)>=0?I=E.isub(this.m):E.cmpn(0)<0&&(I=E.iadd(this.m)),I._forceRed(this)},V.prototype.mul=function(o,d){if(o.isZero()||d.isZero())return new i(0)._forceRed(this);var m=o.mul(d),b=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=m.isub(b).iushrn(this.shift),I=E;return E.cmp(this.m)>=0?I=E.isub(this.m):E.cmpn(0)<0&&(I=E.iadd(this.m)),I._forceRed(this)},V.prototype.invm=function(o){var d=this.imod(o._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(t,gl)})(qn)),qn.exports}var yl=nc();const Ko=js(yl);var Ln={exports:{}};var Wo;function wl(){return Wo||(Wo=1,(function(t,e){var r=qs(),n=r.Buffer;function s(a,l){for(var p in a)l[p]=a[p]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=i);function i(a,l,p){return n(a,l,p)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(a,l,p){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,l,p)},i.alloc=function(a,l,p){if(typeof a!="number")throw new TypeError("Argument must be a number");var x=n(a);return l!==void 0?typeof p=="string"?x.fill(l,p):x.fill(l):x.fill(0),x},i.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},i.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}})(Ln,Ln.exports)),Ln.exports}var ns,Ho;function vl(){if(Ho)return ns;Ho=1;var t=wl().Buffer;function e(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<r.length;i++){var a=r.charAt(i),l=a.charCodeAt(0);if(n[l]!==255)throw new TypeError(a+" is ambiguous");n[l]=i}var p=r.length,x=r.charAt(0),S=Math.log(p)/Math.log(256),T=Math.log(256)/Math.log(p);function k(R){if((Array.isArray(R)||R instanceof Uint8Array)&&(R=t.from(R)),!t.isBuffer(R))throw new TypeError("Expected Buffer");if(R.length===0)return"";for(var N=0,j=0,H=0,q=R.length;H!==q&&R[H]===0;)H++,N++;for(var ee=(q-H)*T+1>>>0,Y=new Uint8Array(ee);H!==q;){for(var se=R[H],le=0,ce=ee-1;(se!==0||le<j)&&ce!==-1;ce--,le++)se+=256*Y[ce]>>>0,Y[ce]=se%p>>>0,se=se/p>>>0;if(se!==0)throw new Error("Non-zero carry");j=le,H++}for(var U=ee-j;U!==ee&&Y[U]===0;)U++;for(var F=x.repeat(N);U<ee;++U)F+=r.charAt(Y[U]);return F}function B(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return t.alloc(0);for(var N=0,j=0,H=0;R[N]===x;)j++,N++;for(var q=(R.length-N)*S+1>>>0,ee=new Uint8Array(q);N<R.length;){var Y=R.charCodeAt(N);if(Y>255)return;var se=n[Y];if(se===255)return;for(var le=0,ce=q-1;(se!==0||le<H)&&ce!==-1;ce--,le++)se+=p*ee[ce]>>>0,ee[ce]=se%256>>>0,se=se/256>>>0;if(se!==0)throw new Error("Non-zero carry");H=le,N++}for(var U=q-H;U!==q&&ee[U]===0;)U++;var F=t.allocUnsafe(j+(q-U));F.fill(0,0,j);for(var z=j;U!==q;)F[z++]=ee[U++];return F}function C(R){var N=B(R);if(N)return N;throw new Error("Non-base"+p+" character")}return{encode:k,decodeUnsafe:B,decode:C}}return ns=e,ns}var is,Go;function ic(){if(Go)return is;Go=1;var t=vl(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return is=t(e),is}var bl=ic();const At=js(bl),Jo=Na;var Ie={};function Gt(t,e,r){return e<=t&&t<=r}function _i(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function xl(t){for(var e=String(t),r=e.length,n=0,s=[];n<r;){var i=e.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===r-1)s.push(65533);else{var a=t.charCodeAt(n+1);if(56320<=a&&a<=57343){var l=i&1023,p=a&1023;s.push(65536+(l<<10)+p),n+=1}else s.push(65533)}n+=1}return s}function _l(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var oi=-1;function Gs(t){this.tokens=[].slice.call(t)}Gs.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():oi},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var Kr=-1;function ss(t,e){if(t)throw TypeError("Decoder error");return e||65533}var ai="utf-8";function ci(t,e){if(!(this instanceof ci))return new ci(t,e);if(t=t!==void 0?String(t).toLowerCase():ai,t!==ai)throw new Error("Encoding not supported. Only utf-8 is supported");e=_i(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}ci.prototype={decode:function(e,r){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),r=_i(r),this._streaming||(this._decoder=new El({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var s=new Gs(n),i=[],a;!s.endOfStream()&&(a=this._decoder.handler(s,s.read()),a!==Kr);)a!==null&&(Array.isArray(a)?i.push.apply(i,a):i.push(a));if(!this._streaming){do{if(a=this._decoder.handler(s,s.read()),a===Kr)break;a!==null&&(Array.isArray(a)?i.push.apply(i,a):i.push(a))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),_l(i)}};function ui(t,e){if(!(this instanceof ui))return new ui(t,e);if(t=t!==void 0?String(t).toLowerCase():ai,t!==ai)throw new Error("Encoding not supported. Only utf-8 is supported");e=_i(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}ui.prototype={encode:function(e,r){e=e?String(e):"",r=_i(r),this._streaming||(this._encoder=new Al(this._options)),this._streaming=!!r.stream;for(var n=[],s=new Gs(xl(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Kr);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Kr;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function El(t){var e=t.fatal,r=0,n=0,s=0,i=128,a=191;this.handler=function(l,p){if(p===oi&&s!==0)return s=0,ss(e);if(p===oi)return Kr;if(s===0){if(Gt(p,0,127))return p;if(Gt(p,194,223))s=1,r=p-192;else if(Gt(p,224,239))p===224&&(i=160),p===237&&(a=159),s=2,r=p-224;else if(Gt(p,240,244))p===240&&(i=144),p===244&&(a=143),s=3,r=p-240;else return ss(e);return r=r<<6*s,null}if(!Gt(p,i,a))return r=s=n=0,i=128,a=191,l.prepend(p),ss(e);if(i=128,a=191,n+=1,r+=p-128<<6*(s-n),n!==s)return null;var x=r;return r=s=n=0,x}}function Al(t){t.fatal,this.handler=function(e,r){if(r===oi)return Kr;if(Gt(r,0,127))return r;var n,s;Gt(r,128,2047)?(n=1,s=192):Gt(r,2048,65535)?(n=2,s=224):Gt(r,65536,1114111)&&(n=3,s=240);for(var i=[(r>>6*n)+s];n>0;){var a=r>>6*(n-1);i.push(128|a&63),n-=1}return i}}const Sl=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:ci,TextEncoder:ui},Symbol.toStringTag,{value:"Module"})),Bl=zs(Sl);var Yo;function Il(){if(Yo)return Ie;Yo=1;var t=Ie&&Ie.__createBinding||(Object.create?(function(U,F,z,V){V===void 0&&(V=z),Object.defineProperty(U,V,{enumerable:!0,get:function(){return F[z]}})}):(function(U,F,z,V){V===void 0&&(V=z),U[V]=F[z]})),e=Ie&&Ie.__setModuleDefault||(Object.create?(function(U,F){Object.defineProperty(U,"default",{enumerable:!0,value:F})}):function(U,F){U.default=F}),r=Ie&&Ie.__decorate||function(U,F,z,V){var g=arguments.length,o=g<3?F:V===null?V=Object.getOwnPropertyDescriptor(F,z):V,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(U,F,z,V);else for(var m=U.length-1;m>=0;m--)(d=U[m])&&(o=(g<3?d(o):g>3?d(F,z,o):d(F,z))||o);return g>3&&o&&Object.defineProperty(F,z,o),o},n=Ie&&Ie.__importStar||function(U){if(U&&U.__esModule)return U;var F={};if(U!=null)for(var z in U)z!=="default"&&Object.hasOwnProperty.call(U,z)&&t(F,U,z);return e(F,U),F},s=Ie&&Ie.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.deserializeUnchecked=Ie.deserialize=Ie.serialize=Ie.BinaryReader=Ie.BinaryWriter=Ie.BorshError=Ie.baseDecode=Ie.baseEncode=void 0;const i=s(nc()),a=s(ic()),l=n(Bl),p=typeof TextDecoder!="function"?l.TextDecoder:TextDecoder,x=new p("utf-8",{fatal:!0});function S(U){return typeof U=="string"&&(U=Buffer.from(U,"utf8")),a.default.encode(Buffer.from(U))}Ie.baseEncode=S;function T(U){return Buffer.from(a.default.decode(U))}Ie.baseDecode=T;const k=1024;class B extends Error{constructor(F){super(F),this.fieldPath=[],this.originalMessage=F}addToFieldPath(F){this.fieldPath.splice(0,0,F),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Ie.BorshError=B;class C{constructor(){this.buf=Buffer.alloc(k),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(k)]))}writeU8(F){this.maybeResize(),this.buf.writeUInt8(F,this.length),this.length+=1}writeU16(F){this.maybeResize(),this.buf.writeUInt16LE(F,this.length),this.length+=2}writeU32(F){this.maybeResize(),this.buf.writeUInt32LE(F,this.length),this.length+=4}writeU64(F){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(F).toArray("le",8)))}writeU128(F){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(F).toArray("le",16)))}writeU256(F){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(F).toArray("le",32)))}writeU512(F){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(F).toArray("le",64)))}writeBuffer(F){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),F,Buffer.alloc(k)]),this.length+=F.length}writeString(F){this.maybeResize();const z=Buffer.from(F,"utf8");this.writeU32(z.length),this.writeBuffer(z)}writeFixedArray(F){this.writeBuffer(Buffer.from(F))}writeArray(F,z){this.maybeResize(),this.writeU32(F.length);for(const V of F)this.maybeResize(),z(V)}toArray(){return this.buf.subarray(0,this.length)}}Ie.BinaryWriter=C;function R(U,F,z){const V=z.value;z.value=function(...g){try{return V.apply(this,g)}catch(o){if(o instanceof RangeError){const d=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(d)>=0)throw new B("Reached the end of buffer when deserializing")}throw o}}}class N{constructor(F){this.buf=F,this.offset=0}readU8(){const F=this.buf.readUInt8(this.offset);return this.offset+=1,F}readU16(){const F=this.buf.readUInt16LE(this.offset);return this.offset+=2,F}readU32(){const F=this.buf.readUInt32LE(this.offset);return this.offset+=4,F}readU64(){const F=this.readBuffer(8);return new i.default(F,"le")}readU128(){const F=this.readBuffer(16);return new i.default(F,"le")}readU256(){const F=this.readBuffer(32);return new i.default(F,"le")}readU512(){const F=this.readBuffer(64);return new i.default(F,"le")}readBuffer(F){if(this.offset+F>this.buf.length)throw new B(`Expected buffer length ${F} isn't within bounds`);const z=this.buf.slice(this.offset,this.offset+F);return this.offset+=F,z}readString(){const F=this.readU32(),z=this.readBuffer(F);try{return x.decode(z)}catch(V){throw new B(`Error decoding UTF-8 string: ${V}`)}}readFixedArray(F){return new Uint8Array(this.readBuffer(F))}readArray(F){const z=this.readU32(),V=Array();for(let g=0;g<z;++g)V.push(F());return V}}r([R],N.prototype,"readU8",null),r([R],N.prototype,"readU16",null),r([R],N.prototype,"readU32",null),r([R],N.prototype,"readU64",null),r([R],N.prototype,"readU128",null),r([R],N.prototype,"readU256",null),r([R],N.prototype,"readU512",null),r([R],N.prototype,"readString",null),r([R],N.prototype,"readFixedArray",null),r([R],N.prototype,"readArray",null),Ie.BinaryReader=N;function j(U){return U.charAt(0).toUpperCase()+U.slice(1)}function H(U,F,z,V,g){try{if(typeof V=="string")g[`write${j(V)}`](z);else if(V instanceof Array)if(typeof V[0]=="number"){if(z.length!==V[0])throw new B(`Expecting byte array of length ${V[0]}, but got ${z.length} bytes`);g.writeFixedArray(z)}else if(V.length===2&&typeof V[1]=="number"){if(z.length!==V[1])throw new B(`Expecting byte array of length ${V[1]}, but got ${z.length} bytes`);for(let o=0;o<V[1];o++)H(U,null,z[o],V[0],g)}else g.writeArray(z,o=>{H(U,F,o,V[0],g)});else if(V.kind!==void 0)switch(V.kind){case"option":{z==null?g.writeU8(0):(g.writeU8(1),H(U,F,z,V.type,g));break}case"map":{g.writeU32(z.size),z.forEach((o,d)=>{H(U,F,d,V.key,g),H(U,F,o,V.value,g)});break}default:throw new B(`FieldType ${V} unrecognized`)}else q(U,z,g)}catch(o){throw o instanceof B&&o.addToFieldPath(F),o}}function q(U,F,z){if(typeof F.borshSerialize=="function"){F.borshSerialize(z);return}const V=U.get(F.constructor);if(!V)throw new B(`Class ${F.constructor.name} is missing in schema`);if(V.kind==="struct")V.fields.map(([g,o])=>{H(U,g,F[g],o,z)});else if(V.kind==="enum"){const g=F[V.field];for(let o=0;o<V.values.length;++o){const[d,m]=V.values[o];if(d===g){z.writeU8(o),H(U,d,F[d],m,z);break}}}else throw new B(`Unexpected schema kind: ${V.kind} for ${F.constructor.name}`)}function ee(U,F,z=C){const V=new z;return q(U,F,V),V.toArray()}Ie.serialize=ee;function Y(U,F,z,V){try{if(typeof z=="string")return V[`read${j(z)}`]();if(z instanceof Array){if(typeof z[0]=="number")return V.readFixedArray(z[0]);if(typeof z[1]=="number"){const g=[];for(let o=0;o<z[1];o++)g.push(Y(U,null,z[0],V));return g}else return V.readArray(()=>Y(U,F,z[0],V))}if(z.kind==="option")return V.readU8()?Y(U,F,z.type,V):void 0;if(z.kind==="map"){let g=new Map;const o=V.readU32();for(let d=0;d<o;d++){const m=Y(U,F,z.key,V),b=Y(U,F,z.value,V);g.set(m,b)}return g}return se(U,z,V)}catch(g){throw g instanceof B&&g.addToFieldPath(F),g}}function se(U,F,z){if(typeof F.borshDeserialize=="function")return F.borshDeserialize(z);const V=U.get(F);if(!V)throw new B(`Class ${F.name} is missing in schema`);if(V.kind==="struct"){const g={};for(const[o,d]of U.get(F).fields)g[o]=Y(U,o,d,z);return new F(g)}if(V.kind==="enum"){const g=z.readU8();if(g>=V.values.length)throw new B(`Enum index: ${g} is out of range`);const[o,d]=V.values[g],m=Y(U,o,d,z);return new F({[o]:m})}throw new B(`Unexpected schema kind: ${V.kind} for ${F.constructor.name}`)}function le(U,F,z,V=N){const g=new V(z),o=se(U,F,g);if(g.offset<z.length)throw new B(`Unexpected ${z.length-g.offset} bytes after deserialized data`);return o}Ie.deserialize=le;function ce(U,F,z,V=N){const g=new V(z);return se(U,F,g)}return Ie.deserializeUnchecked=ce,Ie}var os=Il(),Z={},Xo;function kl(){if(Xo)return Z;Xo=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.s16=Z.s8=Z.nu64be=Z.u48be=Z.u40be=Z.u32be=Z.u24be=Z.u16be=Z.nu64=Z.u48=Z.u40=Z.u32=Z.u24=Z.u16=Z.u8=Z.offset=Z.greedy=Z.Constant=Z.UTF8=Z.CString=Z.Blob=Z.Boolean=Z.BitField=Z.BitStructure=Z.VariantLayout=Z.Union=Z.UnionLayoutDiscriminator=Z.UnionDiscriminator=Z.Structure=Z.Sequence=Z.DoubleBE=Z.Double=Z.FloatBE=Z.Float=Z.NearInt64BE=Z.NearInt64=Z.NearUInt64BE=Z.NearUInt64=Z.IntBE=Z.Int=Z.UIntBE=Z.UInt=Z.OffsetLayout=Z.GreedyCount=Z.ExternalLayout=Z.bindConstructorLayout=Z.nameWithProperty=Z.Layout=Z.uint8ArrayToBuffer=Z.checkUint8Array=void 0,Z.constant=Z.utf8=Z.cstr=Z.blob=Z.unionLayoutDiscriminator=Z.union=Z.seq=Z.bits=Z.struct=Z.f64be=Z.f64=Z.f32be=Z.f32=Z.ns64be=Z.s48be=Z.s40be=Z.s32be=Z.s24be=Z.s16be=Z.ns64=Z.s48=Z.s40=Z.s32=Z.s24=void 0;const t=qs();function e(c){if(!(c instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Z.checkUint8Array=e;function r(c){return e(c),t.Buffer.from(c.buffer,c.byteOffset,c.length)}Z.uint8ArrayToBuffer=r;let n=class{constructor(u,w){if(!Number.isInteger(u))throw new TypeError("span must be an integer");this.span=u,this.property=w}makeDestinationObject(){return{}}getSpan(u,w){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(u){const w=Object.create(this.constructor.prototype);return Object.assign(w,this),w.property=u,w}fromArray(u){}};Z.Layout=n;function s(c,u){return u.property?c+"["+u.property+"]":c}Z.nameWithProperty=s;function i(c,u){if(typeof c!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(c,"layout_"))throw new Error("Class is already bound to a layout");if(!(u&&u instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(u,"boundConstructor_"))throw new Error("layout is already bound to a constructor");c.layout_=u,u.boundConstructor_=c,u.makeDestinationObject=(()=>new c),Object.defineProperty(c.prototype,"encode",{value(w,A){return u.encode(this,w,A)},writable:!0}),Object.defineProperty(c,"decode",{value(w,A){return u.decode(w,A)},writable:!0})}Z.bindConstructorLayout=i;class a extends n{isCount(){throw new Error("ExternalLayout is abstract")}}Z.ExternalLayout=a;class l extends a{constructor(u=1,w){if(!Number.isInteger(u)||0>=u)throw new TypeError("elementSpan must be a (positive) integer");super(-1,w),this.elementSpan=u}isCount(){return!0}decode(u,w=0){e(u);const A=u.length-w;return Math.floor(A/this.elementSpan)}encode(u,w,A){return 0}}Z.GreedyCount=l;class p extends a{constructor(u,w=0,A){if(!(u instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(w))throw new TypeError("offset must be integer or undefined");super(u.span,A||u.property),this.layout=u,this.offset=w}isCount(){return this.layout instanceof x||this.layout instanceof S}decode(u,w=0){return this.layout.decode(u,w+this.offset)}encode(u,w,A=0){return this.layout.encode(u,w,A+this.offset)}}Z.OffsetLayout=p;class x extends n{constructor(u,w){if(super(u,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,w=0){return r(u).readUIntLE(w,this.span)}encode(u,w,A=0){return r(w).writeUIntLE(u,A,this.span),this.span}}Z.UInt=x;class S extends n{constructor(u,w){if(super(u,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,w=0){return r(u).readUIntBE(w,this.span)}encode(u,w,A=0){return r(w).writeUIntBE(u,A,this.span),this.span}}Z.UIntBE=S;class T extends n{constructor(u,w){if(super(u,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,w=0){return r(u).readIntLE(w,this.span)}encode(u,w,A=0){return r(w).writeIntLE(u,A,this.span),this.span}}Z.Int=T;class k extends n{constructor(u,w){if(super(u,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,w=0){return r(u).readIntBE(w,this.span)}encode(u,w,A=0){return r(w).writeIntBE(u,A,this.span),this.span}}Z.IntBE=k;const B=Math.pow(2,32);function C(c){const u=Math.floor(c/B),w=c-u*B;return{hi32:u,lo32:w}}function R(c,u){return c*B+u}class N extends n{constructor(u){super(8,u)}decode(u,w=0){const A=r(u),P=A.readUInt32LE(w),W=A.readUInt32LE(w+4);return R(W,P)}encode(u,w,A=0){const P=C(u),W=r(w);return W.writeUInt32LE(P.lo32,A),W.writeUInt32LE(P.hi32,A+4),8}}Z.NearUInt64=N;class j extends n{constructor(u){super(8,u)}decode(u,w=0){const A=r(u),P=A.readUInt32BE(w),W=A.readUInt32BE(w+4);return R(P,W)}encode(u,w,A=0){const P=C(u),W=r(w);return W.writeUInt32BE(P.hi32,A),W.writeUInt32BE(P.lo32,A+4),8}}Z.NearUInt64BE=j;class H extends n{constructor(u){super(8,u)}decode(u,w=0){const A=r(u),P=A.readUInt32LE(w),W=A.readInt32LE(w+4);return R(W,P)}encode(u,w,A=0){const P=C(u),W=r(w);return W.writeUInt32LE(P.lo32,A),W.writeInt32LE(P.hi32,A+4),8}}Z.NearInt64=H;class q extends n{constructor(u){super(8,u)}decode(u,w=0){const A=r(u),P=A.readInt32BE(w),W=A.readUInt32BE(w+4);return R(P,W)}encode(u,w,A=0){const P=C(u),W=r(w);return W.writeInt32BE(P.hi32,A),W.writeUInt32BE(P.lo32,A+4),8}}Z.NearInt64BE=q;class ee extends n{constructor(u){super(4,u)}decode(u,w=0){return r(u).readFloatLE(w)}encode(u,w,A=0){return r(w).writeFloatLE(u,A),4}}Z.Float=ee;class Y extends n{constructor(u){super(4,u)}decode(u,w=0){return r(u).readFloatBE(w)}encode(u,w,A=0){return r(w).writeFloatBE(u,A),4}}Z.FloatBE=Y;class se extends n{constructor(u){super(8,u)}decode(u,w=0){return r(u).readDoubleLE(w)}encode(u,w,A=0){return r(w).writeDoubleLE(u,A),8}}Z.Double=se;class le extends n{constructor(u){super(8,u)}decode(u,w=0){return r(u).readDoubleBE(w)}encode(u,w,A=0){return r(w).writeDoubleBE(u,A),8}}Z.DoubleBE=le;class ce extends n{constructor(u,w,A){if(!(u instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(w instanceof a&&w.isCount()||Number.isInteger(w)&&0<=w))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let P=-1;!(w instanceof a)&&0<u.span&&(P=w*u.span),super(P,A),this.elementLayout=u,this.count=w}getSpan(u,w=0){if(0<=this.span)return this.span;let A=0,P=this.count;if(P instanceof a&&(P=P.decode(u,w)),0<this.elementLayout.span)A=P*this.elementLayout.span;else{let W=0;for(;W<P;)A+=this.elementLayout.getSpan(u,w+A),++W}return A}decode(u,w=0){const A=[];let P=0,W=this.count;for(W instanceof a&&(W=W.decode(u,w));P<W;)A.push(this.elementLayout.decode(u,w)),w+=this.elementLayout.getSpan(u,w),P+=1;return A}encode(u,w,A=0){const P=this.elementLayout,W=u.reduce((Q,re)=>Q+P.encode(re,w,A+Q),0);return this.count instanceof a&&this.count.encode(u.length,w,A),W}}Z.Sequence=ce;class U extends n{constructor(u,w,A){if(!(Array.isArray(u)&&u.reduce((W,Q)=>W&&Q instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof w=="boolean"&&A===void 0&&(A=w,w=void 0);for(const W of u)if(0>W.span&&W.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let P=-1;try{P=u.reduce((W,Q)=>W+Q.getSpan(),0)}catch{}super(P,w),this.fields=u,this.decodePrefixes=!!A}getSpan(u,w=0){if(0<=this.span)return this.span;let A=0;try{A=this.fields.reduce((P,W)=>{const Q=W.getSpan(u,w);return w+=Q,P+Q},0)}catch{throw new RangeError("indeterminate span")}return A}decode(u,w=0){e(u);const A=this.makeDestinationObject();for(const P of this.fields)if(P.property!==void 0&&(A[P.property]=P.decode(u,w)),w+=P.getSpan(u,w),this.decodePrefixes&&u.length===w)break;return A}encode(u,w,A=0){const P=A;let W=0,Q=0;for(const re of this.fields){let Se=re.span;if(Q=0<Se?Se:0,re.property!==void 0){const Be=u[re.property];Be!==void 0&&(Q=re.encode(Be,w,A),0>Se&&(Se=re.getSpan(w,A)))}W=A,A+=Se}return W+Q-P}fromArray(u){const w=this.makeDestinationObject();for(const A of this.fields)A.property!==void 0&&0<u.length&&(w[A.property]=u.shift());return w}layoutFor(u){if(typeof u!="string")throw new TypeError("property must be string");for(const w of this.fields)if(w.property===u)return w}offsetOf(u){if(typeof u!="string")throw new TypeError("property must be string");let w=0;for(const A of this.fields){if(A.property===u)return w;0>A.span?w=-1:0<=w&&(w+=A.span)}}}Z.Structure=U;class F{constructor(u){this.property=u}decode(u,w){throw new Error("UnionDiscriminator is abstract")}encode(u,w,A){throw new Error("UnionDiscriminator is abstract")}}Z.UnionDiscriminator=F;class z extends F{constructor(u,w){if(!(u instanceof a&&u.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(w||u.property||"variant"),this.layout=u}decode(u,w){return this.layout.decode(u,w)}encode(u,w,A){return this.layout.encode(u,w,A)}}Z.UnionLayoutDiscriminator=z;class V extends n{constructor(u,w,A){let P;if(u instanceof x||u instanceof S)P=new z(new p(u));else if(u instanceof a&&u.isCount())P=new z(u);else if(u instanceof F)P=u;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(w===void 0&&(w=null),!(w===null||w instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(w!==null){if(0>w.span)throw new Error("defaultLayout must have constant span");w.property===void 0&&(w=w.replicate("content"))}let W=-1;w&&(W=w.span,0<=W&&(u instanceof x||u instanceof S)&&(W+=P.layout.span)),super(W,A),this.discriminator=P,this.usesPrefixDiscriminator=u instanceof x||u instanceof S,this.defaultLayout=w,this.registry={};let Q=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(re){return Q(re)},this.configGetSourceVariant=function(re){Q=re.bind(this)}}getSpan(u,w=0){if(0<=this.span)return this.span;const A=this.getVariant(u,w);if(!A)throw new Error("unable to determine span for unrecognized variant");return A.getSpan(u,w)}defaultGetSourceVariant(u){if(Object.prototype.hasOwnProperty.call(u,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(u,this.defaultLayout.property))return;const w=this.registry[u[this.discriminator.property]];if(w&&(!w.layout||w.property&&Object.prototype.hasOwnProperty.call(u,w.property)))return w}else for(const w in this.registry){const A=this.registry[w];if(A.property&&Object.prototype.hasOwnProperty.call(u,A.property))return A}throw new Error("unable to infer src variant")}decode(u,w=0){let A;const P=this.discriminator,W=P.decode(u,w),Q=this.registry[W];if(Q===void 0){const re=this.defaultLayout;let Se=0;this.usesPrefixDiscriminator&&(Se=P.layout.span),A=this.makeDestinationObject(),A[P.property]=W,A[re.property]=re.decode(u,w+Se)}else A=Q.decode(u,w);return A}encode(u,w,A=0){const P=this.getSourceVariant(u);if(P===void 0){const W=this.discriminator,Q=this.defaultLayout;let re=0;return this.usesPrefixDiscriminator&&(re=W.layout.span),W.encode(u[W.property],w,A),re+Q.encode(u[Q.property],w,A+re)}return P.encode(u,w,A)}addVariant(u,w,A){const P=new g(this,u,w,A);return this.registry[u]=P,P}getVariant(u,w=0){let A;return u instanceof Uint8Array?A=this.discriminator.decode(u,w):A=u,this.registry[A]}}Z.Union=V;class g extends n{constructor(u,w,A,P){if(!(u instanceof V))throw new TypeError("union must be a Union");if(!Number.isInteger(w)||0>w)throw new TypeError("variant must be a (non-negative) integer");if(typeof A=="string"&&P===void 0&&(P=A,A=null),A){if(!(A instanceof n))throw new TypeError("layout must be a Layout");if(u.defaultLayout!==null&&0<=A.span&&A.span>u.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof P!="string")throw new TypeError("variant must have a String property")}let W=u.span;0>u.span&&(W=A?A.span:0,0<=W&&u.usesPrefixDiscriminator&&(W+=u.discriminator.layout.span)),super(W,P),this.union=u,this.variant=w,this.layout=A||null}getSpan(u,w=0){if(0<=this.span)return this.span;let A=0;this.union.usesPrefixDiscriminator&&(A=this.union.discriminator.layout.span);let P=0;return this.layout&&(P=this.layout.getSpan(u,w+A)),A+P}decode(u,w=0){const A=this.makeDestinationObject();if(this!==this.union.getVariant(u,w))throw new Error("variant mismatch");let P=0;return this.union.usesPrefixDiscriminator&&(P=this.union.discriminator.layout.span),this.layout?A[this.property]=this.layout.decode(u,w+P):this.property?A[this.property]=!0:this.union.usesPrefixDiscriminator&&(A[this.union.discriminator.property]=this.variant),A}encode(u,w,A=0){let P=0;if(this.union.usesPrefixDiscriminator&&(P=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(u,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,w,A);let W=P;if(this.layout&&(this.layout.encode(u[this.property],w,A+P),W+=this.layout.getSpan(w,A+P),0<=this.union.span&&W>this.union.span))throw new Error("encoded variant overruns containing union");return W}fromArray(u){if(this.layout)return this.layout.fromArray(u)}}Z.VariantLayout=g;function o(c){return 0>c&&(c+=4294967296),c}class d extends n{constructor(u,w,A){if(!(u instanceof x||u instanceof S))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof w=="string"&&A===void 0&&(A=w,w=!1),4<u.span)throw new RangeError("word cannot exceed 32 bits");super(u.span,A),this.word=u,this.msb=!!w,this.fields=[];let P=0;this._packedSetValue=function(W){return P=o(W),this},this._packedGetValue=function(){return P}}decode(u,w=0){const A=this.makeDestinationObject(),P=this.word.decode(u,w);this._packedSetValue(P);for(const W of this.fields)W.property!==void 0&&(A[W.property]=W.decode(u));return A}encode(u,w,A=0){const P=this.word.decode(w,A);this._packedSetValue(P);for(const W of this.fields)if(W.property!==void 0){const Q=u[W.property];Q!==void 0&&W.encode(Q)}return this.word.encode(this._packedGetValue(),w,A)}addField(u,w){const A=new m(this,u,w);return this.fields.push(A),A}addBoolean(u){const w=new b(this,u);return this.fields.push(w),w}fieldFor(u){if(typeof u!="string")throw new TypeError("property must be string");for(const w of this.fields)if(w.property===u)return w}}Z.BitStructure=d;class m{constructor(u,w,A){if(!(u instanceof d))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(w)||0>=w)throw new TypeError("bits must be positive integer");const P=8*u.span,W=u.fields.reduce((Q,re)=>Q+re.bits,0);if(w+W>P)throw new Error("bits too long for span remainder ("+(P-W)+" of "+P+" remain)");this.container=u,this.bits=w,this.valueMask=(1<<w)-1,w===32&&(this.valueMask=4294967295),this.start=W,this.container.msb&&(this.start=P-W-w),this.wordMask=o(this.valueMask<<this.start),this.property=A}decode(u,w){const A=this.container._packedGetValue();return o(A&this.wordMask)>>>this.start}encode(u){if(typeof u!="number"||!Number.isInteger(u)||u!==o(u&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const w=this.container._packedGetValue(),A=o(u<<this.start);this.container._packedSetValue(o(w&~this.wordMask)|A)}}Z.BitField=m;class b extends m{constructor(u,w){super(u,1,w)}decode(u,w){return!!super.decode(u,w)}encode(u){typeof u=="boolean"&&(u=+u),super.encode(u)}}Z.Boolean=b;class E extends n{constructor(u,w){if(!(u instanceof a&&u.isCount()||Number.isInteger(u)&&0<=u))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let A=-1;u instanceof a||(A=u),super(A,w),this.length=u}getSpan(u,w){let A=this.span;return 0>A&&(A=this.length.decode(u,w)),A}decode(u,w=0){let A=this.span;return 0>A&&(A=this.length.decode(u,w)),r(u).slice(w,w+A)}encode(u,w,A){let P=this.length;if(this.length instanceof a&&(P=u.length),!(u instanceof Uint8Array&&P===u.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+P+") Uint8Array as src");if(A+P>w.length)throw new RangeError("encoding overruns Uint8Array");const W=r(u);return r(w).write(W.toString("hex"),A,P,"hex"),this.length instanceof a&&this.length.encode(P,w,A),P}}Z.Blob=E;class I extends n{constructor(u){super(-1,u)}getSpan(u,w=0){e(u);let A=w;for(;A<u.length&&u[A]!==0;)A+=1;return 1+A-w}decode(u,w=0){const A=this.getSpan(u,w);return r(u).slice(w,w+A-1).toString("utf-8")}encode(u,w,A=0){typeof u!="string"&&(u=String(u));const P=t.Buffer.from(u,"utf8"),W=P.length;if(A+W>w.length)throw new RangeError("encoding overruns Buffer");const Q=r(w);return P.copy(Q,A),Q[A+W]=0,W+1}}Z.CString=I;class O extends n{constructor(u,w){if(typeof u=="string"&&w===void 0&&(w=u,u=void 0),u===void 0)u=-1;else if(!Number.isInteger(u))throw new TypeError("maxSpan must be an integer");super(-1,w),this.maxSpan=u}getSpan(u,w=0){return e(u),u.length-w}decode(u,w=0){const A=this.getSpan(u,w);if(0<=this.maxSpan&&this.maxSpan<A)throw new RangeError("text length exceeds maxSpan");return r(u).slice(w,w+A).toString("utf-8")}encode(u,w,A=0){typeof u!="string"&&(u=String(u));const P=t.Buffer.from(u,"utf8"),W=P.length;if(0<=this.maxSpan&&this.maxSpan<W)throw new RangeError("text length exceeds maxSpan");if(A+W>w.length)throw new RangeError("encoding overruns Buffer");return P.copy(r(w),A),W}}Z.UTF8=O;class v extends n{constructor(u,w){super(0,w),this.value=u}decode(u,w){return this.value}encode(u,w,A){return 0}}return Z.Constant=v,Z.greedy=((c,u)=>new l(c,u)),Z.offset=((c,u,w)=>new p(c,u,w)),Z.u8=(c=>new x(1,c)),Z.u16=(c=>new x(2,c)),Z.u24=(c=>new x(3,c)),Z.u32=(c=>new x(4,c)),Z.u40=(c=>new x(5,c)),Z.u48=(c=>new x(6,c)),Z.nu64=(c=>new N(c)),Z.u16be=(c=>new S(2,c)),Z.u24be=(c=>new S(3,c)),Z.u32be=(c=>new S(4,c)),Z.u40be=(c=>new S(5,c)),Z.u48be=(c=>new S(6,c)),Z.nu64be=(c=>new j(c)),Z.s8=(c=>new T(1,c)),Z.s16=(c=>new T(2,c)),Z.s24=(c=>new T(3,c)),Z.s32=(c=>new T(4,c)),Z.s40=(c=>new T(5,c)),Z.s48=(c=>new T(6,c)),Z.ns64=(c=>new H(c)),Z.s16be=(c=>new k(2,c)),Z.s24be=(c=>new k(3,c)),Z.s32be=(c=>new k(4,c)),Z.s40be=(c=>new k(5,c)),Z.s48be=(c=>new k(6,c)),Z.ns64be=(c=>new q(c)),Z.f32=(c=>new ee(c)),Z.f32be=(c=>new Y(c)),Z.f64=(c=>new se(c)),Z.f64be=(c=>new le(c)),Z.struct=((c,u,w)=>new U(c,u,w)),Z.bits=((c,u,w)=>new d(c,u,w)),Z.seq=((c,u,w)=>new ce(c,u,w)),Z.union=((c,u,w)=>new V(c,u,w)),Z.unionLayoutDiscriminator=((c,u)=>new z(c,u)),Z.blob=((c,u)=>new E(c,u)),Z.cstr=(c=>new I(c)),Z.utf8=((c,u)=>new O(c,u)),Z.constant=((c,u)=>new v(c,u)),Z}var M=kl(),Ml=8078e3,Rl=8078001,Tl=8078004,Ol=8078005,Cl=8078006,Ul=8078011;function sc(t){return Array.isArray(t)?"%5B"+t.map(sc).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function Ll([t,e]){return`${t}=${sc(e)}`}function Nl(t){const e=Object.entries(t).map(Ll).join("&");return btoa(e)}function Fl(t,e={}){{let r=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(r+=` '${Nl(e)}'`),`${r}\``}}var Dr=class extends Error{cause=this.cause;context;constructor(...[t,e]){let r,n;if(e){const{cause:i,...a}=e;i&&(n={cause:i}),Object.keys(a).length>0&&(r=a)}const s=Fl(t,r);super(s,n),this.context={__code:t,...r},this.name="SolanaError"}};function Pl(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function Dl(t){return Object.freeze({...t,encode:e=>{const r=new Uint8Array(Pl(e,t));return t.write(e,r,0),r}})}function jl(t){return Object.freeze({...t,decode:(e,r=0)=>t.read(e,r)[0]})}function Cr(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function zl(t,e){if(Cr(t)!==Cr(e))throw new Dr(Tl);if(Cr(t)&&Cr(e)&&t.fixedSize!==e.fixedSize)throw new Dr(Ol,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!Cr(t)&&!Cr(e)&&t.maxSize!==e.maxSize)throw new Dr(Cl,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function ql(t,e,r=0){if(e.length-r<=0)throw new Dr(Ml,{codecDescription:t})}function $l(t,e,r,n=0){const s=r.length-n;if(s<e)throw new Dr(Rl,{bytesLength:s,codecDescription:t,expected:e})}function Zl(t,e,r,n){if(n<e||n>r)throw new Dr(Ul,{codecDescription:t,max:r,min:e,value:n})}function oc(t){return t?.endian!==1}function Vl(t){return Dl({fixedSize:t.size,write(e,r,n){t.range&&Zl(t.name,t.range[0],t.range[1],e);const s=new ArrayBuffer(t.size);return t.set(new DataView(s),e,oc(t.config)),r.set(new Uint8Array(s),n),n+t.size}})}function Kl(t){return jl({fixedSize:t.size,read(e,r=0){ql(t.name,e,r),$l(t.name,t.size,e,r);const n=new DataView(Wl(e,r,t.size));return[t.get(n,oc(t.config)),r+t.size]}})}function Wl(t,e,r){const n=t.byteOffset+(e??0),s=r??t.byteLength;return t.buffer.slice(n,n+s)}var Hl=(t={})=>Vl({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,r,n)=>e.setBigUint64(0,BigInt(r),n),size:8}),Gl=(t={})=>Kl({config:t,get:(e,r)=>e.getBigUint64(0,r),name:"u64",size:8}),Jl=(t={})=>zl(Hl(t),Gl(t));class Yl extends TypeError{constructor(e,r){let n;const{message:s,explanation:i,...a}=e,{path:l}=e,p=l.length===0?s:`At path: ${l.join(".")} -- ${s}`;super(i??p),i!=null&&(this.cause=p),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...r()])}}function Xl(t){return Sn(t)&&typeof t[Symbol.iterator]=="function"}function Sn(t){return typeof t=="object"&&t!=null}function fi(t){return Sn(t)&&!Array.isArray(t)}function Pt(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function Ql(t){const{done:e,value:r}=t.next();return e?void 0:r}function ed(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:s,branch:i}=e,{type:a}=r,{refinement:l,message:p=`Expected a value of type \`${a}\`${l?` with refinement \`${l}\``:""}, but received: \`${Pt(n)}\``}=t;return{value:n,type:a,refinement:l,key:s[s.length-1],path:s,branch:i,...t,message:p}}function*Qo(t,e,r,n){Xl(t)||(t=[t]);for(const s of t){const i=ed(s,e,r,n);i&&(yield i)}}function*Js(t,e,r={}){const{path:n=[],branch:s=[t],coerce:i=!1,mask:a=!1}=r,l={path:n,branch:s,mask:a};i&&(t=e.coercer(t,l));let p="valid";for(const x of e.validator(t,l))x.explanation=r.message,p="not_valid",yield[x,void 0];for(let[x,S,T]of e.entries(t,l)){const k=Js(S,T,{path:x===void 0?n:[...n,x],branch:x===void 0?s:[...s,S],coerce:i,mask:a,message:r.message});for(const B of k)B[0]?(p=B[0].refinement!=null?"not_refined":"not_valid",yield[B[0],void 0]):i&&(S=B[1],x===void 0?t=S:t instanceof Map?t.set(x,S):t instanceof Set?t.add(S):Sn(t)&&(S!==void 0||x in t)&&(t[x]=S))}if(p!=="not_valid")for(const x of e.refiner(t,l))x.explanation=r.message,p="not_refined",yield[x,void 0];p==="valid"&&(yield[void 0,t])}let Zt=class{constructor(e){const{type:r,schema:n,validator:s,refiner:i,coercer:a=p=>p,entries:l=function*(){}}=e;this.type=r,this.schema=n,this.entries=l,this.coercer=a,s?this.validator=(p,x)=>{const S=s(p,x);return Qo(S,x,this,p)}:this.validator=()=>[],i?this.refiner=(p,x)=>{const S=i(p,x);return Qo(S,x,this,p)}:this.refiner=()=>[]}assert(e,r){return td(e,this,r)}create(e,r){return cn(e,this,r)}is(e){return ac(e,this)}mask(e,r){return rd(e,this,r)}validate(e,r={}){return Bn(e,this,r)}};function td(t,e,r){const n=Bn(t,e,{message:r});if(n[0])throw n[0]}function cn(t,e,r){const n=Bn(t,e,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function rd(t,e,r){const n=Bn(t,e,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function ac(t,e){return!Bn(t,e)[0]}function Bn(t,e,r={}){const n=Js(t,e,r),s=Ql(n);return s[0]?[new Yl(s[0],function*(){for(const a of n)a[0]&&(yield a[0])}),void 0]:[void 0,s[1]]}function Sr(t,e){return new Zt({type:t,schema:null,validator:e})}function nd(){return Sr("any",()=>!0)}function ne(t){return new Zt({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Pt(e)}`}})}function $t(){return Sr("boolean",t=>typeof t=="boolean")}function Ys(t){return Sr("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${Pt(e)}`)}function Ne(t){const e=Pt(t),r=typeof t;return new Zt({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${Pt(n)}`}})}function id(){return Sr("never",()=>!1)}function ie(t){return new Zt({...t,validator:(e,r)=>e===null||t.validator(e,r),refiner:(e,r)=>e===null||t.refiner(e,r)})}function $(){return Sr("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Pt(t)}`)}function ue(t){return new Zt({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function cc(t,e){return new Zt({type:"record",schema:null,*entries(r){if(Sn(r))for(const n in r){const s=r[n];yield[n,n,t],yield[n,s,e]}},validator(r){return fi(r)||`Expected an object, but received: ${Pt(r)}`},coercer(r){return fi(r)?{...r}:r}})}function X(){return Sr("string",t=>typeof t=="string"||`Expected a string, but received: ${Pt(t)}`)}function Xs(t){const e=id();return new Zt({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let s=0;s<n;s++)yield[s,r[s],t[s]||e]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${Pt(r)}`},coercer(r){return Array.isArray(r)?r.slice():r}})}function G(t){const e=Object.keys(t);return new Zt({type:"type",schema:t,*entries(r){if(Sn(r))for(const n of e)yield[n,r[n],t[n]]},validator(r){return fi(r)||`Expected an object, but received: ${Pt(r)}`},coercer(r){return fi(r)?{...r}:r}})}function St(t){const e=t.map(r=>r.type).join(" | ");return new Zt({type:"union",schema:null,coercer(r,n){for(const s of t){const[i,a]=s.validate(r,{coerce:!0,mask:n.mask});if(!i)return a}return r},validator(r,n){const s=[];for(const i of t){const[...a]=Js(r,i,n),[l]=a;if(l[0])for(const[p]of a)p&&s.push(p);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Pt(r)}`,...s]}})}function Xr(){return Sr("unknown",()=>!0)}function In(t,e,r){return new Zt({...t,coercer:(n,s)=>ac(n,e)?t.coercer(r(n,s),s):t.coercer(n,s)})}var Nn,sd=new Uint8Array(16);function uc(){if(!Nn&&(Nn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Nn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Nn(sd)}const od=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ei(t){return typeof t=="string"&&od.test(t)}var ht=[];for(var as=0;as<256;++as)ht.push((as+256).toString(16).substr(1));function Ai(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(ht[t[e+0]]+ht[t[e+1]]+ht[t[e+2]]+ht[t[e+3]]+"-"+ht[t[e+4]]+ht[t[e+5]]+"-"+ht[t[e+6]]+ht[t[e+7]]+"-"+ht[t[e+8]]+ht[t[e+9]]+"-"+ht[t[e+10]]+ht[t[e+11]]+ht[t[e+12]]+ht[t[e+13]]+ht[t[e+14]]+ht[t[e+15]]).toLowerCase();if(!Ei(r))throw TypeError("Stringified UUID is invalid");return r}var ea,cs,us=0,fs=0;function ad(t,e,r){var n=e&&r||0,s=e||new Array(16);t=t||{};var i=t.node||ea,a=t.clockseq!==void 0?t.clockseq:cs;if(i==null||a==null){var l=t.random||(t.rng||uc)();i==null&&(i=ea=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),a==null&&(a=cs=(l[6]<<8|l[7])&16383)}var p=t.msecs!==void 0?t.msecs:Date.now(),x=t.nsecs!==void 0?t.nsecs:fs+1,S=p-us+(x-fs)/1e4;if(S<0&&t.clockseq===void 0&&(a=a+1&16383),(S<0||p>us)&&t.nsecs===void 0&&(x=0),x>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");us=p,fs=x,cs=a,p+=122192928e5;var T=((p&268435455)*1e4+x)%4294967296;s[n++]=T>>>24&255,s[n++]=T>>>16&255,s[n++]=T>>>8&255,s[n++]=T&255;var k=p/4294967296*1e4&268435455;s[n++]=k>>>8&255,s[n++]=k&255,s[n++]=k>>>24&15|16,s[n++]=k>>>16&255,s[n++]=a>>>8|128,s[n++]=a&255;for(var B=0;B<6;++B)s[n+B]=i[B];return e||Ai(s)}function fc(t){if(!Ei(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function cd(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var ud="6ba7b810-9dad-11d1-80b4-00c04fd430c8",fd="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function lc(t,e,r){function n(s,i,a,l){if(typeof s=="string"&&(s=cd(s)),typeof i=="string"&&(i=fc(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var p=new Uint8Array(16+s.length);if(p.set(i),p.set(s,i.length),p=r(p),p[6]=p[6]&15|e,p[8]=p[8]&63|128,a){l=l||0;for(var x=0;x<16;++x)a[l+x]=p[x];return a}return Ai(p)}try{n.name=t}catch{}return n.DNS=ud,n.URL=fd,n}function ld(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return dd(hd(pd(t),t.length*8))}function dd(t){for(var e=[],r=t.length*32,n="0123456789abcdef",s=0;s<r;s+=8){var i=t[s>>5]>>>s%32&255,a=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);e.push(a)}return e}function dc(t){return(t+64>>>9<<4)+14+1}function hd(t,e){t[e>>5]|=128<<e%32,t[dc(e)-1]=e;for(var r=1732584193,n=-271733879,s=-1732584194,i=271733878,a=0;a<t.length;a+=16){var l=r,p=n,x=s,S=i;r=yt(r,n,s,i,t[a],7,-680876936),i=yt(i,r,n,s,t[a+1],12,-389564586),s=yt(s,i,r,n,t[a+2],17,606105819),n=yt(n,s,i,r,t[a+3],22,-1044525330),r=yt(r,n,s,i,t[a+4],7,-176418897),i=yt(i,r,n,s,t[a+5],12,1200080426),s=yt(s,i,r,n,t[a+6],17,-1473231341),n=yt(n,s,i,r,t[a+7],22,-45705983),r=yt(r,n,s,i,t[a+8],7,1770035416),i=yt(i,r,n,s,t[a+9],12,-1958414417),s=yt(s,i,r,n,t[a+10],17,-42063),n=yt(n,s,i,r,t[a+11],22,-1990404162),r=yt(r,n,s,i,t[a+12],7,1804603682),i=yt(i,r,n,s,t[a+13],12,-40341101),s=yt(s,i,r,n,t[a+14],17,-1502002290),n=yt(n,s,i,r,t[a+15],22,1236535329),r=wt(r,n,s,i,t[a+1],5,-165796510),i=wt(i,r,n,s,t[a+6],9,-1069501632),s=wt(s,i,r,n,t[a+11],14,643717713),n=wt(n,s,i,r,t[a],20,-373897302),r=wt(r,n,s,i,t[a+5],5,-701558691),i=wt(i,r,n,s,t[a+10],9,38016083),s=wt(s,i,r,n,t[a+15],14,-660478335),n=wt(n,s,i,r,t[a+4],20,-405537848),r=wt(r,n,s,i,t[a+9],5,568446438),i=wt(i,r,n,s,t[a+14],9,-1019803690),s=wt(s,i,r,n,t[a+3],14,-187363961),n=wt(n,s,i,r,t[a+8],20,1163531501),r=wt(r,n,s,i,t[a+13],5,-1444681467),i=wt(i,r,n,s,t[a+2],9,-51403784),s=wt(s,i,r,n,t[a+7],14,1735328473),n=wt(n,s,i,r,t[a+12],20,-1926607734),r=vt(r,n,s,i,t[a+5],4,-378558),i=vt(i,r,n,s,t[a+8],11,-2022574463),s=vt(s,i,r,n,t[a+11],16,1839030562),n=vt(n,s,i,r,t[a+14],23,-35309556),r=vt(r,n,s,i,t[a+1],4,-1530992060),i=vt(i,r,n,s,t[a+4],11,1272893353),s=vt(s,i,r,n,t[a+7],16,-155497632),n=vt(n,s,i,r,t[a+10],23,-1094730640),r=vt(r,n,s,i,t[a+13],4,681279174),i=vt(i,r,n,s,t[a],11,-358537222),s=vt(s,i,r,n,t[a+3],16,-722521979),n=vt(n,s,i,r,t[a+6],23,76029189),r=vt(r,n,s,i,t[a+9],4,-640364487),i=vt(i,r,n,s,t[a+12],11,-421815835),s=vt(s,i,r,n,t[a+15],16,530742520),n=vt(n,s,i,r,t[a+2],23,-995338651),r=bt(r,n,s,i,t[a],6,-198630844),i=bt(i,r,n,s,t[a+7],10,1126891415),s=bt(s,i,r,n,t[a+14],15,-1416354905),n=bt(n,s,i,r,t[a+5],21,-57434055),r=bt(r,n,s,i,t[a+12],6,1700485571),i=bt(i,r,n,s,t[a+3],10,-1894986606),s=bt(s,i,r,n,t[a+10],15,-1051523),n=bt(n,s,i,r,t[a+1],21,-2054922799),r=bt(r,n,s,i,t[a+8],6,1873313359),i=bt(i,r,n,s,t[a+15],10,-30611744),s=bt(s,i,r,n,t[a+6],15,-1560198380),n=bt(n,s,i,r,t[a+13],21,1309151649),r=bt(r,n,s,i,t[a+4],6,-145523070),i=bt(i,r,n,s,t[a+11],10,-1120210379),s=bt(s,i,r,n,t[a+2],15,718787259),n=bt(n,s,i,r,t[a+9],21,-343485551),r=cr(r,l),n=cr(n,p),s=cr(s,x),i=cr(i,S)}return[r,n,s,i]}function pd(t){if(t.length===0)return[];for(var e=t.length*8,r=new Uint32Array(dc(e)),n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function cr(t,e){var r=(t&65535)+(e&65535),n=(t>>16)+(e>>16)+(r>>16);return n<<16|r&65535}function md(t,e){return t<<e|t>>>32-e}function Si(t,e,r,n,s,i){return cr(md(cr(cr(e,t),cr(n,i)),s),r)}function yt(t,e,r,n,s,i,a){return Si(e&r|~e&n,t,e,s,i,a)}function wt(t,e,r,n,s,i,a){return Si(e&n|r&~n,t,e,s,i,a)}function vt(t,e,r,n,s,i,a){return Si(e^r^n,t,e,s,i,a)}function bt(t,e,r,n,s,i,a){return Si(r^(e|~n),t,e,s,i,a)}var gd=lc("v3",48,ld);function yd(t,e,r){t=t||{};var n=t.random||(t.rng||uc)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var s=0;s<16;++s)e[r+s]=n[s];return e}return Ai(n)}function wd(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function ls(t,e){return t<<e|t>>>32-e}function vd(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var n=unescape(encodeURIComponent(t));t=[];for(var s=0;s<n.length;++s)t.push(n.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,a=Math.ceil(i/16),l=new Array(a),p=0;p<a;++p){for(var x=new Uint32Array(16),S=0;S<16;++S)x[S]=t[p*64+S*4]<<24|t[p*64+S*4+1]<<16|t[p*64+S*4+2]<<8|t[p*64+S*4+3];l[p]=x}l[a-1][14]=(t.length-1)*8/Math.pow(2,32),l[a-1][14]=Math.floor(l[a-1][14]),l[a-1][15]=(t.length-1)*8&4294967295;for(var T=0;T<a;++T){for(var k=new Uint32Array(80),B=0;B<16;++B)k[B]=l[T][B];for(var C=16;C<80;++C)k[C]=ls(k[C-3]^k[C-8]^k[C-14]^k[C-16],1);for(var R=r[0],N=r[1],j=r[2],H=r[3],q=r[4],ee=0;ee<80;++ee){var Y=Math.floor(ee/20),se=ls(R,5)+wd(Y,N,j,H)+q+e[Y]+k[ee]>>>0;q=H,H=j,j=ls(N,30)>>>0,N=R,R=se}r[0]=r[0]+R>>>0,r[1]=r[1]+N>>>0,r[2]=r[2]+j>>>0,r[3]=r[3]+H>>>0,r[4]=r[4]+q>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var bd=lc("v5",80,vd);const xd="00000000-0000-0000-0000-000000000000";function _d(t){if(!Ei(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const Ed=Object.freeze(Object.defineProperty({__proto__:null,NIL:xd,parse:fc,stringify:Ai,v1:ad,v3:gd,v4:yd,v5:bd,validate:Ei,version:_d},Symbol.toStringTag,{value:"Module"})),hc=zs(Ed);var ds,ta;function Ad(){if(ta)return ds;ta=1;const t=hc.v4;return ds=function(r,n,s,i){if(typeof r!="string")throw new TypeError(r+" must be a string");i=i||{};const a=typeof i.version=="number"?i.version:2;if(a!==1&&a!==2)throw new TypeError(a+" must be 1 or 2");const l={method:r};if(a===2&&(l.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");l.params=n}if(typeof s>"u"){const p=typeof i.generator=="function"?i.generator:function(){return t()};l.id=p(l,i)}else a===2&&s===null?i.notificationIdNull&&(l.id=null):l.id=s;return l},ds}var hs,ra;function Sd(){if(ra)return hs;ra=1;const t=hc.v4,e=Ad(),r=function(n,s){if(!(this instanceof r))return new r(n,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return t()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=n};return hs=r,r.prototype.request=function(n,s,i,a){const l=this;let p=null;const x=Array.isArray(n)&&typeof s=="function";if(this.options.version===1&&x)throw new TypeError("JSON-RPC 1.0 does not support batching");if(x||!x&&n&&typeof n=="object"&&typeof s=="function")a=s,p=n;else{typeof i=="function"&&(a=i,i=void 0);const k=typeof a=="function";try{p=e(n,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(B){if(k){a(B);return}throw B}if(!k)return p}let T;try{T=JSON.stringify(p,this.options.replacer)}catch(k){a(k);return}return this.callServer(T,function(k,B){l._parseResponse(k,B,a)}),p},r.prototype._parseResponse=function(n,s,i){if(n){i(n);return}if(!s){i();return}let a;try{a=JSON.parse(s,this.options.reviver)}catch(l){i(l);return}if(i.length===3)if(Array.isArray(a)){const l=function(x){return typeof x.error<"u"},p=function(x){return!l(x)};i(null,a.filter(l),a.filter(p));return}else{i(null,a.error,a.result);return}i(null,a)},hs}Sd();var ps={exports:{}},na;function Bd(){return na||(na=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(p,x,S){this.fn=p,this.context=x,this.once=S||!1}function i(p,x,S,T,k){if(typeof S!="function")throw new TypeError("The listener must be a function");var B=new s(S,T||p,k),C=r?r+x:x;return p._events[C]?p._events[C].fn?p._events[C]=[p._events[C],B]:p._events[C].push(B):(p._events[C]=B,p._eventsCount++),p}function a(p,x){--p._eventsCount===0?p._events=new n:delete p._events[x]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var x=[],S,T;if(this._eventsCount===0)return x;for(T in S=this._events)e.call(S,T)&&x.push(r?T.slice(1):T);return Object.getOwnPropertySymbols?x.concat(Object.getOwnPropertySymbols(S)):x},l.prototype.listeners=function(x){var S=r?r+x:x,T=this._events[S];if(!T)return[];if(T.fn)return[T.fn];for(var k=0,B=T.length,C=new Array(B);k<B;k++)C[k]=T[k].fn;return C},l.prototype.listenerCount=function(x){var S=r?r+x:x,T=this._events[S];return T?T.fn?1:T.length:0},l.prototype.emit=function(x,S,T,k,B,C){var R=r?r+x:x;if(!this._events[R])return!1;var N=this._events[R],j=arguments.length,H,q;if(N.fn){switch(N.once&&this.removeListener(x,N.fn,void 0,!0),j){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,S),!0;case 3:return N.fn.call(N.context,S,T),!0;case 4:return N.fn.call(N.context,S,T,k),!0;case 5:return N.fn.call(N.context,S,T,k,B),!0;case 6:return N.fn.call(N.context,S,T,k,B,C),!0}for(q=1,H=new Array(j-1);q<j;q++)H[q-1]=arguments[q];N.fn.apply(N.context,H)}else{var ee=N.length,Y;for(q=0;q<ee;q++)switch(N[q].once&&this.removeListener(x,N[q].fn,void 0,!0),j){case 1:N[q].fn.call(N[q].context);break;case 2:N[q].fn.call(N[q].context,S);break;case 3:N[q].fn.call(N[q].context,S,T);break;case 4:N[q].fn.call(N[q].context,S,T,k);break;default:if(!H)for(Y=1,H=new Array(j-1);Y<j;Y++)H[Y-1]=arguments[Y];N[q].fn.apply(N[q].context,H)}}return!0},l.prototype.on=function(x,S,T){return i(this,x,S,T,!1)},l.prototype.once=function(x,S,T){return i(this,x,S,T,!0)},l.prototype.removeListener=function(x,S,T,k){var B=r?r+x:x;if(!this._events[B])return this;if(!S)return a(this,B),this;var C=this._events[B];if(C.fn)C.fn===S&&(!k||C.once)&&(!T||C.context===T)&&a(this,B);else{for(var R=0,N=[],j=C.length;R<j;R++)(C[R].fn!==S||k&&!C[R].once||T&&C[R].context!==T)&&N.push(C[R]);N.length?this._events[B]=N.length===1?N[0]:N:a(this,B)}return this},l.prototype.removeAllListeners=function(x){var S;return x?(S=r?r+x:x,this._events[S]&&a(this,S)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(ps)),ps.exports}var Id=Bd();const pc=js(Id);class mc extends Oa{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Ra(e);const n=$s(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),Zr(i)}update(e){return ri(this),this.iHash.update(e),this}digestInto(e){ri(this),Er(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:a,outputLen:l}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=a,e.outputLen=l,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const gc=(t,e,r)=>new mc(t,e).update(r).digest();gc.create=(t,e)=>new mc(t,e);const ia=(t,e)=>(t+(t>=0?e:-e)/yc)/e;function kd(t,e,r){const[[n,s],[i,a]]=e,l=ia(a*t,r),p=ia(-s*t,r);let x=t-l*n-p*i,S=-l*s-p*a;const T=x<Yt,k=S<Yt;T&&(x=-x),k&&(S=-S);const B=_n(Math.ceil(Da(r)/2))+jr;if(x<Yt||x>=B||S<Yt||S>=B)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:T,k1:x,k2neg:k,k2:S}}function Ms(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function ms(t,e){const r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return _r(r.lowS,"lowS"),_r(r.prehash,"prehash"),r.format!==void 0&&Ms(r.format),r}class Md extends Error{constructor(e=""){super(e)}}const Ht={Err:Md,_tlv:{encode:(t,e)=>{const{Err:r}=Ht;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,s=Un(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?Un(s.length/2|128):"";return Un(t)+i+s+e},decode(t,e){const{Err:r}=Ht;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let a=0;if(!i)a=s;else{const p=s&127;if(!p)throw new r("tlv.decode(long): indefinite length not supported");if(p>4)throw new r("tlv.decode(long): byte length is too big");const x=e.subarray(n,n+p);if(x.length!==p)throw new r("tlv.decode: length bytes not complete");if(x[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const S of x)a=a<<8|S;if(n+=p,a<128)throw new r("tlv.decode(long): not minimal encoding")}const l=e.subarray(n,n+a);if(l.length!==a)throw new r("tlv.decode: wrong value length");return{v:l,l:e.subarray(n+a)}}},_int:{encode(t){const{Err:e}=Ht;if(t<Yt)throw new e("integer: negative integers are not allowed");let r=Un(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Ht;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return xi(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Ht,s=qe("signature",t),{v:i,l:a}=n.decode(48,s);if(a.length)throw new e("invalid signature: left bytes after parsing");const{v:l,l:p}=n.decode(2,i),{v:x,l:S}=n.decode(2,p);if(S.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(l),s:r.decode(x)}},hexFromSig(t){const{_tlv:e,_int:r}=Ht,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),i=n+s;return e.encode(48,i)}},Yt=BigInt(0),jr=BigInt(1),yc=BigInt(2),Fn=BigInt(3),Rd=BigInt(4);function Fr(t,e){const{BYTES:r}=t;let n;if(typeof e=="bigint")n=e;else{let s=qe("private key",e);try{n=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function Td(t,e={}){const r=tc("weierstrass",t,e),{Fp:n,Fn:s}=r;let i=r.CURVE;const{h:a,n:l}=i;En(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:p}=e;if(p&&(!n.is0(i.a)||typeof p.beta!="bigint"||!Array.isArray(p.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const x=vc(n,s);function S(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function T(V,g,o){const{x:d,y:m}=g.toAffine(),b=n.toBytes(d);if(_r(o,"isCompressed"),o){S();const E=!n.isOdd(m);return zt(wc(E),b)}else return zt(Uint8Array.of(4),b,n.toBytes(m))}function k(V){Ft(V,void 0,"Point");const{publicKey:g,publicKeyUncompressed:o}=x,d=V.length,m=V[0],b=V.subarray(1);if(d===g&&(m===2||m===3)){const E=n.fromBytes(b);if(!n.isValid(E))throw new Error("bad point: is not on curve, wrong x");const I=R(E);let O;try{O=n.sqrt(I)}catch(u){const w=u instanceof Error?": "+u.message:"";throw new Error("bad point: is not on curve, sqrt error"+w)}S();const v=n.isOdd(O);return(m&1)===1!==v&&(O=n.neg(O)),{x:E,y:O}}else if(d===o&&m===4){const E=n.BYTES,I=n.fromBytes(b.subarray(0,E)),O=n.fromBytes(b.subarray(E,E*2));if(!N(I,O))throw new Error("bad point: is not on curve");return{x:I,y:O}}else throw new Error(`bad point: got length ${d}, expected compressed=${g} or uncompressed=${o}`)}const B=e.toBytes||T,C=e.fromBytes||k;function R(V){const g=n.sqr(V),o=n.mul(g,V);return n.add(n.add(o,n.mul(V,i.a)),i.b)}function N(V,g){const o=n.sqr(g),d=R(V);return n.eql(o,d)}if(!N(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const j=n.mul(n.pow(i.a,Fn),Rd),H=n.mul(n.sqr(i.b),BigInt(27));if(n.is0(n.add(j,H)))throw new Error("bad curve params: a or b");function q(V,g,o=!1){if(!n.isValid(g)||o&&n.is0(g))throw new Error(`bad point coordinate ${V}`);return g}function ee(V){if(!(V instanceof U))throw new Error("ProjectivePoint expected")}function Y(V){if(!p||!p.basises)throw new Error("no endo");return kd(V,p.basises,s.ORDER)}const se=ii((V,g)=>{const{X:o,Y:d,Z:m}=V;if(n.eql(m,n.ONE))return{x:o,y:d};const b=V.is0();g==null&&(g=b?n.ONE:n.inv(m));const E=n.mul(o,g),I=n.mul(d,g),O=n.mul(m,g);if(b)return{x:n.ZERO,y:n.ZERO};if(!n.eql(O,n.ONE))throw new Error("invZ was invalid");return{x:E,y:I}}),le=ii(V=>{if(V.is0()){if(e.allowInfinityPoint&&!n.is0(V.Y))return;throw new Error("bad point: ZERO")}const{x:g,y:o}=V.toAffine();if(!n.isValid(g)||!n.isValid(o))throw new Error("bad point: x or y not field elements");if(!N(g,o))throw new Error("bad point: equation left != right");if(!V.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function ce(V,g,o,d,m){return o=new U(n.mul(o.X,V),o.Y,o.Z),g=si(d,g),o=si(m,o),g.add(o)}class U{constructor(g,o,d){this.X=q("x",g),this.Y=q("y",o,!0),this.Z=q("z",d),Object.freeze(this)}static CURVE(){return i}static fromAffine(g){const{x:o,y:d}=g||{};if(!g||!n.isValid(o)||!n.isValid(d))throw new Error("invalid affine point");if(g instanceof U)throw new Error("projective point not allowed");return n.is0(o)&&n.is0(d)?U.ZERO:new U(o,d,n.ONE)}static fromBytes(g){const o=U.fromAffine(C(Ft(g,void 0,"point")));return o.assertValidity(),o}static fromHex(g){return U.fromBytes(qe("pointHex",g))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(g=8,o=!0){return z.createCache(this,g),o||this.multiply(Fn),this}assertValidity(){le(this)}hasEvenY(){const{y:g}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(g)}equals(g){ee(g);const{X:o,Y:d,Z:m}=this,{X:b,Y:E,Z:I}=g,O=n.eql(n.mul(o,I),n.mul(b,m)),v=n.eql(n.mul(d,I),n.mul(E,m));return O&&v}negate(){return new U(this.X,n.neg(this.Y),this.Z)}double(){const{a:g,b:o}=i,d=n.mul(o,Fn),{X:m,Y:b,Z:E}=this;let I=n.ZERO,O=n.ZERO,v=n.ZERO,c=n.mul(m,m),u=n.mul(b,b),w=n.mul(E,E),A=n.mul(m,b);return A=n.add(A,A),v=n.mul(m,E),v=n.add(v,v),I=n.mul(g,v),O=n.mul(d,w),O=n.add(I,O),I=n.sub(u,O),O=n.add(u,O),O=n.mul(I,O),I=n.mul(A,I),v=n.mul(d,v),w=n.mul(g,w),A=n.sub(c,w),A=n.mul(g,A),A=n.add(A,v),v=n.add(c,c),c=n.add(v,c),c=n.add(c,w),c=n.mul(c,A),O=n.add(O,c),w=n.mul(b,E),w=n.add(w,w),c=n.mul(w,A),I=n.sub(I,c),v=n.mul(w,u),v=n.add(v,v),v=n.add(v,v),new U(I,O,v)}add(g){ee(g);const{X:o,Y:d,Z:m}=this,{X:b,Y:E,Z:I}=g;let O=n.ZERO,v=n.ZERO,c=n.ZERO;const u=i.a,w=n.mul(i.b,Fn);let A=n.mul(o,b),P=n.mul(d,E),W=n.mul(m,I),Q=n.add(o,d),re=n.add(b,E);Q=n.mul(Q,re),re=n.add(A,P),Q=n.sub(Q,re),re=n.add(o,m);let Se=n.add(b,I);return re=n.mul(re,Se),Se=n.add(A,W),re=n.sub(re,Se),Se=n.add(d,m),O=n.add(E,I),Se=n.mul(Se,O),O=n.add(P,W),Se=n.sub(Se,O),c=n.mul(u,re),O=n.mul(w,W),c=n.add(O,c),O=n.sub(P,c),c=n.add(P,c),v=n.mul(O,c),P=n.add(A,A),P=n.add(P,A),W=n.mul(u,W),re=n.mul(w,re),P=n.add(P,W),W=n.sub(A,W),W=n.mul(u,W),re=n.add(re,W),A=n.mul(P,re),v=n.add(v,A),A=n.mul(Se,re),O=n.mul(Q,O),O=n.sub(O,A),A=n.mul(Q,P),c=n.mul(Se,c),c=n.add(c,A),new U(O,v,c)}subtract(g){return this.add(g.negate())}is0(){return this.equals(U.ZERO)}multiply(g){const{endo:o}=e;if(!s.isValidNot0(g))throw new Error("invalid scalar: out of range");let d,m;const b=E=>z.cached(this,E,I=>mr(U,I));if(o){const{k1neg:E,k1:I,k2neg:O,k2:v}=Y(g),{p:c,f:u}=b(I),{p:w,f:A}=b(v);m=u.add(A),d=ce(o.beta,c,w,E,O)}else{const{p:E,f:I}=b(g);d=E,m=I}return mr(U,[d,m])[0]}multiplyUnsafe(g){const{endo:o}=e,d=this;if(!s.isValid(g))throw new Error("invalid scalar: out of range");if(g===Yt||d.is0())return U.ZERO;if(g===jr)return d;if(z.hasCache(this))return this.multiply(g);if(o){const{k1neg:m,k1:b,k2neg:E,k2:I}=Y(g),{p1:O,p2:v}=Yf(U,d,b,I);return ce(o.beta,O,v,m,E)}else return z.unsafe(d,g)}multiplyAndAddUnsafe(g,o,d){const m=this.multiplyUnsafe(o).add(g.multiplyUnsafe(d));return m.is0()?void 0:m}toAffine(g){return se(this,g)}isTorsionFree(){const{isTorsionFree:g}=e;return a===jr?!0:g?g(U,this):z.unsafe(this,l).is0()}clearCofactor(){const{clearCofactor:g}=e;return a===jr?this:g?g(U,this):this.multiplyUnsafe(a)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}toBytes(g=!0){return _r(g,"isCompressed"),this.assertValidity(),B(U,this,g)}toHex(g=!0){return yr(this.toBytes(g))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(g=!0){return this.toBytes(g)}_setWindowSize(g){this.precompute(g)}static normalizeZ(g){return mr(U,g)}static msm(g,o){return ec(U,s,g,o)}static fromPrivateKey(g){return U.BASE.multiply(Fr(s,g))}}U.BASE=new U(i.Gx,i.Gy,n.ONE),U.ZERO=new U(n.ZERO,n.ONE,n.ZERO),U.Fp=n,U.Fn=s;const F=s.BITS,z=new Qa(U,e.endo?Math.ceil(F/2):F);return U.BASE.precompute(8),U}function wc(t){return Uint8Array.of(t?2:3)}function vc(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function Od(t,e={}){const{Fn:r}=t,n=e.randomBytes||Zs,s=Object.assign(vc(t.Fp,r),{seed:Ja(r.ORDER)});function i(B){try{return!!Fr(r,B)}catch{return!1}}function a(B,C){const{publicKey:R,publicKeyUncompressed:N}=s;try{const j=B.length;return C===!0&&j!==R||C===!1&&j!==N?!1:!!t.fromBytes(B)}catch{return!1}}function l(B=n(s.seed)){return Hf(Ft(B,s.seed,"seed"),r.ORDER)}function p(B,C=!0){return t.BASE.multiply(Fr(r,B)).toBytes(C)}function x(B){const C=l(B);return{secretKey:C,publicKey:p(C)}}function S(B){if(typeof B=="bigint")return!1;if(B instanceof t)return!0;const{secretKey:C,publicKey:R,publicKeyUncompressed:N}=s;if(r.allowedLengths||C===R)return;const j=qe("key",B).length;return j===R||j===N}function T(B,C,R=!0){if(S(B)===!0)throw new Error("first arg must be private key");if(S(C)===!1)throw new Error("second arg must be public key");const N=Fr(r,B);return t.fromHex(C).multiply(N).toBytes(R)}return Object.freeze({getPublicKey:p,getSharedSecret:T,keygen:x,Point:t,utils:{isValidSecretKey:i,isValidPublicKey:a,randomSecretKey:l,isValidPrivateKey:i,randomPrivateKey:l,normPrivateKeyToScalar:B=>Fr(r,B),precompute(B=8,C=t.BASE){return C.precompute(B,!1)}},lengths:s})}function Cd(t,e,r={}){Ra(e),En(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=r.randomBytes||Zs,s=r.hmac||((o,...d)=>gc(e,o,zt(...d))),{Fp:i,Fn:a}=t,{ORDER:l,BITS:p}=a,{keygen:x,getPublicKey:S,getSharedSecret:T,utils:k,lengths:B}=Od(t,r),C={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},R="compact";function N(o){const d=l>>jr;return o>d}function j(o,d){if(!a.isValidNot0(d))throw new Error(`invalid signature ${o}: out of range 1..Point.Fn.ORDER`);return d}function H(o,d){Ms(d);const m=B.signature,b=d==="compact"?m:d==="recovered"?m+1:void 0;return Ft(o,b,`${d} signature`)}class q{constructor(d,m,b){this.r=j("r",d),this.s=j("s",m),b!=null&&(this.recovery=b),Object.freeze(this)}static fromBytes(d,m=R){H(d,m);let b;if(m==="der"){const{r:v,s:c}=Ht.toSig(Ft(d));return new q(v,c)}m==="recovered"&&(b=d[0],m="compact",d=d.subarray(1));const E=a.BYTES,I=d.subarray(0,E),O=d.subarray(E,E*2);return new q(a.fromBytes(I),a.fromBytes(O),b)}static fromHex(d,m){return this.fromBytes(ni(d),m)}addRecoveryBit(d){return new q(this.r,this.s,d)}recoverPublicKey(d){const m=i.ORDER,{r:b,s:E,recovery:I}=this;if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");if(l*yc<m&&I>1)throw new Error("recovery id is ambiguous for h>1 curve");const v=I===2||I===3?b+l:b;if(!i.isValid(v))throw new Error("recovery id 2 or 3 invalid");const c=i.toBytes(v),u=t.fromBytes(zt(wc((I&1)===0),c)),w=a.inv(v),A=Y(qe("msgHash",d)),P=a.create(-A*w),W=a.create(E*w),Q=t.BASE.multiplyUnsafe(P).add(u.multiplyUnsafe(W));if(Q.is0())throw new Error("point at infinify");return Q.assertValidity(),Q}hasHighS(){return N(this.s)}toBytes(d=R){if(Ms(d),d==="der")return ni(Ht.hexFromSig(this));const m=a.toBytes(this.r),b=a.toBytes(this.s);if(d==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return zt(Uint8Array.of(this.recovery),m,b)}return zt(m,b)}toHex(d){return yr(this.toBytes(d))}assertValidity(){}static fromCompact(d){return q.fromBytes(qe("sig",d),"compact")}static fromDER(d){return q.fromBytes(qe("sig",d),"der")}normalizeS(){return this.hasHighS()?new q(this.r,a.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return yr(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return yr(this.toBytes("compact"))}}const ee=r.bits2int||function(d){if(d.length>8192)throw new Error("input is too large");const m=xi(d),b=d.length*8-p;return b>0?m>>BigInt(b):m},Y=r.bits2int_modN||function(d){return a.create(ee(d))},se=_n(p);function le(o){return ks("num < 2^"+p,o,Yt,se),a.toBytes(o)}function ce(o,d){return Ft(o,void 0,"message"),d?Ft(e(o),void 0,"prehashed message"):o}function U(o,d,m){if(["recovered","canonical"].some(P=>P in m))throw new Error("sign() legacy options not supported");const{lowS:b,prehash:E,extraEntropy:I}=ms(m,C);o=ce(o,E);const O=Y(o),v=Fr(a,d),c=[le(v),le(O)];if(I!=null&&I!==!1){const P=I===!0?n(B.secretKey):I;c.push(qe("extraEntropy",P))}const u=zt(...c),w=O;function A(P){const W=ee(P);if(!a.isValidNot0(W))return;const Q=a.inv(W),re=t.BASE.multiply(W).toAffine(),Se=a.create(re.x);if(Se===Yt)return;const Be=a.create(Q*a.create(w+Se*v));if(Be===Yt)return;let ke=(re.x===Se?0:2)|Number(re.y&jr),Ut=Be;return b&&N(Be)&&(Ut=a.neg(Be),ke^=1),new q(Se,Ut,ke)}return{seed:u,k2sig:A}}function F(o,d,m={}){o=qe("message",o);const{seed:b,k2sig:E}=U(o,d,m);return Pf(e.outputLen,a.BYTES,s)(b,E)}function z(o){let d;const m=typeof o=="string"||xn(o),b=!m&&o!==null&&typeof o=="object"&&typeof o.r=="bigint"&&typeof o.s=="bigint";if(!m&&!b)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(b)d=new q(o.r,o.s);else if(m){try{d=q.fromBytes(qe("sig",o),"der")}catch(E){if(!(E instanceof Ht.Err))throw E}if(!d)try{d=q.fromBytes(qe("sig",o),"compact")}catch{return!1}}return d||!1}function V(o,d,m,b={}){const{lowS:E,prehash:I,format:O}=ms(b,C);if(m=qe("publicKey",m),d=ce(qe("message",d),I),"strict"in b)throw new Error("options.strict was renamed to lowS");const v=O===void 0?z(o):q.fromBytes(qe("sig",o),O);if(v===!1)return!1;try{const c=t.fromBytes(m);if(E&&v.hasHighS())return!1;const{r:u,s:w}=v,A=Y(d),P=a.inv(w),W=a.create(A*P),Q=a.create(u*P),re=t.BASE.multiplyUnsafe(W).add(c.multiplyUnsafe(Q));return re.is0()?!1:a.create(re.x)===u}catch{return!1}}function g(o,d,m={}){const{prehash:b}=ms(m,C);return d=ce(d,b),q.fromBytes(o,"recovered").recoverPublicKey(d).toBytes()}return Object.freeze({keygen:x,getPublicKey:S,getSharedSecret:T,utils:k,lengths:B,Point:t,sign:F,verify:V,recoverPublicKey:g,Signature:q,hash:e})}function Ud(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(a=>Math.ceil(a/2)))):void 0;const s=Ar(e.n,{BITS:t.nBitLength,allowedLengths:n,modFromBytes:t.wrapPrivateKey}),i={Fp:r,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function Ld(t){const{CURVE:e,curveOpts:r}=Ud(t),n={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,hash:t.hash,ecdsaOpts:n}}function Nd(t,e){const r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},t,Ha(r.Fn.ORDER,r.Fn.BITS))})}function Fd(t){const{CURVE:e,curveOpts:r,hash:n,ecdsaOpts:s}=Ld(t),i=Td(e,r),a=Cd(i,n,s);return Nd(t,a)}function Pd(t,e){const r=n=>Fd({...t,hash:n});return{...r(e),create:r}}const Qs={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Dd={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},sa=BigInt(2);function jd(t){const e=Qs.p,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),l=BigInt(44),p=BigInt(88),x=t*t*t%e,S=x*x*t%e,T=ze(S,r,e)*S%e,k=ze(T,r,e)*S%e,B=ze(k,sa,e)*x%e,C=ze(B,s,e)*B%e,R=ze(C,i,e)*C%e,N=ze(R,l,e)*R%e,j=ze(N,p,e)*N%e,H=ze(j,l,e)*R%e,q=ze(H,r,e)*S%e,ee=ze(q,a,e)*C%e,Y=ze(ee,n,e)*x%e,se=ze(Y,sa,e);if(!Rs.eql(Rs.sqr(se),t))throw new Error("Cannot find square root");return se}const Rs=Ar(Qs.p,{sqrt:jd}),zd=Pd({...Qs,Fp:Rs,lowS:!0,endo:Dd},Na);An.utils.randomPrivateKey;An.getPublicKey;function oa(t){try{return An.ExtendedPoint.fromHex(t),!0}catch{return!1}}const bc=(t,e)=>An.sign(t,e.slice(0,32)),qd=An.verify,eo=t=>xe.Buffer.isBuffer(t)?t:t instanceof Uint8Array?xe.Buffer.from(t.buffer,t.byteOffset,t.byteLength):xe.Buffer.from(t);class $d{constructor(e){Object.assign(this,e)}encode(){return xe.Buffer.from(os.serialize($n,this))}static decode(e){return os.deserialize($n,this,e)}static decodeUnchecked(e){return os.deserializeUnchecked($n,this,e)}}const $n=new Map;var xc;const Zd=32,ur=32;function Vd(t){return t._bn!==void 0}let aa=1;class ye extends $d{constructor(e){if(super({}),this._bn=void 0,Vd(e))this._bn=e._bn;else{if(typeof e=="string"){const r=At.decode(e);if(r.length!=ur)throw new Error("Invalid public key input");this._bn=new Ko(r)}else this._bn=new Ko(e);if(this._bn.byteLength()>ur)throw new Error("Invalid public key input")}}static unique(){const e=new ye(aa);return aa+=1,new ye(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return At.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(xe.Buffer);if(e.length===ur)return e;const r=xe.Buffer.alloc(32);return e.copy(r,32-e.length),r}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,r,n){const s=xe.Buffer.concat([e.toBuffer(),xe.Buffer.from(r),n.toBuffer()]),i=Jo(s);return new ye(i)}static createProgramAddressSync(e,r){let n=xe.Buffer.alloc(0);e.forEach(function(i){if(i.length>Zd)throw new TypeError("Max seed length exceeded");n=xe.Buffer.concat([n,eo(i)])}),n=xe.Buffer.concat([n,r.toBuffer(),xe.Buffer.from("ProgramDerivedAddress")]);const s=Jo(n);if(oa(s))throw new Error("Invalid seeds, address must fall off the curve");return new ye(s)}static async createProgramAddress(e,r){return this.createProgramAddressSync(e,r)}static findProgramAddressSync(e,r){let n=255,s;for(;n!=0;){try{const i=e.concat(xe.Buffer.from([n]));s=this.createProgramAddressSync(i,r)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,r){return this.findProgramAddressSync(e,r)}static isOnCurve(e){const r=new ye(e);return oa(r.toBytes())}}xc=ye;ye.default=new xc("11111111111111111111111111111111");$n.set(ye,{kind:"struct",fields:[["_bn","u256"]]});new ye("BPFLoader1111111111111111111111111111111111");const zr=1232,to=127,li=64;class di{constructor(e,r){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=r}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const r of this.keySegments()){if(e<r.length)return r[e];e-=r.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,a)=>{n.set(i.toBase58(),a)});const s=i=>{const a=n.get(i.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(a=>s(a.pubkey)),data:i.data}))}}const _e=(t="publicKey")=>M.blob(32,t),Kd=(t="signature")=>M.blob(64,t),Pr=(t="string")=>{const e=M.struct([M.u32("length"),M.u32("lengthPadding"),M.blob(M.offset(M.u32(),-8),"chars")],t),r=e.decode.bind(e),n=e.encode.bind(e),s=e;return s.decode=(i,a)=>r(i,a).chars.toString(),s.encode=(i,a,l)=>{const p={chars:xe.Buffer.from(i,"utf8")};return n(p,a,l)},s.alloc=i=>M.u32().span+M.u32().span+xe.Buffer.from(i,"utf8").length,s},Wd=(t="authorized")=>M.struct([_e("staker"),_e("withdrawer")],t),Hd=(t="lockup")=>M.struct([M.ns64("unixTimestamp"),M.ns64("epoch"),_e("custodian")],t),Gd=(t="voteInit")=>M.struct([_e("nodePubkey"),_e("authorizedVoter"),_e("authorizedWithdrawer"),M.u8("commission")],t),Jd=(t="voteAuthorizeWithSeedArgs")=>M.struct([M.u32("voteAuthorizationType"),_e("currentAuthorityDerivedKeyOwnerPubkey"),Pr("currentAuthorityDerivedKeySeed"),_e("newAuthorized")],t);function Rt(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(n&127)<<r*7,r+=1,(n&128)===0)break}return e}function Tt(t,e){let r=e;for(;;){let n=r&127;if(r>>=7,r==0){t.push(n);break}else n|=128,t.push(n)}}function lt(t,e){if(!t)throw new Error(e||"Assertion failed")}class Bi{constructor(e,r){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=r}static compile(e,r){const n=new Map,s=a=>{const l=a.toBase58();let p=n.get(l);return p===void 0&&(p={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(l,p)),p},i=s(r);i.isSigner=!0,i.isWritable=!0;for(const a of e){s(a.programId).isInvoked=!0;for(const l of a.keys){const p=s(l.pubkey);p.isSigner||=l.isSigner,p.isWritable||=l.isWritable}}return new Bi(r,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];lt(e.length<=256,"Max static account keys length exceeded");const r=e.filter(([,p])=>p.isSigner&&p.isWritable),n=e.filter(([,p])=>p.isSigner&&!p.isWritable),s=e.filter(([,p])=>!p.isSigner&&p.isWritable),i=e.filter(([,p])=>!p.isSigner&&!p.isWritable),a={numRequiredSignatures:r.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{lt(r.length>0,"Expected at least one writable signer key");const[p]=r[0];lt(p===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const l=[...r.map(([p])=>new ye(p)),...n.map(([p])=>new ye(p)),...s.map(([p])=>new ye(p)),...i.map(([p])=>new ye(p))];return[a,l]}extractTableLookup(e){const[r,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(r.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:r,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(e,r){const n=new Array,s=new Array;for(const[i,a]of this.keyMetaMap.entries())if(r(a)){const l=new ye(i),p=e.findIndex(x=>x.equals(l));p>=0&&(lt(p<256,"Max lookup table index exceeded"),n.push(p),s.push(l),this.keyMetaMap.delete(i))}return[n,s]}}const _c="Reached end of buffer unexpectedly";function Jt(t){if(t.length===0)throw new Error(_c);return t.shift()}function Ot(t,...e){const[r]=e;if(e.length===2?r+(e[1]??0)>t.length:r>=t.length)throw new Error(_c);return t.splice(...e)}class Wr{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(r=>new ye(r)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(r=>this.indexToProgramIds.set(r.programIdIndex,this.accountKeys[r.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:At.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new di(this.staticAccountKeys)}static compile(e){const r=Bi.compile(e.instructions,e.payerKey),[n,s]=r.getMessageComponents(),a=new di(s).compileInstructions(e.instructions).map(l=>({programIdIndex:l.programIdIndex,accounts:l.accountKeyIndexes,data:At.encode(l.data)}));return new Wr({header:n,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-r,i=this.accountKeys.length-r-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=r-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,r)=>!this.isProgramId(r))}serialize(){const e=this.accountKeys.length;let r=[];Tt(r,e);const n=this.instructions.map(T=>{const{accounts:k,programIdIndex:B}=T,C=Array.from(At.decode(T.data));let R=[];Tt(R,k.length);let N=[];return Tt(N,C.length),{programIdIndex:B,keyIndicesCount:xe.Buffer.from(R),keyIndices:k,dataLength:xe.Buffer.from(N),data:C}});let s=[];Tt(s,n.length);let i=xe.Buffer.alloc(zr);xe.Buffer.from(s).copy(i);let a=s.length;n.forEach(T=>{const B=M.struct([M.u8("programIdIndex"),M.blob(T.keyIndicesCount.length,"keyIndicesCount"),M.seq(M.u8("keyIndex"),T.keyIndices.length,"keyIndices"),M.blob(T.dataLength.length,"dataLength"),M.seq(M.u8("userdatum"),T.data.length,"data")]).encode(T,i,a);a+=B}),i=i.slice(0,a);const l=M.struct([M.blob(1,"numRequiredSignatures"),M.blob(1,"numReadonlySignedAccounts"),M.blob(1,"numReadonlyUnsignedAccounts"),M.blob(r.length,"keyCount"),M.seq(_e("key"),e,"keys"),_e("recentBlockhash")]),p={numRequiredSignatures:xe.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:xe.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:xe.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:xe.Buffer.from(r),keys:this.accountKeys.map(T=>eo(T.toBytes())),recentBlockhash:At.decode(this.recentBlockhash)};let x=xe.Buffer.alloc(2048);const S=l.encode(p,x);return i.copy(x,S),x.slice(0,S+i.length)}static from(e){let r=[...e];const n=Jt(r);if(n!==(n&to))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Jt(r),i=Jt(r),a=Rt(r);let l=[];for(let k=0;k<a;k++){const B=Ot(r,0,ur);l.push(new ye(xe.Buffer.from(B)))}const p=Ot(r,0,ur),x=Rt(r);let S=[];for(let k=0;k<x;k++){const B=Jt(r),C=Rt(r),R=Ot(r,0,C),N=Rt(r),j=Ot(r,0,N),H=At.encode(xe.Buffer.from(j));S.push({programIdIndex:B,accounts:R,data:H})}const T={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:At.encode(xe.Buffer.from(p)),accountKeys:l,instructions:S};return new Wr(T)}}class hi{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const r of this.addressTableLookups)e+=r.readonlyIndexes.length+r.writableIndexes.length;return e}getAccountKeys(e){let r;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");r=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)r=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new di(this.staticAccountKeys,r)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const s=e-n,i=this.addressTableLookups.reduce((a,l)=>a+l.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-r,a=n-r-this.header.numReadonlyUnsignedAccounts;return s<a}else{const s=r-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const r={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=e.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)r.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)r.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return r}static compile(e){const r=Bi.compile(e.instructions,e.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const S of i){const T=r.extractTableLookup(S);if(T!==void 0){const[k,{writable:B,readonly:C}]=T;n.push(k),s.writable.push(...B),s.readonly.push(...C)}}const[a,l]=r.getMessageComponents(),x=new di(l,s).compileInstructions(e.instructions);return new hi({header:a,staticAccountKeys:l,recentBlockhash:e.recentBlockhash,compiledInstructions:x,addressTableLookups:n})}serialize(){const e=Array();Tt(e,this.staticAccountKeys.length);const r=this.serializeInstructions(),n=Array();Tt(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Tt(i,this.addressTableLookups.length);const a=M.struct([M.u8("prefix"),M.struct([M.u8("numRequiredSignatures"),M.u8("numReadonlySignedAccounts"),M.u8("numReadonlyUnsignedAccounts")],"header"),M.blob(e.length,"staticAccountKeysLength"),M.seq(_e(),this.staticAccountKeys.length,"staticAccountKeys"),_e("recentBlockhash"),M.blob(n.length,"instructionsLength"),M.blob(r.length,"serializedInstructions"),M.blob(i.length,"addressTableLookupsLength"),M.blob(s.length,"serializedAddressTableLookups")]),l=new Uint8Array(zr),x=a.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(S=>S.toBytes()),recentBlockhash:At.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},l);return l.slice(0,x)}serializeInstructions(){let e=0;const r=new Uint8Array(zr);for(const n of this.compiledInstructions){const s=Array();Tt(s,n.accountKeyIndexes.length);const i=Array();Tt(i,n.data.length);const a=M.struct([M.u8("programIdIndex"),M.blob(s.length,"encodedAccountKeyIndexesLength"),M.seq(M.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),M.blob(i.length,"encodedDataLength"),M.blob(n.data.length,"data")]);e+=a.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},r,e)}return r.slice(0,e)}serializeAddressTableLookups(){let e=0;const r=new Uint8Array(zr);for(const n of this.addressTableLookups){const s=Array();Tt(s,n.writableIndexes.length);const i=Array();Tt(i,n.readonlyIndexes.length);const a=M.struct([_e("accountKey"),M.blob(s.length,"encodedWritableIndexesLength"),M.seq(M.u8(),n.writableIndexes.length,"writableIndexes"),M.blob(i.length,"encodedReadonlyIndexesLength"),M.seq(M.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=a.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},r,e)}return r.slice(0,e)}static deserialize(e){let r=[...e];const n=Jt(r),s=n&to;lt(n!==s,"Expected versioned message but received legacy message");const i=s;lt(i===0,`Expected versioned message with version 0 but found version ${i}`);const a={numRequiredSignatures:Jt(r),numReadonlySignedAccounts:Jt(r),numReadonlyUnsignedAccounts:Jt(r)},l=[],p=Rt(r);for(let C=0;C<p;C++)l.push(new ye(Ot(r,0,ur)));const x=At.encode(Ot(r,0,ur)),S=Rt(r),T=[];for(let C=0;C<S;C++){const R=Jt(r),N=Rt(r),j=Ot(r,0,N),H=Rt(r),q=new Uint8Array(Ot(r,0,H));T.push({programIdIndex:R,accountKeyIndexes:j,data:q})}const k=Rt(r),B=[];for(let C=0;C<k;C++){const R=new ye(Ot(r,0,ur)),N=Rt(r),j=Ot(r,0,N),H=Rt(r),q=Ot(r,0,H);B.push({accountKey:R,writableIndexes:j,readonlyIndexes:q})}return new hi({header:a,staticAccountKeys:l,recentBlockhash:x,compiledInstructions:T,addressTableLookups:B})}}const ro={deserializeMessageVersion(t){const e=t[0],r=e&to;return r===e?"legacy":r},deserialize:t=>{const e=ro.deserializeMessageVersion(t);if(e==="legacy")return Wr.from(t);if(e===0)return hi.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}},Yd=xe.Buffer.alloc(li).fill(0);class ca{constructor(e){this.keys=void 0,this.programId=void 0,this.data=xe.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:r,isWritable:n})=>({pubkey:e.toJSON(),isSigner:r,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class pi{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:r,nonceInfo:n}=e;this.minNonceContextSlot=r,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:r,lastValidBlockHeight:n}=e;this.recentBlockhash=r,this.lastValidBlockHeight=n}else{const{recentBlockhash:r,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=r}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(r=>{"instructions"in r?this.instructions=this.instructions.concat(r.instructions):"data"in r&&"programId"in r&&"keys"in r?this.instructions.push(r):this.instructions.push(new ca(r))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?r=[this.nonceInfo.nonceInstruction,...this.instructions]:r=this.instructions):(e=this.recentBlockhash,r=this.instructions),!e)throw new Error("Transaction recentBlockhash required");r.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let R=0;R<r.length;R++)if(r[R].programId===void 0)throw new Error(`Transaction instruction index ${R} has undefined program id`);const s=[],i=[];r.forEach(R=>{R.keys.forEach(j=>{i.push({...j})});const N=R.programId.toString();s.includes(N)||s.push(N)}),s.forEach(R=>{i.push({pubkey:new ye(R),isSigner:!1,isWritable:!1})});const a=[];i.forEach(R=>{const N=R.pubkey.toString(),j=a.findIndex(H=>H.pubkey.toString()===N);j>-1?(a[j].isWritable=a[j].isWritable||R.isWritable,a[j].isSigner=a[j].isSigner||R.isSigner):a.push(R)}),a.sort(function(R,N){if(R.isSigner!==N.isSigner)return R.isSigner?-1:1;if(R.isWritable!==N.isWritable)return R.isWritable?-1:1;const j={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return R.pubkey.toBase58().localeCompare(N.pubkey.toBase58(),"en",j)});const l=a.findIndex(R=>R.pubkey.equals(n));if(l>-1){const[R]=a.splice(l,1);R.isSigner=!0,R.isWritable=!0,a.unshift(R)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const R of this.signatures){const N=a.findIndex(j=>j.pubkey.equals(R.publicKey));if(N>-1)a[N].isSigner||(a[N].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${R.publicKey.toString()}`)}let p=0,x=0,S=0;const T=[],k=[];a.forEach(({pubkey:R,isSigner:N,isWritable:j})=>{N?(T.push(R.toString()),p+=1,j||(x+=1)):(k.push(R.toString()),j||(S+=1))});const B=T.concat(k),C=r.map(R=>{const{data:N,programId:j}=R;return{programIdIndex:B.indexOf(j.toString()),accounts:R.keys.map(H=>B.indexOf(H.pubkey.toString())),data:At.encode(N)}});return C.forEach(R=>{lt(R.programIdIndex>=0),R.accounts.forEach(N=>lt(N>=0))}),new Wr({header:{numRequiredSignatures:p,numReadonlySignedAccounts:x,numReadonlyUnsignedAccounts:S},accountKeys:B,recentBlockhash:e,instructions:C})}_compile(){const e=this.compileMessage(),r=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===r.length&&this.signatures.every((s,i)=>r[i].equals(s.publicKey))||(this.signatures=r.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const r=new Set;this.signatures=e.filter(n=>{const s=n.toString();return r.has(s)?!1:(r.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const r=new Set,n=[];for(const i of e){const a=i.publicKey.toString();r.has(a)||(r.add(a),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const r=new Set,n=[];for(const i of e){const a=i.publicKey.toString();r.has(a)||(r.add(a),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(e,...r){const n=e.serialize();r.forEach(s=>{const i=bc(n,s.secretKey);this._addSignature(s.publicKey,eo(i))})}addSignature(e,r){this._compile(),this._addSignature(e,r)}_addSignature(e,r){lt(r.length===64);const n=this.signatures.findIndex(s=>e.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=xe.Buffer.from(r)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,r){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?r&&(n.missing||=[]).push(i):qd(s,e,i.toBytes())||(n.invalid||=[]).push(i);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:r,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,r);if(i){let a="Signature verification failed.";throw i.invalid&&(a+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(l=>l.toBase58()).join("`, `")}\`].`),i.missing&&(a+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(l=>l.toBase58()).join("`, `")}\`].`),new Error(a)}}return this._serialize(s)}_serialize(e){const{signatures:r}=this,n=[];Tt(n,r.length);const s=n.length+r.length*64+e.length,i=xe.Buffer.alloc(s);return lt(r.length<256),xe.Buffer.from(n).copy(i,0),r.forEach(({signature:a},l)=>{a!==null&&(lt(a.length===64,"signature has invalid length"),xe.Buffer.from(a).copy(i,n.length+l*64))}),e.copy(i,n.length+r.length*64),lt(i.length<=zr,`Transaction too large: ${i.length} > ${zr}`),i}get keys(){return lt(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return lt(this.instructions.length===1),this.instructions[0].programId}get data(){return lt(this.instructions.length===1),this.instructions[0].data}static from(e){let r=[...e];const n=Rt(r);let s=[];for(let i=0;i<n;i++){const a=Ot(r,0,li);s.push(At.encode(xe.Buffer.from(a)))}return pi.populate(Wr.from(r),s)}static populate(e,r=[]){const n=new pi;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),r.forEach((s,i)=>{const a={signature:s==At.encode(Yd)?null:At.decode(s),publicKey:e.accountKeys[i]};n.signatures.push(a)}),e.instructions.forEach(s=>{const i=s.accounts.map(a=>{const l=e.accountKeys[a];return{pubkey:l,isSigner:n.signatures.some(p=>p.publicKey.toString()===l.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new ca({keys:i,programId:e.accountKeys[s.programIdIndex],data:At.decode(s.data)}))}),n._message=e,n._json=n.toJSON(),n}}class no{get version(){return this.message.version}constructor(e,r){if(this.signatures=void 0,this.message=void 0,r!==void 0)lt(r.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{const n=[];for(let s=0;s<e.header.numRequiredSignatures;s++)n.push(new Uint8Array(li));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),r=Array();Tt(r,this.signatures.length);const n=M.struct([M.blob(r.length,"encodedSignaturesLength"),M.seq(Kd(),this.signatures.length,"signatures"),M.blob(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(r),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let r=[...e];const n=[],s=Rt(r);for(let a=0;a<s;a++)n.push(new Uint8Array(Ot(r,0,li)));const i=ro.deserialize(new Uint8Array(r));return new no(i,n)}sign(e){const r=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=n.findIndex(a=>a.equals(s.publicKey));lt(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=bc(r,s.secretKey)}}addSignature(e,r){lt(r.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));lt(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=r}}new ye("SysvarC1ock11111111111111111111111111111111");new ye("SysvarEpochSchedu1e111111111111111111111111");new ye("Sysvar1nstructions1111111111111111111111111");new ye("SysvarRecentB1ockHashes11111111111111111111");new ye("SysvarRent111111111111111111111111111111111");new ye("SysvarRewards111111111111111111111111111111");new ye("SysvarS1otHashes111111111111111111111111111");new ye("SysvarS1otHistory11111111111111111111111111");new ye("SysvarStakeHistory1111111111111111111111111");const Xd=M.nu64("lamportsPerSignature"),Qd=M.struct([M.u32("version"),M.u32("state"),_e("authorizedPubkey"),_e("nonce"),M.struct([Xd],"feeCalculator")]);Qd.span;function Hr(t){const e=M.blob(8,t),r=e.decode.bind(e),n=e.encode.bind(e),s=e,i=Jl();return s.decode=(a,l)=>{const p=r(a,l);return i.decode(p)},s.encode=(a,l,p)=>{const x=i.encode(a);return n(x,l,p)},s}Object.freeze({Create:{index:0,layout:M.struct([M.u32("instruction"),M.ns64("lamports"),M.ns64("space"),_e("programId")])},Assign:{index:1,layout:M.struct([M.u32("instruction"),_e("programId")])},Transfer:{index:2,layout:M.struct([M.u32("instruction"),Hr("lamports")])},CreateWithSeed:{index:3,layout:M.struct([M.u32("instruction"),_e("base"),Pr("seed"),M.ns64("lamports"),M.ns64("space"),_e("programId")])},AdvanceNonceAccount:{index:4,layout:M.struct([M.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:M.struct([M.u32("instruction"),_e("authorized")])},AuthorizeNonceAccount:{index:7,layout:M.struct([M.u32("instruction"),_e("authorized")])},Allocate:{index:8,layout:M.struct([M.u32("instruction"),M.ns64("space")])},AllocateWithSeed:{index:9,layout:M.struct([M.u32("instruction"),_e("base"),Pr("seed"),M.ns64("space"),_e("programId")])},AssignWithSeed:{index:10,layout:M.struct([M.u32("instruction"),_e("base"),Pr("seed"),_e("programId")])},TransferWithSeed:{index:11,layout:M.struct([M.u32("instruction"),Hr("lamports"),Pr("seed"),_e("programId")])},UpgradeNonceAccount:{index:12,layout:M.struct([M.u32("instruction")])}});new ye("11111111111111111111111111111111");new ye("BPFLoader2111111111111111111111111111111111");M.struct([M.u32("typeIndex"),Hr("deactivationSlot"),M.nu64("lastExtendedSlot"),M.u8("lastExtendedStartIndex"),M.u8(),M.seq(_e(),M.offset(M.u8(),-1),"authority")]);const Ze=In(Ys(ye),X(),t=>new ye(t)),Ec=Xs([X(),Ne("base64")]),io=In(Ys(xe.Buffer),Ec,t=>xe.Buffer.from(t[0],"base64"));function Ac(t){return St([G({jsonrpc:Ne("2.0"),id:X(),result:t}),G({jsonrpc:Ne("2.0"),id:X(),error:G({code:Xr(),message:X(),data:ue(nd())})})])}const eh=Ac(Xr());function Re(t){return In(Ac(t),eh,e=>"error"in e?e:{...e,result:cn(e.result,t)})}function Dt(t){return Re(G({context:G({slot:$()}),value:t}))}function Ii(t){return G({context:G({slot:$()}),value:t})}const th=G({foundation:$(),foundationTerm:$(),initial:$(),taper:$(),terminal:$()});Re(ne(ie(G({epoch:$(),effectiveSlot:$(),amount:$(),postBalance:$(),commission:ue(ie($()))}))));const rh=ne(G({slot:$(),prioritizationFee:$()})),nh=G({total:$(),validator:$(),foundation:$(),epoch:$()}),ih=G({epoch:$(),slotIndex:$(),slotsInEpoch:$(),absoluteSlot:$(),blockHeight:ue($()),transactionCount:ue($())}),sh=G({slotsPerEpoch:$(),leaderScheduleSlotOffset:$(),warmup:$t(),firstNormalEpoch:$(),firstNormalSlot:$()}),oh=cc(X(),ne($())),Br=ie(St([G({}),X()])),ah=G({err:Br}),ch=Ne("receivedSignature");G({"solana-core":X(),"feature-set":ue($())});const uh=G({program:X(),programId:Ze,parsed:Xr()}),fh=G({programId:Ze,accounts:ne(Ze),data:X()});Dt(G({err:ie(St([G({}),X()])),logs:ie(ne(X())),accounts:ue(ie(ne(ie(G({executable:$t(),owner:X(),lamports:$(),data:ne(X()),rentEpoch:ue($())}))))),unitsConsumed:ue($()),returnData:ue(ie(G({programId:X(),data:Xs([X(),Ne("base64")])}))),innerInstructions:ue(ie(ne(G({index:$(),instructions:ne(St([uh,fh]))}))))}));Dt(G({byIdentity:cc(X(),ne($())),range:G({firstSlot:$(),lastSlot:$()})}));Re(th);Re(nh);Re(rh);Re(ih);Re(sh);Re(oh);Re($());Dt(G({total:$(),circulating:$(),nonCirculating:$(),nonCirculatingAccounts:ne(Ze)}));const lh=G({amount:X(),uiAmount:ie($()),decimals:$(),uiAmountString:ue(X())});Dt(ne(G({address:Ze,amount:X(),uiAmount:ie($()),decimals:$(),uiAmountString:ue(X())})));Dt(ne(G({pubkey:Ze,account:G({executable:$t(),owner:Ze,lamports:$(),data:io,rentEpoch:$()})})));const Ts=G({program:X(),parsed:Xr(),space:$()});Dt(ne(G({pubkey:Ze,account:G({executable:$t(),owner:Ze,lamports:$(),data:Ts,rentEpoch:$()})})));Dt(ne(G({lamports:$(),address:Ze})));const so=G({executable:$t(),owner:Ze,lamports:$(),data:io,rentEpoch:$()});G({pubkey:Ze,account:so});const dh=In(St([Ys(xe.Buffer),Ts]),St([Ec,Ts]),t=>Array.isArray(t)?cn(t,io):t),hh=G({executable:$t(),owner:Ze,lamports:$(),data:dh,rentEpoch:$()});G({pubkey:Ze,account:hh});G({state:St([Ne("active"),Ne("inactive"),Ne("activating"),Ne("deactivating")]),active:$(),inactive:$()});Re(ne(G({signature:X(),slot:$(),err:Br,memo:ie(X()),blockTime:ue(ie($()))})));Re(ne(G({signature:X(),slot:$(),err:Br,memo:ie(X()),blockTime:ue(ie($()))})));G({subscription:$(),result:Ii(so)});const ph=G({pubkey:Ze,account:so});G({subscription:$(),result:Ii(ph)});const mh=G({parent:$(),slot:$(),root:$()});G({subscription:$(),result:mh});const gh=St([G({type:St([Ne("firstShredReceived"),Ne("completed"),Ne("optimisticConfirmation"),Ne("root")]),slot:$(),timestamp:$()}),G({type:Ne("createdBank"),parent:$(),slot:$(),timestamp:$()}),G({type:Ne("frozen"),slot:$(),timestamp:$(),stats:G({numTransactionEntries:$(),numSuccessfulTransactions:$(),numFailedTransactions:$(),maxTransactionsPerEntry:$()})}),G({type:Ne("dead"),slot:$(),timestamp:$(),err:X()})]);G({subscription:$(),result:gh});G({subscription:$(),result:Ii(St([ah,ch]))});G({subscription:$(),result:$()});G({pubkey:X(),gossip:ie(X()),tpu:ie(X()),rpc:ie(X()),version:ie(X())});const ua=G({votePubkey:X(),nodePubkey:X(),activatedStake:$(),epochVoteAccount:$t(),epochCredits:ne(Xs([$(),$(),$()])),commission:$(),lastVote:$(),rootSlot:ie($())});Re(G({current:ne(ua),delinquent:ne(ua)}));const yh=St([Ne("processed"),Ne("confirmed"),Ne("finalized")]),wh=G({slot:$(),confirmations:ie($()),err:Br,confirmationStatus:ue(yh)});Dt(ne(ie(wh)));Re($());const Sc=G({accountKey:Ze,writableIndexes:ne($()),readonlyIndexes:ne($())}),oo=G({signatures:ne(X()),message:G({accountKeys:ne(X()),header:G({numRequiredSignatures:$(),numReadonlySignedAccounts:$(),numReadonlyUnsignedAccounts:$()}),instructions:ne(G({accounts:ne($()),data:X(),programIdIndex:$()})),recentBlockhash:X(),addressTableLookups:ue(ne(Sc))})}),Bc=G({pubkey:Ze,signer:$t(),writable:$t(),source:ue(St([Ne("transaction"),Ne("lookupTable")]))}),Ic=G({accountKeys:ne(Bc),signatures:ne(X())}),kc=G({parsed:Xr(),program:X(),programId:Ze}),Mc=G({accounts:ne(Ze),data:X(),programId:Ze}),vh=St([Mc,kc]),bh=St([G({parsed:Xr(),program:X(),programId:X()}),G({accounts:ne(X()),data:X(),programId:X()})]),Rc=In(vh,bh,t=>"accounts"in t?cn(t,Mc):cn(t,kc)),Tc=G({signatures:ne(X()),message:G({accountKeys:ne(Bc),instructions:ne(Rc),recentBlockhash:X(),addressTableLookups:ue(ie(ne(Sc)))})}),mi=G({accountIndex:$(),mint:X(),owner:ue(X()),programId:ue(X()),uiTokenAmount:lh}),Oc=G({writable:ne(Ze),readonly:ne(Ze)}),ki=G({err:Br,fee:$(),innerInstructions:ue(ie(ne(G({index:$(),instructions:ne(G({accounts:ne($()),data:X(),programIdIndex:$()}))})))),preBalances:ne($()),postBalances:ne($()),logMessages:ue(ie(ne(X()))),preTokenBalances:ue(ie(ne(mi))),postTokenBalances:ue(ie(ne(mi))),loadedAddresses:ue(Oc),computeUnitsConsumed:ue($()),costUnits:ue($())}),ao=G({err:Br,fee:$(),innerInstructions:ue(ie(ne(G({index:$(),instructions:ne(Rc)})))),preBalances:ne($()),postBalances:ne($()),logMessages:ue(ie(ne(X()))),preTokenBalances:ue(ie(ne(mi))),postTokenBalances:ue(ie(ne(mi))),loadedAddresses:ue(Oc),computeUnitsConsumed:ue($()),costUnits:ue($())}),Qr=St([Ne(0),Ne("legacy")]),Ir=G({pubkey:X(),lamports:$(),postBalance:ie($()),rewardType:ie(X()),commission:ue(ie($()))});Re(ie(G({blockhash:X(),previousBlockhash:X(),parentSlot:$(),transactions:ne(G({transaction:oo,meta:ie(ki),version:ue(Qr)})),rewards:ue(ne(Ir)),blockTime:ie($()),blockHeight:ie($())})));Re(ie(G({blockhash:X(),previousBlockhash:X(),parentSlot:$(),rewards:ue(ne(Ir)),blockTime:ie($()),blockHeight:ie($())})));Re(ie(G({blockhash:X(),previousBlockhash:X(),parentSlot:$(),transactions:ne(G({transaction:Ic,meta:ie(ki),version:ue(Qr)})),rewards:ue(ne(Ir)),blockTime:ie($()),blockHeight:ie($())})));Re(ie(G({blockhash:X(),previousBlockhash:X(),parentSlot:$(),transactions:ne(G({transaction:Tc,meta:ie(ao),version:ue(Qr)})),rewards:ue(ne(Ir)),blockTime:ie($()),blockHeight:ie($())})));Re(ie(G({blockhash:X(),previousBlockhash:X(),parentSlot:$(),transactions:ne(G({transaction:Ic,meta:ie(ao),version:ue(Qr)})),rewards:ue(ne(Ir)),blockTime:ie($()),blockHeight:ie($())})));Re(ie(G({blockhash:X(),previousBlockhash:X(),parentSlot:$(),rewards:ue(ne(Ir)),blockTime:ie($()),blockHeight:ie($())})));Re(ie(G({blockhash:X(),previousBlockhash:X(),parentSlot:$(),transactions:ne(G({transaction:oo,meta:ie(ki)})),rewards:ue(ne(Ir)),blockTime:ie($())})));Re(ie(G({blockhash:X(),previousBlockhash:X(),parentSlot:$(),signatures:ne(X()),blockTime:ie($())})));Re(ie(G({slot:$(),meta:ie(ki),blockTime:ue(ie($())),transaction:oo,version:ue(Qr)})));Re(ie(G({slot:$(),transaction:Tc,meta:ie(ao),blockTime:ue(ie($())),version:ue(Qr)})));Dt(G({blockhash:X(),lastValidBlockHeight:$()}));Dt($t());const xh=G({slot:$(),numTransactions:$(),numSlots:$(),samplePeriodSecs:$()});Re(ne(xh));Dt(ie(G({feeCalculator:G({lamportsPerSignature:$()})})));Re(X());Re(X());const _h=G({err:Br,logs:ne(X()),signature:X()});G({result:Ii(_h),subscription:$()});Object.freeze({CreateLookupTable:{index:0,layout:M.struct([M.u32("instruction"),Hr("recentSlot"),M.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:M.struct([M.u32("instruction")])},ExtendLookupTable:{index:2,layout:M.struct([M.u32("instruction"),Hr(),M.seq(_e(),M.offset(M.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:M.struct([M.u32("instruction")])},CloseLookupTable:{index:4,layout:M.struct([M.u32("instruction")])}});new ye("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:M.struct([M.u8("instruction"),M.u32("units"),M.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:M.struct([M.u8("instruction"),M.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:M.struct([M.u8("instruction"),M.u32("units")])},SetComputeUnitPrice:{index:3,layout:M.struct([M.u8("instruction"),Hr("microLamports")])}});new ye("ComputeBudget111111111111111111111111111111");M.struct([M.u8("numSignatures"),M.u8("padding"),M.u16("signatureOffset"),M.u16("signatureInstructionIndex"),M.u16("publicKeyOffset"),M.u16("publicKeyInstructionIndex"),M.u16("messageDataOffset"),M.u16("messageDataSize"),M.u16("messageInstructionIndex")]);new ye("Ed25519SigVerify111111111111111111111111111");zd.utils.isValidPrivateKey;M.struct([M.u8("numSignatures"),M.u16("signatureOffset"),M.u8("signatureInstructionIndex"),M.u16("ethAddressOffset"),M.u8("ethAddressInstructionIndex"),M.u16("messageDataOffset"),M.u16("messageDataSize"),M.u8("messageInstructionIndex"),M.blob(20,"ethAddress"),M.blob(64,"signature"),M.u8("recoveryId")]);new ye("KeccakSecp256k11111111111111111111111111111");var Cc;new ye("StakeConfig11111111111111111111111111111111");class Uc{constructor(e,r,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=r,this.custodian=n}}Cc=Uc;Uc.default=new Cc(0,0,ye.default);Object.freeze({Initialize:{index:0,layout:M.struct([M.u32("instruction"),Wd(),Hd()])},Authorize:{index:1,layout:M.struct([M.u32("instruction"),_e("newAuthorized"),M.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:M.struct([M.u32("instruction")])},Split:{index:3,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},Withdraw:{index:4,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},Deactivate:{index:5,layout:M.struct([M.u32("instruction")])},Merge:{index:7,layout:M.struct([M.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:M.struct([M.u32("instruction"),_e("newAuthorized"),M.u32("stakeAuthorizationType"),Pr("authoritySeed"),_e("authorityOwner")])}});new ye("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:M.struct([M.u32("instruction"),Gd()])},Authorize:{index:1,layout:M.struct([M.u32("instruction"),_e("newAuthorized"),M.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:M.struct([M.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:M.struct([M.u32("instruction"),Jd()])}});new ye("Vote111111111111111111111111111111111111111");new ye("Va1idator1nfo111111111111111111111111111111");G({name:X(),website:ue(X()),details:ue(X()),iconUrl:ue(X()),keybaseUsername:ue(X())});new ye("Vote111111111111111111111111111111111111111");M.struct([_e("nodePubkey"),_e("authorizedWithdrawer"),M.u8("commission"),M.nu64(),M.seq(M.struct([M.nu64("slot"),M.u32("confirmationCount")]),M.offset(M.u32(),-8),"votes"),M.u8("rootSlotValid"),M.nu64("rootSlot"),M.nu64(),M.seq(M.struct([M.nu64("epoch"),_e("authorizedVoter")]),M.offset(M.u32(),-8),"authorizedVoters"),M.struct([M.seq(M.struct([_e("authorizedPubkey"),M.nu64("epochOfLastAuthorizedSwitch"),M.nu64("targetEpoch")]),32,"buf"),M.nu64("idx"),M.u8("isEmpty")],"priorVoters"),M.nu64(),M.seq(M.struct([M.nu64("epoch"),M.nu64("credits"),M.nu64("prevCredits")]),M.offset(M.u32(),-8),"epochCredits"),M.struct([M.nu64("slot"),M.nu64("timestamp")],"lastTimestamp")]);const Eh=t=>({request:t,signMessage:e=>t({method:"signMessage",params:{message:e}}),signTransaction:e=>t({method:"signTransaction",params:{transaction:e}}),signAndSendTransaction:e=>t({method:"signAndSendTransaction",params:e})});function fa(t){return Buffer.from(t.serialize({verifySignatures:!1})).toString("base64")}function Ah(t){const e=Buffer.from(t,"base64");return ro.deserializeMessageVersion(e)==="legacy"?no.deserialize(e):pi.from(e)}function Sh(t){return async r=>{if(r.method==="connect")return await t(r);if(r.method==="signMessage")return await t(r);if(r.method==="signAndSendTransaction"){const{transaction:n}=r.params,s={transaction:fa(n)};return await t({method:"signAndSendTransaction",params:s})}if(r.method==="signTransaction"){const{transaction:n}=r.params,s={transaction:fa(n)},{signedTransaction:i}=await t({method:"signTransaction",params:s});return{signedTransaction:Ah(i)}}}}const Bh=({miniAppHost:t,emitter:e})=>{let r,n=null;return{visible:!1,get onback(){return n},set onback(s){n&&e.removeListener("backNavigationTriggered",n),n=s,s&&e.addListener("backNavigationTriggered",s)},async show(){await t.updateBackState({visible:!0}),this.visible=!0},async hide(){await t.updateBackState({visible:!1}),this.visible=!1},async enableWebNavigation(){r=Ih({back:this,emitter:e})},async disableWebNavigation(){r?.(),r=void 0}}};function Ih({emitter:t,back:e}){const r=kh();if(r)return Mh({emitter:t,back:e,navigation:r});if(typeof window<"u")return Rh({emitter:t,back:e,window})}function kh(){if(typeof window<"u"&&window.navigation!==void 0)return window.navigation}function Mh({emitter:t,back:e,navigation:r}){function n(){r.canGoBack?e.show():e.hide()}function s(){e.visible&&r.canGoBack&&r.back()}return r.addEventListener("navigatesuccess",n),t.addListener("backNavigationTriggered",s),()=>{r.removeEventListener("navigatesuccess",n),t.removeListener("backNavigationTriggered",s)}}function Rh({emitter:t,back:e,window:r}){e.show();function n(){e.visible&&r.history.back()}return t.addListener("backNavigationTriggered",n),()=>{t.removeListener("backNavigationTriggered",n)}}const Th="0.1.1";function Oh(){return Th}let Ch=class Os extends Error{constructor(e,r={}){const n=(()=>{if(r.cause instanceof Os){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return r.cause?.message?r.cause.message:r.details})(),s=r.cause instanceof Os&&r.cause.docsPath||r.docsPath,a=`https://oxlib.sh${s??""}`,l=[e||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n||s?["",n?`Details: ${n}`:void 0,s?`See: ${a}`:void 0]:[]].filter(p=>typeof p=="string").join(`
`);super(l,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Oh()}`}),this.cause=r.cause,this.details=n,this.docs=a,this.docsPath=s,this.shortMessage=e}walk(e){return Lc(this,e)}};function Lc(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?Lc(t.cause,e):e?null:t}function Nc(t,e={}){const{raw:r=!1}=e,n=t;if(r)return t;if(n.error){const{code:s}=n.error,i=s===Gr.code?Gr:s===un.code?un:s===wn.code?wn:s===gn.code?gn:s===pn.code?pn:s===yn.code?yn:s===hn.code?hn:s===vn.code?vn:s===fn.code?fn:s===ln.code?ln:s===dn.code?dn:s===mn.code?mn:kt;throw new i(n.error)}return n.result}let kt=class extends Error{constructor(e){const{code:r,message:n,data:s}=e;super(n),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.BaseError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r,this.data=s}};class un extends kt{constructor(e={}){super({message:"Missing or invalid parameters.",...e,code:un.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidInputError"})}}Object.defineProperty(un,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class fn extends kt{constructor(e={}){super({message:"Requested resource not found.",...e,code:fn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ResourceNotFoundError"})}}Object.defineProperty(fn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class ln extends kt{constructor(e={}){super({message:"Requested resource not available.",...e,code:ln.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ResourceUnavailableError"})}}Object.defineProperty(ln,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class dn extends kt{constructor(e={}){super({message:"Transaction creation failed.",...e,code:dn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.TransactionRejectedError"})}}Object.defineProperty(dn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class hn extends kt{constructor(e={}){super({message:"Method is not implemented.",...e,code:hn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.MethodNotSupportedError"})}}Object.defineProperty(hn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class pn extends kt{constructor(e={}){super({message:"Rate limit exceeded.",...e,code:pn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.LimitExceededError"})}}Object.defineProperty(pn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class mn extends kt{constructor(e={}){super({message:"JSON-RPC version not supported.",...e,code:mn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.VersionNotSupportedError"})}}Object.defineProperty(mn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class gn extends kt{constructor(e={}){super({message:"Input is not a valid JSON-RPC request.",...e,code:gn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidRequestError"})}}Object.defineProperty(gn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class yn extends kt{constructor(e={}){super({message:"Method does not exist.",...e,code:yn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.MethodNotFoundError"})}}Object.defineProperty(yn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class wn extends kt{constructor(e={}){super({message:"Invalid method parameters.",...e,code:wn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidParamsError"})}}Object.defineProperty(wn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Gr extends kt{constructor(e={}){super({message:"Internal JSON-RPC error.",...e,code:Gr.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InternalErrorError"})}}Object.defineProperty(Gr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class vn extends kt{constructor(e={}){super({message:"Failed to parse JSON-RPC response.",...e,code:vn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ParseError"})}}Object.defineProperty(vn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class kr extends Error{constructor(e,r){super(r),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=e,this.details=r}}class Fc extends kr{constructor({message:e="The user rejected the request."}={}){super(4001,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UserRejectedRequestError"})}}Object.defineProperty(Fc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Pc extends kr{constructor({message:e="The requested method and/or account has not been authorized by the user."}={}){super(4100,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnauthorizedError"})}}Object.defineProperty(Pc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Dc extends kr{constructor({message:e="The provider does not support the requested method."}={}){super(4200,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnsupportedMethodError"})}}Object.defineProperty(Dc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class jc extends kr{constructor({message:e="The provider is disconnected from all chains."}={}){super(4900,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.DisconnectedError"})}}Object.defineProperty(jc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class zc extends kr{constructor({message:e="The provider is not connected to the requested chain."}={}){super(4901,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.ChainDisconnectedError"})}}Object.defineProperty(zc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});function Uh(){const t=new pc;return{get eventNames(){return t.eventNames.bind(t)},get listenerCount(){return t.listenerCount.bind(t)},get listeners(){return t.listeners.bind(t)},addListener:t.addListener.bind(t),emit:t.emit.bind(t),off:t.off.bind(t),on:t.on.bind(t),once:t.once.bind(t),removeAllListeners:t.removeAllListeners.bind(t),removeListener:t.removeListener.bind(t)}}function Lh(t,e={}){const{includeEvents:r=!0}=e;if(!t)throw new Nh;return{...r?{on:t.on?.bind(t),removeListener:t.removeListener?.bind(t)}:{},async request(n){const s=await t.request(n);return s&&typeof s=="object"&&"jsonrpc"in s?Nc(s):s}}}class Nh extends Ch{constructor(){super("`provider` is undefined."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.IsUndefinedError"})}}function Fh(t={}){let e=t.id??0;return{prepare(r){return Ph({id:e++,...r})},get id(){return e}}}function Ph(t){return{...t,jsonrpc:"2.0"}}const qc=Symbol("Comlink.proxy"),Dh=Symbol("Comlink.endpoint"),jh=Symbol("Comlink.releaseProxy"),gs=Symbol("Comlink.finalizer"),Zn=Symbol("Comlink.thrown"),$c=t=>typeof t=="object"&&t!==null||typeof t=="function",zh={canHandle:t=>$c(t)&&t[qc],serialize(t){const{port1:e,port2:r}=new MessageChannel;return Vc(t,e),[r,[r]]},deserialize(t){return t.start(),Wc(t)}},qh={canHandle:t=>$c(t)&&Zn in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},Zc=new Map([["proxy",zh],["throw",qh]]);function $h(t,e){for(const r of t)if(e===r||r==="*"||r instanceof RegExp&&r.test(e))return!0;return!1}function Vc(t,e=globalThis,r=["*"]){e.addEventListener("message",function n(s){if(!s||!s.data)return;if(!$h(r,s.origin)){console.warn(`Invalid origin '${s.origin}' for comlink proxy`);return}const{id:i,type:a,path:l}=Object.assign({path:[]},s.data),p=(s.data.argumentList||[]).map(dr);let x;try{const S=l.slice(0,-1).reduce((k,B)=>k[B],t),T=l.reduce((k,B)=>k[B],t);switch(a){case"GET":x=T;break;case"SET":S[l.slice(-1)[0]]=dr(s.data.value),x=!0;break;case"APPLY":x=T.apply(S,p);break;case"CONSTRUCT":{const k=new T(...p);x=Gh(k)}break;case"ENDPOINT":{const{port1:k,port2:B}=new MessageChannel;Vc(t,B),x=Hh(k,[k])}break;case"RELEASE":x=void 0;break;default:return}}catch(S){x={value:S,[Zn]:0}}Promise.resolve(x).catch(S=>({value:S,[Zn]:0})).then(S=>{const[T,k]=wi(S);e.postMessage(Object.assign(Object.assign({},T),{id:i}),k),a==="RELEASE"&&(e.removeEventListener("message",n),Kc(e),gs in t&&typeof t[gs]=="function"&&t[gs]())}).catch(S=>{const[T,k]=wi({value:new TypeError("Unserializable return value"),[Zn]:0});e.postMessage(Object.assign(Object.assign({},T),{id:i}),k)})}),e.start&&e.start()}function Zh(t){return t.constructor.name==="MessagePort"}function Kc(t){Zh(t)&&t.close()}function Wc(t,e){const r=new Map;return t.addEventListener("message",function(s){const{data:i}=s;if(!i||!i.id)return;const a=r.get(i.id);if(a)try{a(i)}finally{r.delete(i.id)}}),Cs(t,r,[],e)}function Pn(t){if(t)throw new Error("Proxy has been released and is not useable")}function Hc(t){return Nr(t,new Map,{type:"RELEASE"}).then(()=>{Kc(t)})}const gi=new WeakMap,yi="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(gi.get(t)||0)-1;gi.set(t,e),e===0&&Hc(t)});function Vh(t,e){const r=(gi.get(e)||0)+1;gi.set(e,r),yi&&yi.register(t,e,t)}function Kh(t){yi&&yi.unregister(t)}function Cs(t,e,r=[],n=function(){}){let s=!1;const i=new Proxy(n,{get(a,l){if(Pn(s),l===jh)return()=>{Kh(i),Hc(t),e.clear(),s=!0};if(l==="then"){if(r.length===0)return{then:()=>i};const p=Nr(t,e,{type:"GET",path:r.map(x=>x.toString())}).then(dr);return p.then.bind(p)}return Cs(t,e,[...r,l])},set(a,l,p){Pn(s);const[x,S]=wi(p);return Nr(t,e,{type:"SET",path:[...r,l].map(T=>T.toString()),value:x},S).then(dr)},apply(a,l,p){Pn(s);const x=r[r.length-1];if(x===Dh)return Nr(t,e,{type:"ENDPOINT"}).then(dr);if(x==="bind")return Cs(t,e,r.slice(0,-1));const[S,T]=la(p);return Nr(t,e,{type:"APPLY",path:r.map(k=>k.toString()),argumentList:S},T).then(dr)},construct(a,l){Pn(s);const[p,x]=la(l);return Nr(t,e,{type:"CONSTRUCT",path:r.map(S=>S.toString()),argumentList:p},x).then(dr)}});return Vh(i,t),i}function Wh(t){return Array.prototype.concat.apply([],t)}function la(t){const e=t.map(wi);return[e.map(r=>r[0]),Wh(e.map(r=>r[1]))]}const Gc=new WeakMap;function Hh(t,e){return Gc.set(t,e),t}function Gh(t){return Object.assign(t,{[qc]:!0})}function Jh(t,e=globalThis,r="*"){return{postMessage:(n,s)=>t.postMessage(n,r,s),addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}function wi(t){for(const[e,r]of Zc)if(r.canHandle(t)){const[n,s]=r.serialize(t);return[{type:"HANDLER",name:e,value:n},s]}return[{type:"RAW",value:t},Gc.get(t)||[]]}function dr(t){switch(t.type){case"HANDLER":return Zc.get(t.name).deserialize(t.value);case"RAW":return t.value}}function Nr(t,e,r,n){return new Promise(s=>{const i=Yh();e.set(i,s),t.start&&t.start(),t.postMessage(Object.assign({id:i},r),n)})}function Yh(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const Xh={postMessage(){},addEventListener:()=>{},removeEventListener:()=>{}},Qh={postMessage:t=>{window.ReactNativeWebView.postMessage(JSON.stringify(t))},addEventListener:(t,e,...r)=>{document.addEventListener("FarcasterFrameCallback",e,...r)},removeEventListener:(t,e)=>{document.removeEventListener("FarcasterFrameCallback",e)}},e0=typeof window>"u"?Xh:window?.ReactNativeWebView?Qh:Jh(window?.parent??window),ge=Wc(e0),co=Uh(),t0=Fh();function r0({code:t,details:e}){switch(t){case 4001:return new Fc;case 4100:return new Pc;case 4200:return new Dc;case 4900:return new jc;case 4901:return new zc;default:return new kr(t,e??"Unknown provider RPC error")}}const bn=Lh({...co,async request(t){const e=t0.prepare(t);try{const r=await ge.ethProviderRequestV2(e).then(n=>Nc(n,{request:e,raw:!0}));if(r.error)throw r0(r.error);return r.result}catch(r){if(r instanceof Error&&r.message.match(/cannot read property 'apply'/i))return await ge.ethProviderRequest(e);throw r instanceof kr||r instanceof kt?r:new Gr({message:r instanceof Error?r.message:void 0})}}});async function n0(){try{const t=await ge.getCapabilities();return!t.includes("wallet.getEthereumProvider")&&!t.includes("wallet.getEvmProvider")?void 0:bn}catch{return bn}}function Jc(t){const e=new CustomEvent("eip6963:announceProvider",{detail:Object.freeze(t)});window.dispatchEvent(e);const r=()=>window.dispatchEvent(e);return window.addEventListener("eip6963:requestProvider",r),()=>window.removeEventListener("eip6963:requestProvider",r)}typeof document<"u"&&(document.addEventListener("eip6963:requestProvider",()=>{ge.eip6963RequestProvider()}),document.addEventListener("FarcasterFrameEthProviderEvent",t=>{if(t instanceof MessageEvent){const e=t.data;co.emit(e.event,...e.params)}}),document.addEventListener("FarcasterFrameEvent",t=>{if(t instanceof MessageEvent){const e=t.data;e.event==="eip6963:announceProvider"&&Jc({info:e.info,provider:bn})}}));typeof window<"u"&&(window.addEventListener("eip6963:requestProvider",()=>{ge.eip6963RequestProvider()}),window.addEventListener("message",t=>{if(t instanceof MessageEvent&&t.data.type==="frameEthProviderEvent"){const e=t.data;co.emit(e.event,...e.params)}}),window.addEventListener("message",t=>{if(t instanceof MessageEvent&&t.data.type==="frameEvent"){const e=t.data.event;e.event==="eip6963:announceProvider"&&Jc({info:e.info,provider:bn})}}));new TextEncoder;const Yc=new TextDecoder,i0=t=>{const e=atob(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r},s0=t=>{let e=t;e instanceof Uint8Array&&(e=Yc.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return i0(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}},o0=s0;function a0(t){return typeof t=="object"&&t!==null}function c0(t){if(!a0(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}class Bt extends Error{constructor(e,r){super(e,r),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}Bt.code="ERR_JOSE_GENERIC";class u0 extends Bt{constructor(e,r,n="unspecified",s="unspecified"){super(e,{cause:{claim:n,reason:s,payload:r}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=n,this.reason=s,this.payload=r}}u0.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class f0 extends Bt{constructor(e,r,n="unspecified",s="unspecified"){super(e,{cause:{claim:n,reason:s,payload:r}}),this.code="ERR_JWT_EXPIRED",this.claim=n,this.reason=s,this.payload=r}}f0.code="ERR_JWT_EXPIRED";class l0 extends Bt{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}l0.code="ERR_JOSE_ALG_NOT_ALLOWED";class d0 extends Bt{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}d0.code="ERR_JOSE_NOT_SUPPORTED";class h0 extends Bt{constructor(e="decryption operation failed",r){super(e,r),this.code="ERR_JWE_DECRYPTION_FAILED"}}h0.code="ERR_JWE_DECRYPTION_FAILED";class p0 extends Bt{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}p0.code="ERR_JWE_INVALID";class m0 extends Bt{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}m0.code="ERR_JWS_INVALID";class sr extends Bt{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}sr.code="ERR_JWT_INVALID";class g0 extends Bt{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}g0.code="ERR_JWK_INVALID";class y0 extends Bt{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}y0.code="ERR_JWKS_INVALID";class w0 extends Bt{constructor(e="no applicable key found in the JSON Web Key Set",r){super(e,r),this.code="ERR_JWKS_NO_MATCHING_KEY"}}w0.code="ERR_JWKS_NO_MATCHING_KEY";class v0 extends Bt{constructor(e="multiple matching keys found in the JSON Web Key Set",r){super(e,r),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}v0.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";class b0 extends Bt{constructor(e="request timed out",r){super(e,r),this.code="ERR_JWKS_TIMEOUT"}}b0.code="ERR_JWKS_TIMEOUT";class x0 extends Bt{constructor(e="signature verification failed",r){super(e,r),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}x0.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";function _0(t){if(typeof t!="string")throw new sr("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:r}=t.split(".");if(r===5)throw new sr("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new sr("Invalid JWT");if(!e)throw new sr("JWTs must contain a payload");let n;try{n=o0(e)}catch{throw new sr("Failed to base64url decode the payload")}let s;try{s=JSON.parse(Yc.decode(n))}catch{throw new sr("Failed to parse the decoded payload as JSON")}if(!c0(s))throw new sr("Invalid JWT Claims Set");return s}function E0(t){return _0(t)}class Mi extends Error{constructor(e,r={}){const n=(()=>{if(r.cause instanceof Mi){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return r.cause&&"details"in r.cause&&typeof r.cause.details=="string"?r.cause.details:r.cause?.message?r.cause.message:r.details})(),s=[e||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n?["",n?`Details: ${n}`:void 0]:[]].filter(i=>typeof i=="string").join(`
`);super(s,r.cause?{cause:r.cause}:void 0),this.name="BaseError",this.cause=r.cause,this.details=n,this.shortMessage=e}}class Xc extends Mi{constructor({status:e}){super(`Request failed with status ${e}`),this.name="RequestFailedError"}}class A0 extends Mi{constructor(e){super(e),this.name="InvalidToken"}}async function S0({origin:t}){const e=await fetch(`${t}/nonce`,{method:"POST"});if(!e.ok)throw new Xc({status:e.status});return await e.json()}async function B0({origin:t},e){const r=await fetch(`${t}/verify-siwf`,{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)});if(!r.ok)throw new Xc({status:r.status});const n=await r.json();if(n.valid===!1)throw new A0(n.message??"unknown");return{token:n.token}}function I0(t={}){return{origin:t.origin??"https://auth.farcaster.xyz"}}function k0(t={}){const e=I0(t);return{generateNonce:()=>S0(e),verifySiwf:r=>B0(e,r)}}const M0=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,R0=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function T0(t){const{scheme:e,statement:r,...n}=t.match(M0)?.groups??{},{chainId:s,expirationTime:i,issuedAt:a,notBefore:l,requestId:p,...x}=t.match(R0)?.groups??{},S=t.split("Resources:")[1]?.split(`
- `).slice(1);return{...n,...x,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...a?{issuedAt:new Date(a)}:{},...l?{notBefore:new Date(l)}:{},...p?{requestId:p}:{},...S?{resources:S}:{},...e?{scheme:e}:{},...r?{statement:r}:{}}}const da=(()=>{let t,e;async function r(n){const s=k0({origin:n.quickAuthServerOrigin}),{nonce:i}=await s.generateNonce(),a=await ge.signIn({nonce:i,acceptAuthAddress:!0});if(a.result){const l=T0(a.result.message);if(!l.domain)throw new Error("Missing domain on SIWE message");const p=await s.verifySiwf({domain:l.domain,message:a.result.message,signature:a.result.signature});return t={token:p.token,payload:E0(p.token)},p}throw a.error.type==="rejected_by_user"?new ba:new Error("Unreachable")}return{get token(){if(t&&new Date(t.payload.exp*1e3)>new Date(Date.now()+15e3))return t.token},async getToken(n={}){const s=n.force??!1;return t&&!s&&new Date(t.payload.exp*1e3)>new Date(Date.now()+15e3)?{token:t.token}:(e||(e=r(n)),e.finally(()=>{e=void 0}),e)},async fetch(n,s){const{token:i}=await this.getToken(),a=new Headers(s?.headers);return a.set("Authorization",`Bearer ${i}`),fetch(n,{...s,headers:a})}}})();function O0(){const t=new pc;return{get eventNames(){return t.eventNames.bind(t)},get listenerCount(){return t.listenerCount.bind(t)},get listeners(){return t.listeners.bind(t)},addListener:t.addListener.bind(t),emit:t.emit.bind(t),off:t.off.bind(t),on:t.on.bind(t),once:t.once.bind(t),removeAllListeners:t.removeAllListeners.bind(t),removeListener:t.removeListener.bind(t)}}const xt=O0(),{solanaProviderRequest:ha}=ge;let Qc;ha&&(Qc=Eh(Sh(ha)));async function pa(){let t;try{t=await ge.getCapabilities()}catch{}if(t?.includes("wallet.getSolanaProvider"))return Qc}let ma=null;async function C0(t=1e3){if(ma===!0)return!0;if(typeof window>"u"||!window.ReactNativeWebView&&window===window.parent)return!1;const e=await Promise.race([ge.context.then(r=>!!r),new Promise(r=>{setTimeout(()=>r(!1),t)})]).catch(()=>!1);return e&&(ma=!0),e}const ga=async()=>{const t=await ge.addFrame();if(t.result)return t.result;throw t.error.type==="invalid_domain_manifest"?new iu:t.error.type==="rejected_by_user"?new su:new Error("Unreachable")},ys={...xt,getCapabilities:ge.getCapabilities,getChains:ge.getChains,isInMiniApp:C0,context:ge.context,back:Bh({miniAppHost:ge,emitter:xt}),quickAuth:da,actions:{setPrimaryButton:ge.setPrimaryButton.bind(ge),ready:async(t={})=>await ge.ready(t),close:ge.close.bind(ge),viewCast:ge.viewCast.bind(ge),viewProfile:ge.viewProfile.bind(ge),openMiniApp:ge.openMiniApp.bind(ge),signIn:async t=>{const e=await ge.signIn({...t,acceptAuthAddress:t.acceptAuthAddress??!0});if(e.result)return e.result;throw e.error.type==="rejected_by_user"?new ba:new Error("Unreachable")},openUrl:t=>{const e=typeof t=="string"?t:t.url;return ge.openUrl(e.trim())},addFrame:ga,addMiniApp:ga,composeCast(t={}){return ge.composeCast(t)},viewToken:ge.viewToken.bind(ge),sendToken:ge.sendToken.bind(ge),swapToken:ge.swapToken.bind(ge),requestCameraAndMicrophoneAccess:ge.requestCameraAndMicrophoneAccess.bind(ge)},experimental:{getSolanaProvider:pa,signManifest:async t=>{const e=await ge.signManifest(t);if(e.result)return e.result;throw e.error.type==="rejected_by_user"?new ou:e.error.type==="invalid_domain"?new au:e.error.type==="generic_error"?new cu(e.error.message):new Error("Unreachable")},quickAuth(t){return da.getToken(t)}},wallet:{ethProvider:bn,getEthereumProvider:n0,getSolanaProvider:pa},haptics:{impactOccurred:ge.impactOccurred.bind(ge),notificationOccurred:ge.notificationOccurred.bind(ge),selectionChanged:ge.selectionChanged.bind(ge)}};typeof document<"u"&&document.addEventListener("FarcasterFrameEvent",t=>{if(t instanceof MessageEvent){const e=t.data;e.event==="primary_button_clicked"?xt.emit("primaryButtonClicked"):e.event==="miniapp_added"?xt.emit("miniAppAdded",{notificationDetails:e.notificationDetails}):e.event==="miniapp_add_rejected"?xt.emit("miniAppAddRejected",{reason:e.reason}):e.event==="miniapp_removed"?xt.emit("miniAppRemoved"):e.event==="notifications_enabled"?xt.emit("notificationsEnabled",{notificationDetails:e.notificationDetails}):e.event==="notifications_disabled"?xt.emit("notificationsDisabled"):e.event==="back_navigation_triggered"&&xt.emit("backNavigationTriggered")}});typeof window<"u"&&window.addEventListener("message",t=>{if(t instanceof MessageEvent&&t.data.type==="frameEvent"){const e=t.data.event;e.event==="primary_button_clicked"?xt.emit("primaryButtonClicked"):e.event==="miniapp_added"?xt.emit("miniAppAdded",{notificationDetails:e.notificationDetails}):e.event==="miniapp_add_rejected"?xt.emit("miniAppAddRejected",{reason:e.reason}):e.event==="miniapp_removed"?xt.emit("miniAppRemoved"):e.event==="notifications_enabled"?xt.emit("notificationsEnabled",{notificationDetails:e.notificationDetails}):e.event==="notifications_disabled"?xt.emit("notificationsDisabled"):e.event==="back_navigation_triggered"&&xt.emit("backNavigationTriggered")}});async function U0(){let t=!1;try{t=await ys.isInMiniApp()}catch{}let e=null;if(t)try{e=ys.context}catch{}try{await ys.actions.ready()}catch{}return{inMiniApp:t,context:e}}const ya="bubachain_state_mvp";function L0(){const t={balanceBC:0,unclaimedBC:0,running:!1,baseRatePerMin:1,activeMinutesToday:0,dailyLimitMin:360,lastClaimMs:0,claimCooldownMs:6e4,adReadyUntilMs:0,adWindowMs:3e4,stormActive:!1,stormEndsAtMs:0,nextStormAtMs:0,dailyClaimedDate:"",dailyBoostUntilMs:0,soundOn:!0,lastTickMs:Date.now()};function e(){return new Date().toDateString()}function r(){localStorage.setItem(ya,JSON.stringify({...t,_date:e()}))}function n(){const R=localStorage.getItem(ya);if(!R){i();return}try{const N=JSON.parse(R);N._date===e()?(t.activeMinutesToday=N.activeMinutesToday??0,t.dailyClaimedDate=N.dailyClaimedDate??""):(t.activeMinutesToday=0,t.dailyClaimedDate=""),Object.assign(t,N),t.nextStormAtMs||i();const j=Date.now();t.stormActive&&j>t.stormEndsAtMs&&l()}catch{i()}}function s(){t.running=!0}function i(R=Date.now()){t.nextStormAtMs=R+Math.floor(3e5+Math.random()*6e5)}function a(R=Date.now()){t.stormActive=!0,t.stormEndsAtMs=R+3e4}function l(){t.stormActive=!1,t.stormEndsAtMs=0,i()}function p(){return t.dailyClaimedDate!==e()}function x(R=Date.now()){return p()?(t.dailyBoostUntilMs=R+10*6e4,t.dailyClaimedDate=e(),!0):!1}function S(R=Date.now()){let N=t.baseRatePerMin;return R<t.dailyBoostUntilMs&&(N*=1.5),t.stormActive&&(N*=2),N}function T(R=Date.now()){t.adReadyUntilMs=R+t.adWindowMs}function k(R=Date.now()){return!(t.unclaimedBC<=0||R-t.lastClaimMs<t.claimCooldownMs||R>t.adReadyUntilMs)}function B(R=Date.now()){if(!k(R))return{ok:!1,gained:0};const N=t.stormActive?1.2:1,j=Math.floor(t.unclaimedBC*N);return t.balanceBC+=j,t.unclaimedBC=0,t.adReadyUntilMs=0,t.lastClaimMs=R,{ok:!0,gained:j}}function C(R=Date.now()){!t.stormActive&&R>=t.nextStormAtMs&&a(R),t.stormActive&&R>=t.stormEndsAtMs&&l(),t.running&&(document.hidden||t.activeMinutesToday>=t.dailyLimitMin||R-t.lastTickMs>=6e4&&(t.unclaimedBC+=Math.floor(S(R)),t.activeMinutesToday+=1,t.lastTickMs=R))}return n(),{state:t,save:r,start:s,tick:C,watchAdUnlock:T,canClaim:k,claim:B,dailyAvailable:p,claimDaily:x,effectiveRate:S}}const Vn="0x2105";function eu(){return typeof window<"u"&&!!window.ethereum&&typeof window.ethereum.request=="function"}async function N0(){if(!eu())throw new Error("No injected wallet detected.");const e=(await window.ethereum.request({method:"eth_requestAccounts"}))?.[0];if(!e)throw new Error("No wallet address returned.");let r=null;try{r=await window.ethereum.request({method:"eth_chainId"}),r!==Vn&&(await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:Vn}]}),r=Vn)}catch{}return{address:e,chainId:r}}function tu(t){return t?t.slice(0,6)+""+t.slice(-4):""}const ft=t=>document.getElementById(t),Dn=ft("pillStatus"),jn=ft("pillStorm"),F0=ft("intro"),P0=ft("btnCloseIntro"),Us=ft("btnToggleSound"),D0=ft("balance"),j0=ft("unclaimed"),z0=ft("daily"),q0=ft("rate"),vi=ft("tip"),$0=ft("btnStart"),Z0=ft("btnReset"),wa=ft("fcUser"),uo=ft("walletAddr"),ru=ft("chainInfo"),V0=ft("btnConnect"),bi=ft("btnDisconnect"),Ur=ft("btnWatchAd"),nu=ft("btnClaim"),zn=ft("claimInfo");function Mr(t=520,e=40,r=.015){try{const n=new(window.AudioContext||window.webkitAudioContext),s=n.createOscillator(),i=n.createGain();s.type="sine",s.frequency.value=t,i.gain.value=r,s.connect(i),i.connect(n.destination),s.start(),setTimeout(()=>{s.stop(),n.close()},e)}catch{}}const ve=L0(),ws=await U0();if(ws?.context?.user){const t=ws.context.user,e=t.username?`@${t.username}`:t.displayName||"User";wa.textContent=`${e} (FID ${t.fid})`}else wa.textContent=ws?.inMiniApp?"Mini App (no user info)":"Not detected";P0.onclick=()=>{ve.state.soundOn&&Mr(),F0.style.display="none",ve.dailyAvailable()&&(ve.claimDaily(Date.now()),vi.textContent="Daily boost activated (+50% for 10 minutes).",ve.save())};Us.onclick=()=>{ve.state.soundOn=!ve.state.soundOn,Us.textContent=`Sound: ${ve.state.soundOn?"ON":"OFF"}`,ve.state.soundOn&&Mr(),ve.save()};$0.onclick=()=>{ve.state.soundOn&&Mr(),ve.start(),ve.save(),en()};Z0.onclick=()=>{confirm("Reset ALL progress? This cannot be undone.")&&(localStorage.clear(),location.reload())};V0.onclick=async()=>{ve.state.soundOn&&Mr();try{const{address:t,chainId:e}=await N0();localStorage.setItem("bubachain_wallet",t),uo.textContent=tu(t),ru.textContent=e===Vn?"Base":e||"Unknown",bi.disabled=!1,vi.textContent="Wallet connected (MVP)."}catch(t){vi.textContent=eu()?`Wallet connect failed: ${t.message}`:"No injected wallet detected. Open inside a wallet-enabled client."}};bi.onclick=async()=>{ve.state.soundOn&&Mr(),localStorage.removeItem("bubachain_wallet"),uo.textContent="Not connected",ru.textContent="",bi.disabled=!0};let rn=null;Ur.onclick=()=>{ve.state.soundOn&&Mr(),Ur.disabled=!0;let t=10;Ur.textContent=`Watching ${t}s`,rn&&clearInterval(rn),rn=setInterval(()=>{if(t-=1,t<=0){clearInterval(rn),rn=null,ve.watchAdUnlock(Date.now()),Ur.disabled=!1,Ur.textContent="Watch Ad (10s)",ve.save(),en();return}Ur.textContent=`Watching ${t}s`},1e3)};nu.onclick=()=>{ve.state.soundOn&&Mr(620,60,.02);const t=ve.claim(Date.now());t.ok&&(vi.textContent=`Claimed +${t.gained} BC${ve.state.stormActive?" (Storm bonus!)":""}`,ve.save(),en())};function en(){const t=Date.now();if(D0.textContent=`${Math.floor(ve.state.balanceBC)} BC`,j0.textContent=`${Math.floor(ve.state.unclaimedBC)} BC`,z0.textContent=`${ve.state.activeMinutesToday}/${ve.state.dailyLimitMin} min`,q0.textContent=`${ve.effectiveRate(t).toFixed(2)} BC/min`,ve.state.running?document.hidden?Dn.textContent="Status: Paused (tab hidden)":ve.state.activeMinutesToday>=ve.state.dailyLimitMin?Dn.textContent="Status: Daily limit reached":Dn.textContent="Status: Running":Dn.textContent="Status: Idle",ve.state.stormActive){const n=Math.max(0,ve.state.stormEndsAtMs-t);jn.classList.add("stormOn"),jn.textContent=`STORM  ${Math.ceil(n/1e3)}s`,document.body.classList.add("storm")}else jn.classList.remove("stormOn"),jn.textContent="Storm: OFF",document.body.classList.remove("storm");const e=Math.max(0,ve.state.claimCooldownMs-(t-ve.state.lastClaimMs)),r=Math.max(0,ve.state.adReadyUntilMs-t);nu.disabled=!ve.canClaim(t),ve.state.unclaimedBC<=0?zn.textContent="Earn unclaimed coins first.":e>0?zn.textContent=`Claim cooldown: ${Math.ceil(e/1e3)}s`:r>0?zn.textContent=ve.state.stormActive?"Ad verified  Claim now (Storm bonus!)":`Ad verified  Claim within ${Math.ceil(r/1e3)}s`:zn.textContent="Watch an ad to unlock Claim.",Us.textContent=`Sound: ${ve.state.soundOn?"ON":"OFF"}`}setInterval(()=>{ve.tick(Date.now()),ve.save(),en()},1e3);document.addEventListener("visibilitychange",en);const va=localStorage.getItem("bubachain_wallet");va&&(uo.textContent=tu(va),bi.disabled=!1);en();
